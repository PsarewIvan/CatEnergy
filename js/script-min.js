"use strict";function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.matchMedia||(window.matchMedia=function(){var t=window.styleMedia||window.media;if(!t){var n,r=document.createElement("style"),e=document.getElementsByTagName("script")[0];r.type="text/css",r.id="matchmediajs-test",e.parentNode.insertBefore(r,e),n="getComputedStyle"in window&&window.getComputedStyle(r,null)||r.currentStyle,t={matchMedium:function(e){var t="@media "+e+"{ #matchmediajs-test { width: 1px; } }";return r.styleSheet?r.styleSheet.cssText=t:r.textContent=t,"1px"===n.width}}}return function(e){return{matches:t.matchMedium(e||"all"),media:e||"all"}}}()),function(l,d,e){function t(e){"object"===("undefined"==typeof module?"undefined":m(module))&&"object"===m(module.exports)?module.exports=e:"function"==typeof define&&define.amd&&define("picturefill",function(){return e}),"object"===m(l)&&(l.picturefill=e)}if(l.HTMLPictureElement)t(function(){});else{d.createElement("picture");var n,r,u=l.picturefill||{},p=/\s+\+?\d+(e\d+)?w/;u.ns="picturefill",u.srcsetSupported="srcset"in e,u.sizesSupported="sizes"in e,u.curSrcSupported="currentSrc"in e,u.trim=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},u.makeUrl=(n=d.createElement("a"),function(e){return n.href=e,n.href}),u.restrictsMixedContent=function(){return"https:"===l.location.protocol},u.matchesMedia=function(e){return l.matchMedia&&l.matchMedia(e).matches},u.getDpr=function(){return l.devicePixelRatio||1},u.getWidthFromLength=function(e){var t;if(!e||-1<e.indexOf("%")!=!1||!(0<parseFloat(e)||-1<e.indexOf("calc(")))return!1;e=e.replace("vw","%"),u.lengthEl||(u.lengthEl=d.createElement("div"),u.lengthEl.style.cssText="border:0;display:block;font-size:1em;left:0;margin:0;padding:0;position:absolute;visibility:hidden",u.lengthEl.className="helper-from-picturefill-js"),u.lengthEl.style.width="0px";try{u.lengthEl.style.width=e}catch(e){}return d.body.appendChild(u.lengthEl),(t=u.lengthEl.offsetWidth)<=0&&(t=!1),d.body.removeChild(u.lengthEl),t},u.detectTypeSupport=function(e,t){var n=new l.Image;return n.onerror=function(){u.types[e]=!1,s()},n.onload=function(){u.types[e]=1===n.width,s()},n.src=t,"pending"},u.types=u.types||{},u.initTypeDetects=function(){u.types["image/jpeg"]=!0,u.types["image/gif"]=!0,u.types["image/png"]=!0,u.types["image/svg+xml"]=d.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"),u.types["image/webp"]=u.detectTypeSupport("image/webp","data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=")},u.verifyTypeSupport=function(e){var t=e.getAttribute("type");if(null===t||""===t)return!0;var n=u.types[t];return"string"==typeof n&&"pending"!==n?(u.types[t]=u.detectTypeSupport(t,n),"pending"):"function"==typeof n?(n(),"pending"):n},u.parseSize=function(e){var t=/(\([^)]+\))?\s*(.+)/g.exec(e);return{media:t&&t[1],length:t&&t[2]}},u.findWidthFromSourceSize=function(e){for(var t,n=u.trim(e).split(/\s*,\s*/),r=0,i=n.length;r<i;r++){var s=n[r],o=u.parseSize(s),a=o.length,c=o.media;if(a&&((!c||u.matchesMedia(c))&&(t=u.getWidthFromLength(a))))break}return t||Math.max(l.innerWidth||0,d.documentElement.clientWidth)},u.parseSrcset=function(e){for(var t=[];""!==e;){var n,r=(e=e.replace(/^\s+/g,"")).search(/\s/g),i=null;if(-1!==r){if(","!==(n=e.slice(0,r)).slice(-1)&&""!==n||(n=n.replace(/,+$/,""),i=""),e=e.slice(r+1),null===i){var s=e.indexOf(",");e=-1!==s?(i=e.slice(0,s),e.slice(s+1)):(i=e,"")}}else n=e,e="";(n||i)&&t.push({url:n,descriptor:i})}return t},u.parseDescriptor=function(e,t){var n,r=t||"100vw",i=e&&e.replace(/(^\s+|\s+$)/g,""),s=u.findWidthFromSourceSize(r);if(i)for(var o=i.split(" "),a=o.length-1;0<=a;a--){var c=o[a],l=c&&c.slice(c.length-1);if("h"!==l&&"w"!==l||u.sizesSupported){if("x"===l){var d=c&&parseFloat(c,10);n=d&&!isNaN(d)?d:1}}else n=parseFloat(parseInt(c,10)/s)}return n||1},u.getCandidatesFromSourceSet=function(e,t){for(var n=u.parseSrcset(e),r=[],i=0,s=n.length;i<s;i++){var o=n[i];r.push({url:o.url,resolution:u.parseDescriptor(o.descriptor,t)})}return r},u.dodgeSrcset=function(e){e.srcset&&(e[u.ns].srcset=e.srcset,e.srcset="",e.setAttribute("data-pfsrcset",e[u.ns].srcset))},u.processSourceSet=function(e){var t=e.getAttribute("srcset"),n=e.getAttribute("sizes"),r=[];return"IMG"===e.nodeName.toUpperCase()&&e[u.ns]&&e[u.ns].srcset&&(t=e[u.ns].srcset),t&&(r=u.getCandidatesFromSourceSet(t,n)),r},u.backfaceVisibilityFix=function(e){var t=e.style||{},n="webkitBackfaceVisibility"in t,r=t.zoom;n&&(t.zoom=".999",n=e.offsetWidth,t.zoom=r)},u.setIntrinsicSize=(r={},function(e,t){var n;e[u.ns]&&!l.pfStopIntrinsicSize&&(void 0===e[u.ns].dims&&(e[u.ns].dims=e.getAttribute("width")||e.getAttribute("height")),e[u.ns].dims||(t.url in r?i(e,r[t.url],t.resolution):((n=d.createElement("img")).onload=function(){if(r[t.url]=n.width,!r[t.url])try{d.body.appendChild(n),r[t.url]=n.width||n.offsetWidth,d.body.removeChild(n)}catch(e){}e.src===t.url&&i(e,r[t.url],t.resolution),e=null,n.onload=null,n=null},n.src=t.url)))}),u.applyBestCandidate=function(e,t){var n,r,i;e.sort(u.ascendingSort),i=e[(r=e.length)-1];for(var s=0;s<r;s++)if((n=e[s]).resolution>=u.getDpr()){i=n;break}i&&(i.url=u.makeUrl(i.url),t.src!==i.url&&(u.restrictsMixedContent()&&"http:"===i.url.substr(0,"http:".length).toLowerCase()?void 0!==window.console&&console.warn("Blocked mixed content image "+i.url):(t.src=i.url,u.curSrcSupported||(t.currentSrc=t.src),u.backfaceVisibilityFix(t))),u.setIntrinsicSize(t,i))},u.ascendingSort=function(e,t){return e.resolution-t.resolution},u.removeVideoShim=function(e){var t=e.getElementsByTagName("video");if(t.length){for(var n=t[0],r=n.getElementsByTagName("source");r.length;)e.insertBefore(r[0],n);n.parentNode.removeChild(n)}},u.getAllElements=function(){for(var e=[],t=d.getElementsByTagName("img"),n=0,r=t.length;n<r;n++){var i=t[n];("PICTURE"===i.parentNode.nodeName.toUpperCase()||null!==i.getAttribute("srcset")||i[u.ns]&&null!==i[u.ns].srcset)&&e.push(i)}return e},u.getMatch=function(e,t){for(var n,r=t.childNodes,i=0,s=r.length;i<s;i++){var o=r[i];if(1===o.nodeType){if(o===e)return n;if("SOURCE"===o.nodeName.toUpperCase()){null!==o.getAttribute("src")&&void 0!==("undefined"==typeof console?"undefined":m(console))&&console.warn("The `src` attribute is invalid on `picture` `source` element; instead, use `srcset`.");var a=o.getAttribute("media");if(o.getAttribute("srcset")&&(!a||u.matchesMedia(a))){var c=u.verifyTypeSupport(o);if(!0===c){n=o;break}if("pending"===c)return!1}}}}return n},function(){function e(){s({reevaluate:!0})}u.initTypeDetects(),s();var t,n=setInterval(function(){s(),/^loaded|^i|^c/.test(d.readyState)&&clearInterval(n)},250);function r(){clearTimeout(t),t=setTimeout(e,60)}l.addEventListener?l.addEventListener("resize",r,!1):l.attachEvent&&l.attachEvent("onresize",r)}(),s._=u,t(s)}function i(e,t,n){t&&e.setAttribute("width",parseInt(t/n,10))}function s(e){for(var t,n,r,i,s,o=e||{},a=0,c=(t=o.elements||u.getAllElements()).length;a<c;a++)if(r=(n=t[a]).parentNode,s=i=void 0,"IMG"===n.nodeName.toUpperCase()&&(n[u.ns]||(n[u.ns]={}),o.reevaluate||!n[u.ns].evaluated)){if(r&&"PICTURE"===r.nodeName.toUpperCase()){if(u.removeVideoShim(r),!1===(i=u.getMatch(n,r)))continue}else i=void 0;(r&&"PICTURE"===r.nodeName.toUpperCase()||!u.sizesSupported&&n.srcset&&p.test(n.srcset))&&u.dodgeSrcset(n),i?(s=u.processSourceSet(i),u.applyBestCandidate(s,n)):(s=u.processSourceSet(n),void 0!==n.srcset&&!n[u.ns].srcset||u.applyBestCandidate(s,n)),n[u.ns].evaluated=!0}}}(window,window.document,new window.Image);var t=document.querySelector(".js--main-nav"),n=document.querySelector(".js--header__nav-btn");document.querySelector("js--header-burger");if(matchMedia){var e=window.matchMedia("(min-width: 768px)");e.addListener(r),r(e)}function r(e){e.matches?(t.classList.remove("display-none"),n.classList.add("display-none")):(t.classList.add("display-none"),n.classList.remove("display-none"),n.classList.remove("header__nav-btn--close"))}if(n.addEventListener("click",function(e){e.preventDefault(),t.classList.toggle("display-none"),n.classList.toggle("header__nav-btn--close")}),document.querySelector(".js-example__switch")){var i=function(e){e.matches?(c.addEventListener("click",s),l.addEventListener("click",o),d.addEventListener("click",a)):(c.removeEventListener("click",s),l.removeEventListener("click",o),d.removeEventListener("click",a))},s=function(e){e.preventDefault(),u.classList.remove(f),p.classList.add(f),d.classList.add("example__switch--after")},o=function(e){e.preventDefault(),p.classList.remove(f),u.classList.add(f),d.classList.remove("example__switch--after")},a=function(e){e.preventDefault(),p.classList.toggle(f),u.classList.toggle(f),d.classList.toggle("example__switch--after")},c=document.querySelector(".js-example__switch-btn--after"),l=document.querySelector(".js-example__switch-btn--before"),d=document.querySelector(".js-example__switch"),u=document.querySelector(".js-example__picture--after"),p=document.querySelector(".js-example__picture--before"),f="example__picture--hide";if(matchMedia){var h=window.matchMedia("(max-width: 768px)");h.addListener(i),i(h)}}document.querySelector("#ymap")&&ymaps.ready(function(){var t=new ymaps.Map("ymap",{center:[59.938631,30.3230554],zoom:17}),e=new ymaps.Placemark([59.938631,30.3230554],{balloonContentHeader:"Cat Energy",balloonContentBody:"ул. Большая <br>Конюшенная, д. 19/8 <br>Санкт-Петербург",hintContent:"Мы находимся здесь"},{iconLayout:"default#image",iconImageHref:"img/picture/map-pin.png",iconImageSize:[60,51],iconImageOffset:[-30,-51]});if(t.geoObjects.add(e),t.behaviors.disable(["scrollZoom"]),matchMedia){var n=function(e){e.matches?t.setCenter([59.938725,30.319447]):t.setCenter([59.938631,30.3230554])},r=window.matchMedia("(min-width: 1300px)");r.addListener(n),n(r)}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsid2luZG93IiwibWF0Y2hNZWRpYSIsInN0eWxlTWVkaWEiLCJtZWRpYSIsImluZm8iLCJzY3JpcHQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwic3R5bGUiLCJwYXJlbnROb2RlIiwiaW5zZXJ0QmVmb3JlIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImN1cnJlbnRTdHlsZSIsIm1hdGNoTWVkaXVtIiwidGV4dCIsInN0eWxlU2hlZXQiLCJ0ZXh0Q29udGVudCIsIndpZHRoIiwibWF0Y2hlcyIsInciLCJkb2MiLCJpbWFnZSIsImV4cG9zZSIsInBpY3R1cmVmaWxsIiwibW9kdWxlIiwiX3R5cGVvZiIsImV4cG9ydHMiLCJkZWZpbmUiLCJhbWQiLCJIVE1MUGljdHVyZUVsZW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiYW5jaG9yIiwic2V0SW50cmluc2ljU2l6ZSIsInBmIiwicmVnV0Rlc2MiLCJucyIsInNpemVzU3VwcG9ydGVkIiwiY3VyU3JjU3VwcG9ydGVkIiwidHJpbSIsInN0ciIsInJlcGxhY2UiLCJtYWtlVXJsIiwic3JjIiwiaHJlZiIsInJlc3RyaWN0c01peGVkQ29udGVudCIsImxvY2F0aW9uIiwibWF0Y2hlc01lZGlhIiwiZ2V0RHByIiwiZGV2aWNlUGl4ZWxSYXRpbyIsImdldFdpZHRoRnJvbUxlbmd0aCIsImxlbmd0aCIsImNzc1ZhbHVlIiwiaW5kZXhPZiIsInBhcnNlRmxvYXQiLCJsZW5ndGhFbCIsImNzc1RleHQiLCJlIiwiYm9keSIsImFwcGVuZENoaWxkIiwib2Zmc2V0V2lkdGgiLCJkZXRlY3RUeXBlU3VwcG9ydCIsInR5cGUiLCJ0eXBlVXJpIiwib25lcnJvciIsIkltYWdlIiwib25sb2FkIiwidHlwZXMiLCJpbml0VHlwZURldGVjdHMiLCJpbXBsZW1lbnRhdGlvbiIsImhhc0ZlYXR1cmUiLCJ2ZXJpZnlUeXBlU3VwcG9ydCIsInNvdXJjZSIsInBmVHlwZSIsInBhcnNlU2l6ZSIsInNvdXJjZVNpemVTdHIiLCJtYXRjaCIsImZpbmRXaWR0aEZyb21Tb3VyY2VTaXplIiwic291cmNlU2l6ZUxpc3RTdHIiLCJ3aW5uaW5nTGVuZ3RoIiwic291cmNlU2l6ZUxpc3QiLCJzcGxpdCIsImkiLCJsZW4iLCJzb3VyY2VTaXplIiwicGFyc2VkU2l6ZSIsIk1hdGgiLCJtYXgiLCJpbm5lcldpZHRoIiwiZG9jdW1lbnRFbGVtZW50IiwiY2xpZW50V2lkdGgiLCJwYXJzZVNyY3NldCIsInNyY3NldCIsImNhbmRpZGF0ZXMiLCJ1cmwiLCJwb3MiLCJzZWFyY2giLCJkZXNjcmlwdG9yIiwic2xpY2UiLCJkZXNjcG9zIiwicGFyc2VEZXNjcmlwdG9yIiwic2l6ZXNhdHRyIiwicmVzQ2FuZGlkYXRlIiwic2l6ZXMiLCJzaXplRGVzY3JpcHRvciIsIndpZHRoSW5Dc3NQaXhlbHMiLCJzcGxpdERlc2NyaXB0b3IiLCJjdXJyIiwibGFzdGNoYXIiLCJyZXMiLCJpc05hTiIsInBhcnNlSW50IiwiZ2V0Q2FuZGlkYXRlc0Zyb21Tb3VyY2VTZXQiLCJmb3JtYXR0ZWRDYW5kaWRhdGVzIiwiY2FuZGlkYXRlIiwiZG9kZ2VTcmNzZXQiLCJpbWciLCJzZXRBdHRyaWJ1dGUiLCJwcm9jZXNzU291cmNlU2V0IiwiZWwiLCJnZXRBdHRyaWJ1dGUiLCJ0b1VwcGVyQ2FzZSIsImJhY2tmYWNlVmlzaWJpbGl0eUZpeCIsInBpY0ltZyIsImN1cnJlbnRab29tIiwiem9vbSIsIldlYmtpdEJhY2tmYWNlVmlzaWJpbGl0eSIsImJlc3RDYW5kaWRhdGUiLCJwZlN0b3BJbnRyaW5zaWNTaXplIiwidW5kZWZpbmVkIiwiZGltcyIsInVybENhY2hlIiwicmVtb3ZlQ2hpbGQiLCJzZXRTaXplIiwicmVzb2x1dGlvbiIsImFwcGx5QmVzdENhbmRpZGF0ZSIsInNvcnQiLCJhc2NlbmRpbmdTb3J0Iiwic3Vic3RyIiwidG9Mb3dlckNhc2UiLCJjb25zb2xlIiwiY3VycmVudFNyYyIsImEiLCJiIiwicmVtb3ZlVmlkZW9TaGltIiwicGljdHVyZSIsInZpZGVvcyIsInZpZGVvIiwidnNvdXJjZXMiLCJnZXRBbGxFbGVtZW50cyIsImltZ3MiLCJoIiwiY3VyckltZyIsIm5vZGVOYW1lIiwiZWxlbXMiLCJwdXNoIiwiZ2V0TWF0Y2giLCJzb3VyY2VzIiwiY2hpbGROb2RlcyIsImoiLCJzbGVuIiwibm9kZVR5cGUiLCJ3YXJuIiwidHlwZVN1cHBvcnRlZCIsImhhbmRsZVJlc2l6ZSIsInJlZXZhbHVhdGUiLCJyZXNpemVUaW1lciIsImludGVydmFsSWQiLCJzZXRJbnRlcnZhbCIsInRlc3QiLCJyZWFkeVN0YXRlIiwiY2xlYXJJbnRlcnZhbCIsImNoZWNrUmVzaXplIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsImFkZEV2ZW50TGlzdGVuZXIiLCJydW5QaWN0dXJlZmlsbCIsImF0dGFjaEV2ZW50IiwiZWxlbWVudHMiLCJlbGVtZW50IiwicGFyZW50IiwiZmlyc3RNYXRjaCIsIm9wdGlvbnMiLCJwbGVuIiwiZXZhbHVhdGVkIiwibWFpbk5hdiIsInF1ZXJ5U2VsZWN0b3IiLCJtYWluTmF2QnV0dG9uIiwibXFOYXYiLCJXaWR0aENoYW5nZU5hdiIsImV2dCIsInByZXZlbnREZWZhdWx0IiwibXEiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJhZGQiLCJ0b2dnbGUiLCJleGFtcGxlVG9nZ2xlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV4YW1wbGVBZnRlckJ0biIsInNob3dJbWdBZnRlciIsImV4YW1wbGVCZWZvcmVCdG4iLCJzaG93SW1nQmVmb3JlIiwidG9nZ2xlSW1nIiwiaW1nQWZ0ZXIiLCJpbWdCZWZvcmUiLCJpbWdIaWRlIiwiV2lkdGhDaGFuZ2VFeGFtcGxlIiwibXFFeGFtcGxlIiwieW1hcHMiLCJyZWFkeSIsIm15TWFwIiwiTWFwIiwiY2VudGVyIiwiUGxhY2VtYXJrIiwiaGludENvbnRlbnQiLCJiYWxsb29uQ29udGVudEhlYWRlciIsImJhbGxvb25Db250ZW50Qm9keSIsImljb25JbWFnZU9mZnNldCIsImljb25JbWFnZVNpemUiLCJwbGFjZW1hcmsiLCJzZXRDZW50ZXIiLCJiZWhhdmlvcnMiLCJkaXNhYmxlIiwiZGV2aWNlV2lkdGgiLCJhZGRMaXN0ZW5lciIsInNldE1hcENlbnRlciJdLCJtYXBwaW5ncyI6ImtQQUdBQSxPQUFBQyxhQUFBRCxPQUFBQyxXQUFBLFdBR0EsSUFBQUMsRUFBQUYsT0FBQUUsWUFBQUYsT0FBQUcsTUFTQyxJQUFLRCxFQUFZLENBSGpCLElBR0FFLEVBSElGLEVBQWNGLFNBQU9FLGNBQWNGLFNBS3JDSyxFQUFjQyxTQUFTQyxxQkFBcUIsVUFBVSxHQUR2REMsRUFDQ0gsS0FBTSxXQURQRyxFQUVDSixHQUFjLG9CQUdmSSxFQUFLQyxXQUFTQyxhQUFBRixFQUFkSCxHQUtBRCxFQUFJLHFCQUFJSixRQUFpQ0EsT0FBT1csaUJBQWlCSCxFQUFPLE9BQVNBLEVBQU1JLGFBR3RGQyxFQUFBQSxDQUNDQSxZQUFRLFNBQUdWLEdBQVgsSUFBSVcsRUFBTyxVQUFZWCxFQUFRLHlDQUZwQixPQU9WSyxFQUZETyxXQUdDUCxFQUFBQSxXQUFNUSxRQUFjRixFQUFwQk4sRUFBTVEsWUFBY0YsRUFSdkIsUUFBQVYsRUFBQWEsUUFtQkNDLE9BQUFBLFNBQVNoQixHQUNUQyxNQUFBQSxDQUZNZSxRQUFQaEIsRUFBQVcsWUFBQVYsR0FBQSxPQUREQSxNQUFBQSxHQUFBLFFBMUNELElBdURDLFNBQUFnQixFQUFBQyxFQUFBQyxHQUlDLFNBQUFDLEVBQUFDLEdBRUMsWUFBQSxvQkFBQUMsT0FBQSxZQUFBQyxFQUFBRCxVQUFBLFdBQUFDLEVBQUFELE9BQUFFLFNBRUFGLE9BSERFLFFBR1lILEVBQ1gsbUJBQUFJLFFBQUFBLE9BQUFDLEtBQ29DRCxPQUFBLGNBQUEsV0FBQSxPQUFBSixJQUNwQyxXQUFBRSxFQUFBTixLQUNEQSxFQUFBSSxZQUFLQSxHQU9OLEdBQUtKLEVBQUVVLG1CQUNOUCxFQUFPLGtCQURSLENBTUFGLEVBQUlVLGNBQWUsV0FHbkIsSUEwQkNDLEVBa1VFQyxFQTVWQ0MsRUFBS2QsRUFBRUksYUFBZSxHQUUx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LENBQU0sZUFHekJQLFdBQUEsQ0FBQSxJQVNXaE0sRUFBUCxTQUFnQjZLLEdBQ2RtQixFQUFLaE0sUUFEUGdNLEVBRU9VLFVBQUEsQ0FBQSxVQUFBLFlBRU5WLEVBQUFVLFVBQUEsQ0FBQSxVQUFBLGNBWkNDLEVBQVVDLE9BQVM3TixXQUF6Qix1QkFJRThOLEVBQVlDLFlBQVlDLEdBRjFCQSxFQUFBRiIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcclxuICogUGljdHVyZWZpbGxcclxuICovXHJcbi8qISBQaWN0dXJlZmlsbCAtIHYyLjMuMSAtIDIwMTUtMDQtMDlcclxuKiBodHRwOi8vc2NvdHRqZWhsLmdpdGh1Yi5pby9waWN0dXJlZmlsbFxyXG4qIENvcHlyaWdodCAoYykgMjAxNSBodHRwczovL2dpdGh1Yi5jb20vc2NvdHRqZWhsL3BpY3R1cmVmaWxsL2Jsb2IvbWFzdGVyL0F1dGhvcnMudHh0OyBMaWNlbnNlZCBNSVQgKi9cclxuLyohIG1hdGNoTWVkaWEoKSBwb2x5ZmlsbCAtIFRlc3QgYSBDU1MgbWVkaWEgdHlwZS9xdWVyeSBpbiBKUy4gQXV0aG9ycyAmIGNvcHlyaWdodCAoYykgMjAxMjogU2NvdHQgSmVobCwgUGF1bCBJcmlzaCwgTmljaG9sYXMgWmFrYXMsIERhdmlkIEtuaWdodC4gRHVhbCBNSVQvQlNEIGxpY2Vuc2UgKi9cclxuXHJcbndpbmRvdy5tYXRjaE1lZGlhIHx8ICh3aW5kb3cubWF0Y2hNZWRpYSA9IGZ1bmN0aW9uKCkge1xyXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cclxuXHQvLyBGb3IgYnJvd3NlcnMgdGhhdCBzdXBwb3J0IG1hdGNoTWVkaXVtIGFwaSBzdWNoIGFzIElFIDkgYW5kIHdlYmtpdFxyXG5cdHZhciBzdHlsZU1lZGlhID0gKHdpbmRvdy5zdHlsZU1lZGlhIHx8IHdpbmRvdy5tZWRpYSk7XHJcblxyXG5cdC8vIEZvciB0aG9zZSB0aGF0IGRvbid0IHN1cHBvcnQgbWF0Y2hNZWRpdW1cclxuXHRpZiAoIXN0eWxlTWVkaWEpIHtcclxuXHRcdHZhciBzdHlsZSAgICAgICA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyksXHJcblx0XHRcdHNjcmlwdCAgICAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdLFxyXG5cdFx0XHRpbmZvICAgICAgICA9IG51bGw7XHJcblxyXG5cdFx0c3R5bGUudHlwZSAgPSAndGV4dC9jc3MnO1xyXG5cdFx0c3R5bGUuaWQgICAgPSAnbWF0Y2htZWRpYWpzLXRlc3QnO1xyXG5cclxuXHRcdHNjcmlwdC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShzdHlsZSwgc2NyaXB0KTtcclxuXHJcblx0XHQvLyAnc3R5bGUuY3VycmVudFN0eWxlJyBpcyB1c2VkIGJ5IElFIDw9IDggYW5kICd3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZScgZm9yIGFsbCBvdGhlciBicm93c2Vyc1xyXG5cdFx0aW5mbyA9ICgnZ2V0Q29tcHV0ZWRTdHlsZScgaW4gd2luZG93KSAmJiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShzdHlsZSwgbnVsbCkgfHwgc3R5bGUuY3VycmVudFN0eWxlO1xyXG5cclxuXHRcdHN0eWxlTWVkaWEgPSB7XHJcblx0XHRcdG1hdGNoTWVkaXVtOiBmdW5jdGlvbihtZWRpYSkge1xyXG5cdFx0XHRcdHZhciB0ZXh0ID0gJ0BtZWRpYSAnICsgbWVkaWEgKyAneyAjbWF0Y2htZWRpYWpzLXRlc3QgeyB3aWR0aDogMXB4OyB9IH0nO1xyXG5cclxuXHRcdFx0XHQvLyAnc3R5bGUuc3R5bGVTaGVldCcgaXMgdXNlZCBieSBJRSA8PSA4IGFuZCAnc3R5bGUudGV4dENvbnRlbnQnIGZvciBhbGwgb3RoZXIgYnJvd3NlcnNcclxuXHRcdFx0XHRpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xyXG5cdFx0XHRcdFx0c3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gdGV4dDtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0c3R5bGUudGV4dENvbnRlbnQgPSB0ZXh0O1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gVGVzdCBpZiBtZWRpYSBxdWVyeSBpcyB0cnVlIG9yIGZhbHNlXHJcblx0XHRcdFx0cmV0dXJuIGluZm8ud2lkdGggPT09ICcxcHgnO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cdH1cclxuXHJcblx0cmV0dXJuIGZ1bmN0aW9uKG1lZGlhKSB7XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRtYXRjaGVzOiBzdHlsZU1lZGlhLm1hdGNoTWVkaXVtKG1lZGlhIHx8ICdhbGwnKSxcclxuXHRcdFx0bWVkaWE6IG1lZGlhIHx8ICdhbGwnXHJcblx0XHR9O1xyXG5cdH07XHJcbn0oKSk7XHJcbi8qISBQaWN0dXJlZmlsbCAtIFJlc3BvbnNpdmUgSW1hZ2VzIHRoYXQgd29yayB0b2RheS5cclxuKiAgQXV0aG9yOiBTY290dCBKZWhsLCBGaWxhbWVudCBHcm91cCwgMjAxMiAoIG5ldyBwcm9wb3NhbCBpbXBsZW1lbnRlZCBieSBTaGF3biBKYW5zZXBhciApXHJcbiogIExpY2Vuc2U6IE1JVC9HUEx2MlxyXG4qICBTcGVjOiBodHRwOi8vcGljdHVyZS5yZXNwb25zaXZlaW1hZ2VzLm9yZy9cclxuKi9cclxuKGZ1bmN0aW9uKCB3LCBkb2MsIGltYWdlICkge1xyXG5cdC8vIEVuYWJsZSBzdHJpY3QgbW9kZVxyXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cclxuXHRmdW5jdGlvbiBleHBvc2UocGljdHVyZWZpbGwpIHtcclxuXHRcdC8qIGV4cG9zZSBwaWN0dXJlZmlsbCAqL1xyXG5cdFx0aWYgKCB0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJvYmplY3RcIiApIHtcclxuXHRcdFx0Ly8gQ29tbW9uSlMsIGp1c3QgZXhwb3J0XHJcblx0XHRcdG1vZHVsZS5leHBvcnRzID0gcGljdHVyZWZpbGw7XHJcblx0XHR9IGVsc2UgaWYgKCB0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCApIHtcclxuXHRcdFx0Ly8gQU1EIHN1cHBvcnRcclxuXHRcdFx0ZGVmaW5lKCBcInBpY3R1cmVmaWxsXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gcGljdHVyZWZpbGw7IH0gKTtcclxuXHRcdH1cclxuXHRcdGlmICggdHlwZW9mIHcgPT09IFwib2JqZWN0XCIgKSB7XHJcblx0XHRcdC8vIElmIG5vIEFNRCBhbmQgd2UgYXJlIGluIHRoZSBicm93c2VyLCBhdHRhY2ggdG8gd2luZG93XHJcblx0XHRcdHcucGljdHVyZWZpbGwgPSBwaWN0dXJlZmlsbDtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8vIElmIHBpY3R1cmUgaXMgc3VwcG9ydGVkLCB3ZWxsLCB0aGF0J3MgYXdlc29tZS4gTGV0J3MgZ2V0IG91dHRhIGhlcmUuLi5cclxuXHRpZiAoIHcuSFRNTFBpY3R1cmVFbGVtZW50ICkge1xyXG5cdFx0ZXhwb3NlKGZ1bmN0aW9uKCkgeyB9KTtcclxuXHRcdHJldHVybjtcclxuXHR9XHJcblxyXG5cdC8vIEhUTUwgc2hpbXx2IGl0IGZvciBvbGQgSUUgKElFOSB3aWxsIHN0aWxsIG5lZWQgdGhlIEhUTUwgdmlkZW8gdGFnIHdvcmthcm91bmQpXHJcblx0ZG9jLmNyZWF0ZUVsZW1lbnQoIFwicGljdHVyZVwiICk7XHJcblxyXG5cdC8vIGxvY2FsIG9iamVjdCBmb3IgbWV0aG9kIHJlZmVyZW5jZXMgYW5kIHRlc3RpbmcgZXhwb3N1cmVcclxuXHR2YXIgcGYgPSB3LnBpY3R1cmVmaWxsIHx8IHt9O1xyXG5cclxuXHR2YXIgcmVnV0Rlc2MgPSAvXFxzK1xcKz9cXGQrKGVcXGQrKT93LztcclxuXHJcblx0Ly8gbmFtZXNwYWNlXHJcblx0cGYubnMgPSBcInBpY3R1cmVmaWxsXCI7XHJcblxyXG5cdC8vIHNyY3NldCBzdXBwb3J0IHRlc3RcclxuXHQoZnVuY3Rpb24oKSB7XHJcblx0XHRwZi5zcmNzZXRTdXBwb3J0ZWQgPSBcInNyY3NldFwiIGluIGltYWdlO1xyXG5cdFx0cGYuc2l6ZXNTdXBwb3J0ZWQgPSBcInNpemVzXCIgaW4gaW1hZ2U7XHJcblx0XHRwZi5jdXJTcmNTdXBwb3J0ZWQgPSBcImN1cnJlbnRTcmNcIiBpbiBpbWFnZTtcclxuXHR9KSgpO1xyXG5cclxuXHQvLyBqdXN0IGEgc3RyaW5nIHRyaW0gd29ya2Fyb3VuZFxyXG5cdHBmLnRyaW0gPSBmdW5jdGlvbiggc3RyICkge1xyXG5cdFx0cmV0dXJuIHN0ci50cmltID8gc3RyLnRyaW0oKSA6IHN0ci5yZXBsYWNlKCAvXlxccyt8XFxzKyQvZywgXCJcIiApO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldHMgYSBzdHJpbmcgYW5kIHJldHVybnMgdGhlIGFic29sdXRlIFVSTFxyXG5cdCAqIEBwYXJhbSBzcmNcclxuXHQgKiBAcmV0dXJucyB7U3RyaW5nfSBhYnNvbHV0ZSBVUkxcclxuXHQgKi9cclxuXHRwZi5tYWtlVXJsID0gKGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGFuY2hvciA9IGRvYy5jcmVhdGVFbGVtZW50KCBcImFcIiApO1xyXG5cdFx0cmV0dXJuIGZ1bmN0aW9uKHNyYykge1xyXG5cdFx0XHRhbmNob3IuaHJlZiA9IHNyYztcclxuXHRcdFx0cmV0dXJuIGFuY2hvci5ocmVmO1xyXG5cdFx0fTtcclxuXHR9KSgpO1xyXG5cclxuXHQvKipcclxuXHQgKiBTaG9ydGN1dCBtZXRob2QgZm9yIGh0dHBzOi8vdzNjLmdpdGh1Yi5pby93ZWJhcHBzZWMvc3BlY3MvbWl4ZWRjb250ZW50LyNyZXN0cmljdHMtbWl4ZWQtY29udGVudCAoIGZvciBlYXN5IG92ZXJyaWRpbmcgaW4gdGVzdHMgKVxyXG5cdCAqL1xyXG5cdHBmLnJlc3RyaWN0c01peGVkQ29udGVudCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHcubG9jYXRpb24ucHJvdG9jb2wgPT09IFwiaHR0cHM6XCI7XHJcblx0fTtcclxuXHQvKipcclxuXHQgKiBTaG9ydGN1dCBtZXRob2QgZm9yIG1hdGNoTWVkaWEgKCBmb3IgZWFzeSBvdmVycmlkaW5nIGluIHRlc3RzIClcclxuXHQgKi9cclxuXHJcblx0cGYubWF0Y2hlc01lZGlhID0gZnVuY3Rpb24oIG1lZGlhICkge1xyXG5cdFx0cmV0dXJuIHcubWF0Y2hNZWRpYSAmJiB3Lm1hdGNoTWVkaWEoIG1lZGlhICkubWF0Y2hlcztcclxuXHR9O1xyXG5cclxuXHQvLyBTaG9ydGN1dCBtZXRob2QgZm9yIGBkZXZpY2VQaXhlbFJhdGlvYCAoIGZvciBlYXN5IG92ZXJyaWRpbmcgaW4gdGVzdHMgKVxyXG5cdHBmLmdldERwciA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuICggdy5kZXZpY2VQaXhlbFJhdGlvIHx8IDEgKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBHZXQgd2lkdGggaW4gY3NzIHBpeGVsIHZhbHVlIGZyb20gYSBcImxlbmd0aFwiIHZhbHVlXHJcblx0ICogaHR0cDovL2Rldi53My5vcmcvY3Nzd2cvY3NzLXZhbHVlcy0zLyNsZW5ndGgtdmFsdWVcclxuXHQgKi9cclxuXHRwZi5nZXRXaWR0aEZyb21MZW5ndGggPSBmdW5jdGlvbiggbGVuZ3RoICkge1xyXG5cdFx0dmFyIGNzc1ZhbHVlO1xyXG5cdFx0Ly8gSWYgYSBsZW5ndGggaXMgc3BlY2lmaWVkIGFuZCBkb2VzbuKAmXQgY29udGFpbiBhIHBlcmNlbnRhZ2UsIGFuZCBpdCBpcyBncmVhdGVyIHRoYW4gMCBvciB1c2luZyBgY2FsY2AsIHVzZSBpdC4gRWxzZSwgYWJvcnQuXHJcbiAgICAgICAgaWYgKCAhKGxlbmd0aCAmJiBsZW5ndGguaW5kZXhPZiggXCIlXCIgKSA+IC0xID09PSBmYWxzZSAmJiAoIHBhcnNlRmxvYXQoIGxlbmd0aCApID4gMCB8fCBsZW5ndGguaW5kZXhPZiggXCJjYWxjKFwiICkgPiAtMSApKSApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcblx0XHQvKipcclxuXHRcdCAqIElmIGxlbmd0aCBpcyBzcGVjaWZpZWQgaW4gIGB2d2AgdW5pdHMsIHVzZSBgJWAgaW5zdGVhZCBzaW5jZSB0aGUgZGl2IHdl4oCZcmUgbWVhc3VyaW5nXHJcblx0XHQgKiBpcyBpbmplY3RlZCBhdCB0aGUgdG9wIG9mIHRoZSBkb2N1bWVudC5cclxuXHRcdCAqXHJcblx0XHQgKiBUT0RPOiBtYXliZSB3ZSBzaG91bGQgcHV0IHRoaXMgYmVoaW5kIGEgZmVhdHVyZSB0ZXN0IGZvciBgdndgPyBUaGUgcmlzayBvZiBkb2luZyB0aGlzIGlzIHBvc3NpYmxlIGJyb3dzZXIgaW5jb25zaXN0YW5jaWVzIHdpdGggdncgdnMgJVxyXG5cdFx0ICovXHJcblx0XHRsZW5ndGggPSBsZW5ndGgucmVwbGFjZSggXCJ2d1wiLCBcIiVcIiApO1xyXG5cclxuXHRcdC8vIENyZWF0ZSBhIGNhY2hlZCBlbGVtZW50IGZvciBnZXR0aW5nIGxlbmd0aCB2YWx1ZSB3aWR0aHNcclxuXHRcdGlmICggIXBmLmxlbmd0aEVsICkge1xyXG5cdFx0XHRwZi5sZW5ndGhFbCA9IGRvYy5jcmVhdGVFbGVtZW50KCBcImRpdlwiICk7XHJcblxyXG5cdFx0XHQvLyBQb3NpdGlvbmluZyBzdHlsZXMgaGVscCBwcmV2ZW50IHBhZGRpbmcvbWFyZ2luL3dpZHRoIG9uIGBodG1sYCBvciBgYm9keWAgZnJvbSB0aHJvd2luZyBjYWxjdWxhdGlvbnMgb2ZmLlxyXG5cdFx0XHRwZi5sZW5ndGhFbC5zdHlsZS5jc3NUZXh0ID0gXCJib3JkZXI6MDtkaXNwbGF5OmJsb2NrO2ZvbnQtc2l6ZToxZW07bGVmdDowO21hcmdpbjowO3BhZGRpbmc6MDtwb3NpdGlvbjphYnNvbHV0ZTt2aXNpYmlsaXR5OmhpZGRlblwiO1xyXG5cclxuXHRcdFx0Ly8gQWRkIGEgY2xhc3MsIHNvIHRoYXQgZXZlcnlvbmUga25vd3Mgd2hlcmUgdGhpcyBlbGVtZW50IGNvbWVzIGZyb21cclxuXHRcdFx0cGYubGVuZ3RoRWwuY2xhc3NOYW1lID0gXCJoZWxwZXItZnJvbS1waWN0dXJlZmlsbC1qc1wiO1xyXG5cdFx0fVxyXG5cclxuXHRcdHBmLmxlbmd0aEVsLnN0eWxlLndpZHRoID0gXCIwcHhcIjtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuXHRcdCAgICBwZi5sZW5ndGhFbC5zdHlsZS53aWR0aCA9IGxlbmd0aDtcclxuICAgICAgICB9IGNhdGNoICggZSApIHt9XHJcblxyXG5cdFx0ZG9jLmJvZHkuYXBwZW5kQ2hpbGQocGYubGVuZ3RoRWwpO1xyXG5cclxuXHRcdGNzc1ZhbHVlID0gcGYubGVuZ3RoRWwub2Zmc2V0V2lkdGg7XHJcblxyXG5cdFx0aWYgKCBjc3NWYWx1ZSA8PSAwICkge1xyXG5cdFx0XHRjc3NWYWx1ZSA9IGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdGRvYy5ib2R5LnJlbW92ZUNoaWxkKCBwZi5sZW5ndGhFbCApO1xyXG5cclxuXHRcdHJldHVybiBjc3NWYWx1ZTtcclxuXHR9O1xyXG5cclxuICAgIHBmLmRldGVjdFR5cGVTdXBwb3J0ID0gZnVuY3Rpb24oIHR5cGUsIHR5cGVVcmkgKSB7XHJcbiAgICAgICAgLy8gYmFzZWQgb24gTW9kZXJuaXpyJ3MgbG9zc2xlc3MgaW1nLXdlYnAgdGVzdFxyXG4gICAgICAgIC8vIG5vdGU6IGFzeW5jaHJvbm91c1xyXG4gICAgICAgIHZhciBpbWFnZSA9IG5ldyB3LkltYWdlKCk7XHJcbiAgICAgICAgaW1hZ2Uub25lcnJvciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBwZi50eXBlc1sgdHlwZSBdID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHBpY3R1cmVmaWxsKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBpbWFnZS5vbmxvYWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcGYudHlwZXNbIHR5cGUgXSA9IGltYWdlLndpZHRoID09PSAxO1xyXG4gICAgICAgICAgICBwaWN0dXJlZmlsbCgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgaW1hZ2Uuc3JjID0gdHlwZVVyaTtcclxuXHJcbiAgICAgICAgcmV0dXJuIFwicGVuZGluZ1wiO1xyXG4gICAgfTtcclxuXHQvLyBjb250YWluZXIgb2Ygc3VwcG9ydGVkIG1pbWUgdHlwZXMgdGhhdCBvbmUgbWlnaHQgbmVlZCB0byBxdWFsaWZ5IGJlZm9yZSB1c2luZ1xyXG5cdHBmLnR5cGVzID0gcGYudHlwZXMgfHwge307XHJcblxyXG5cdHBmLmluaXRUeXBlRGV0ZWN0cyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vIEFkZCBzdXBwb3J0IGZvciBzdGFuZGFyZCBtaW1lIHR5cGVzXHJcbiAgICAgICAgcGYudHlwZXNbIFwiaW1hZ2UvanBlZ1wiIF0gPSB0cnVlO1xyXG4gICAgICAgIHBmLnR5cGVzWyBcImltYWdlL2dpZlwiIF0gPSB0cnVlO1xyXG4gICAgICAgIHBmLnR5cGVzWyBcImltYWdlL3BuZ1wiIF0gPSB0cnVlO1xyXG4gICAgICAgIHBmLnR5cGVzWyBcImltYWdlL3N2Zyt4bWxcIiBdID0gZG9jLmltcGxlbWVudGF0aW9uLmhhc0ZlYXR1cmUoXCJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0ltYWdlXCIsIFwiMS4xXCIpO1xyXG4gICAgICAgIHBmLnR5cGVzWyBcImltYWdlL3dlYnBcIiBdID0gcGYuZGV0ZWN0VHlwZVN1cHBvcnQoXCJpbWFnZS93ZWJwXCIsIFwiZGF0YTppbWFnZS93ZWJwO2Jhc2U2NCxVa2xHUmg0QUFBQlhSVUpRVmxBNFRCRUFBQUF2QUFBQUFBZlEvLzczdi8rQmlPaC9BQUE9XCIpO1xyXG4gICAgfTtcclxuXHJcblx0cGYudmVyaWZ5VHlwZVN1cHBvcnQgPSBmdW5jdGlvbiggc291cmNlICkge1xyXG5cdFx0dmFyIHR5cGUgPSBzb3VyY2UuZ2V0QXR0cmlidXRlKCBcInR5cGVcIiApO1xyXG5cdFx0Ly8gaWYgdHlwZSBhdHRyaWJ1dGUgZXhpc3RzLCByZXR1cm4gdGVzdCByZXN1bHQsIG90aGVyd2lzZSByZXR1cm4gdHJ1ZVxyXG5cdFx0aWYgKCB0eXBlID09PSBudWxsIHx8IHR5cGUgPT09IFwiXCIgKSB7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR2YXIgcGZUeXBlID0gcGYudHlwZXNbIHR5cGUgXTtcclxuXHRcdFx0Ly8gaWYgdGhlIHR5cGUgdGVzdCBpcyBhIGZ1bmN0aW9uLCBydW4gaXQgYW5kIHJldHVybiBcInBlbmRpbmdcIiBzdGF0dXMuIFRoZSBmdW5jdGlvbiB3aWxsIHJlcnVuIHBpY3R1cmVmaWxsIG9uIHBlbmRpbmcgZWxlbWVudHMgb25jZSBmaW5pc2hlZC5cclxuXHRcdFx0aWYgKCB0eXBlb2YgcGZUeXBlID09PSBcInN0cmluZ1wiICYmIHBmVHlwZSAhPT0gXCJwZW5kaW5nXCIpIHtcclxuXHRcdFx0XHRwZi50eXBlc1sgdHlwZSBdID0gcGYuZGV0ZWN0VHlwZVN1cHBvcnQoIHR5cGUsIHBmVHlwZSApO1xyXG5cdFx0XHRcdHJldHVybiBcInBlbmRpbmdcIjtcclxuXHRcdFx0fSBlbHNlIGlmICggdHlwZW9mIHBmVHlwZSA9PT0gXCJmdW5jdGlvblwiICkge1xyXG5cdFx0XHRcdHBmVHlwZSgpO1xyXG5cdFx0XHRcdHJldHVybiBcInBlbmRpbmdcIjtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRyZXR1cm4gcGZUeXBlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0Ly8gUGFyc2VzIGFuIGluZGl2aWR1YWwgYHNpemVgIGFuZCByZXR1cm5zIHRoZSBsZW5ndGgsIGFuZCBvcHRpb25hbCBtZWRpYSBxdWVyeVxyXG5cdHBmLnBhcnNlU2l6ZSA9IGZ1bmN0aW9uKCBzb3VyY2VTaXplU3RyICkge1xyXG5cdFx0dmFyIG1hdGNoID0gLyhcXChbXildK1xcKSk/XFxzKiguKykvZy5leGVjKCBzb3VyY2VTaXplU3RyICk7XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRtZWRpYTogbWF0Y2ggJiYgbWF0Y2hbMV0sXHJcblx0XHRcdGxlbmd0aDogbWF0Y2ggJiYgbWF0Y2hbMl1cclxuXHRcdH07XHJcblx0fTtcclxuXHJcblx0Ly8gVGFrZXMgYSBzdHJpbmcgb2Ygc2l6ZXMgYW5kIHJldHVybnMgdGhlIHdpZHRoIGluIHBpeGVscyBhcyBhIG51bWJlclxyXG5cdHBmLmZpbmRXaWR0aEZyb21Tb3VyY2VTaXplID0gZnVuY3Rpb24oIHNvdXJjZVNpemVMaXN0U3RyICkge1xyXG5cdFx0Ly8gU3BsaXQgdXAgc291cmNlIHNpemUgbGlzdCwgaWUgKCBtYXgtd2lkdGg6IDMwZW0gKSAxMDAlLCAoIG1heC13aWR0aDogNTBlbSApIDUwJSwgMzMlXHJcblx0XHQvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICBvciAobWluLXdpZHRoOjMwZW0pIGNhbGMoMzAlIC0gMTVweClcclxuXHRcdHZhciBzb3VyY2VTaXplTGlzdCA9IHBmLnRyaW0oIHNvdXJjZVNpemVMaXN0U3RyICkuc3BsaXQoIC9cXHMqLFxccyovICksXHJcblx0XHRcdHdpbm5pbmdMZW5ndGg7XHJcblxyXG5cdFx0Zm9yICggdmFyIGkgPSAwLCBsZW4gPSBzb3VyY2VTaXplTGlzdC5sZW5ndGg7IGkgPCBsZW47IGkrKyApIHtcclxuXHRcdFx0Ly8gTWF0Y2ggPG1lZGlhLWNvbmRpdGlvbj4/IGxlbmd0aCwgaWUgKCBtaW4td2lkdGg6IDUwZW0gKSAxMDAlXHJcblx0XHRcdHZhciBzb3VyY2VTaXplID0gc291cmNlU2l6ZUxpc3RbIGkgXSxcclxuXHRcdFx0XHQvLyBTcGxpdCBcIiggbWluLXdpZHRoOiA1MGVtICkgMTAwJVwiIGludG8gc2VwYXJhdGUgc3RyaW5nc1xyXG5cdFx0XHRcdHBhcnNlZFNpemUgPSBwZi5wYXJzZVNpemUoIHNvdXJjZVNpemUgKSxcclxuXHRcdFx0XHRsZW5ndGggPSBwYXJzZWRTaXplLmxlbmd0aCxcclxuXHRcdFx0XHRtZWRpYSA9IHBhcnNlZFNpemUubWVkaWE7XHJcblxyXG5cdFx0XHRpZiAoICFsZW5ndGggKSB7XHJcblx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdH1cclxuXHRcdFx0Ly8gaWYgdGhlcmUgaXMgbm8gbWVkaWEgcXVlcnkgb3IgaXQgbWF0Y2hlcywgY2hvb3NlIHRoaXMgYXMgb3VyIHdpbm5pbmcgbGVuZ3RoXHJcblx0XHRcdGlmICggKCFtZWRpYSB8fCBwZi5tYXRjaGVzTWVkaWEoIG1lZGlhICkpICYmXHJcblx0XHRcdFx0Ly8gcGFzcyB0aGUgbGVuZ3RoIHRvIGEgbWV0aG9kIHRoYXQgY2FuIHByb3Blcmx5IGRldGVybWluZSBsZW5ndGhcclxuXHRcdFx0XHQvLyBpbiBwaXhlbHMgYmFzZWQgb24gdGhlc2UgZm9ybWF0czogaHR0cDovL2Rldi53My5vcmcvY3Nzd2cvY3NzLXZhbHVlcy0zLyNsZW5ndGgtdmFsdWVcclxuXHRcdFx0XHQod2lubmluZ0xlbmd0aCA9IHBmLmdldFdpZHRoRnJvbUxlbmd0aCggbGVuZ3RoICkpICkge1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly9pZiB3ZSBoYXZlIG5vIHdpbm5pbmdMZW5ndGggZmFsbGJhY2sgdG8gMTAwdndcclxuXHRcdHJldHVybiB3aW5uaW5nTGVuZ3RoIHx8IE1hdGgubWF4KHcuaW5uZXJXaWR0aCB8fCAwLCBkb2MuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoKTtcclxuXHR9O1xyXG5cclxuXHRwZi5wYXJzZVNyY3NldCA9IGZ1bmN0aW9uKCBzcmNzZXQgKSB7XHJcblx0XHQvKipcclxuXHRcdCAqIEEgbG90IG9mIHRoaXMgd2FzIHB1bGxlZCBmcm9tIEJvcmlzIFNtdXPigJkgcGFyc2VyIGZvciB0aGUgbm93LWRlZnVuY3QgV0hBVFdHIGBzcmNzZXRgXHJcblx0XHQgKiBodHRwczovL2dpdGh1Yi5jb20vYm9yaXNtdXMvc3Jjc2V0LXBvbHlmaWxsL2Jsb2IvbWFzdGVyL2pzL3NyY3NldC1pbmZvLmpzXHJcblx0XHQgKlxyXG5cdFx0ICogMS4gTGV0IGlucHV0IChgc3Jjc2V0YCkgYmUgdGhlIHZhbHVlIHBhc3NlZCB0byB0aGlzIGFsZ29yaXRobS5cclxuXHRcdCAqIDIuIExldCBwb3NpdGlvbiBiZSBhIHBvaW50ZXIgaW50byBpbnB1dCwgaW5pdGlhbGx5IHBvaW50aW5nIGF0IHRoZSBzdGFydCBvZiB0aGUgc3RyaW5nLlxyXG5cdFx0ICogMy4gTGV0IHJhdyBjYW5kaWRhdGVzIGJlIGFuIGluaXRpYWxseSBlbXB0eSBvcmRlcmVkIGxpc3Qgb2YgVVJMcyB3aXRoIGFzc29jaWF0ZWRcclxuXHRcdCAqICAgIHVucGFyc2VkIGRlc2NyaXB0b3JzLiBUaGUgb3JkZXIgb2YgZW50cmllcyBpbiB0aGUgbGlzdCBpcyB0aGUgb3JkZXIgaW4gd2hpY2ggZW50cmllc1xyXG5cdFx0ICogICAgYXJlIGFkZGVkIHRvIHRoZSBsaXN0LlxyXG5cdFx0ICovXHJcblx0XHR2YXIgY2FuZGlkYXRlcyA9IFtdO1xyXG5cclxuXHRcdHdoaWxlICggc3Jjc2V0ICE9PSBcIlwiICkge1xyXG5cdFx0XHRzcmNzZXQgPSBzcmNzZXQucmVwbGFjZSggL15cXHMrL2csIFwiXCIgKTtcclxuXHJcblx0XHRcdC8vIDUuIENvbGxlY3QgYSBzZXF1ZW5jZSBvZiBjaGFyYWN0ZXJzIHRoYXQgYXJlIG5vdCBzcGFjZSBjaGFyYWN0ZXJzLCBhbmQgbGV0IHRoYXQgYmUgdXJsLlxyXG5cdFx0XHR2YXIgcG9zID0gc3Jjc2V0LnNlYXJjaCgvXFxzL2cpLFxyXG5cdFx0XHRcdHVybCwgZGVzY3JpcHRvciA9IG51bGw7XHJcblxyXG5cdFx0XHRpZiAoIHBvcyAhPT0gLTEgKSB7XHJcblx0XHRcdFx0dXJsID0gc3Jjc2V0LnNsaWNlKCAwLCBwb3MgKTtcclxuXHJcblx0XHRcdFx0dmFyIGxhc3QgPSB1cmwuc2xpY2UoLTEpO1xyXG5cclxuXHRcdFx0XHQvLyA2LiBJZiB1cmwgZW5kcyB3aXRoIGEgVSswMDJDIENPTU1BIGNoYXJhY3RlciAoLCksIHJlbW92ZSB0aGF0IGNoYXJhY3RlciBmcm9tIHVybFxyXG5cdFx0XHRcdC8vIGFuZCBsZXQgZGVzY3JpcHRvcnMgYmUgdGhlIGVtcHR5IHN0cmluZy4gT3RoZXJ3aXNlLCBmb2xsb3cgdGhlc2Ugc3Vic3RlcHNcclxuXHRcdFx0XHQvLyA2LjEuIElmIHVybCBpcyBlbXB0eSwgdGhlbiBqdW1wIHRvIHRoZSBzdGVwIGxhYmVsZWQgZGVzY3JpcHRvciBwYXJzZXIuXHJcblxyXG5cdFx0XHRcdGlmICggbGFzdCA9PT0gXCIsXCIgfHwgdXJsID09PSBcIlwiICkge1xyXG5cdFx0XHRcdFx0dXJsID0gdXJsLnJlcGxhY2UoIC8sKyQvLCBcIlwiICk7XHJcblx0XHRcdFx0XHRkZXNjcmlwdG9yID0gXCJcIjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0c3Jjc2V0ID0gc3Jjc2V0LnNsaWNlKCBwb3MgKyAxICk7XHJcblxyXG5cdFx0XHRcdC8vIDYuMi4gQ29sbGVjdCBhIHNlcXVlbmNlIG9mIGNoYXJhY3RlcnMgdGhhdCBhcmUgbm90IFUrMDAyQyBDT01NQSBjaGFyYWN0ZXJzICgsKSwgYW5kXHJcblx0XHRcdFx0Ly8gbGV0IHRoYXQgYmUgZGVzY3JpcHRvcnMuXHJcblx0XHRcdFx0aWYgKCBkZXNjcmlwdG9yID09PSBudWxsICkge1xyXG5cdFx0XHRcdFx0dmFyIGRlc2Nwb3MgPSBzcmNzZXQuaW5kZXhPZiggXCIsXCIgKTtcclxuXHRcdFx0XHRcdGlmICggZGVzY3BvcyAhPT0gLTEgKSB7XHJcblx0XHRcdFx0XHRcdGRlc2NyaXB0b3IgPSBzcmNzZXQuc2xpY2UoIDAsIGRlc2Nwb3MgKTtcclxuXHRcdFx0XHRcdFx0c3Jjc2V0ID0gc3Jjc2V0LnNsaWNlKCBkZXNjcG9zICsgMSApO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0ZGVzY3JpcHRvciA9IHNyY3NldDtcclxuXHRcdFx0XHRcdFx0c3Jjc2V0ID0gXCJcIjtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dXJsID0gc3Jjc2V0O1xyXG5cdFx0XHRcdHNyY3NldCA9IFwiXCI7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIDcuIEFkZCB1cmwgdG8gcmF3IGNhbmRpZGF0ZXMsIGFzc29jaWF0ZWQgd2l0aCBkZXNjcmlwdG9ycy5cclxuXHRcdFx0aWYgKCB1cmwgfHwgZGVzY3JpcHRvciApIHtcclxuXHRcdFx0XHRjYW5kaWRhdGVzLnB1c2goe1xyXG5cdFx0XHRcdFx0dXJsOiB1cmwsXHJcblx0XHRcdFx0XHRkZXNjcmlwdG9yOiBkZXNjcmlwdG9yXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHJldHVybiBjYW5kaWRhdGVzO1xyXG5cdH07XHJcblxyXG5cdHBmLnBhcnNlRGVzY3JpcHRvciA9IGZ1bmN0aW9uKCBkZXNjcmlwdG9yLCBzaXplc2F0dHIgKSB7XHJcblx0XHQvLyAxMS4gRGVzY3JpcHRvciBwYXJzZXI6IExldCBjYW5kaWRhdGVzIGJlIGFuIGluaXRpYWxseSBlbXB0eSBzb3VyY2Ugc2V0LiBUaGUgb3JkZXIgb2YgZW50cmllcyBpbiB0aGUgbGlzdFxyXG5cdFx0Ly8gaXMgdGhlIG9yZGVyIGluIHdoaWNoIGVudHJpZXMgYXJlIGFkZGVkIHRvIHRoZSBsaXN0LlxyXG5cdFx0dmFyIHNpemVzID0gc2l6ZXNhdHRyIHx8IFwiMTAwdndcIixcclxuXHRcdFx0c2l6ZURlc2NyaXB0b3IgPSBkZXNjcmlwdG9yICYmIGRlc2NyaXB0b3IucmVwbGFjZSggLyheXFxzK3xcXHMrJCkvZywgXCJcIiApLFxyXG5cdFx0XHR3aWR0aEluQ3NzUGl4ZWxzID0gcGYuZmluZFdpZHRoRnJvbVNvdXJjZVNpemUoIHNpemVzICksXHJcblx0XHRcdHJlc0NhbmRpZGF0ZTtcclxuXHJcblx0XHRcdGlmICggc2l6ZURlc2NyaXB0b3IgKSB7XHJcblx0XHRcdFx0dmFyIHNwbGl0RGVzY3JpcHRvciA9IHNpemVEZXNjcmlwdG9yLnNwbGl0KFwiIFwiKTtcclxuXHJcblx0XHRcdFx0Zm9yICh2YXIgaSA9IHNwbGl0RGVzY3JpcHRvci5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG5cdFx0XHRcdFx0dmFyIGN1cnIgPSBzcGxpdERlc2NyaXB0b3JbIGkgXSxcclxuXHRcdFx0XHRcdFx0bGFzdGNoYXIgPSBjdXJyICYmIGN1cnIuc2xpY2UoIGN1cnIubGVuZ3RoIC0gMSApO1xyXG5cclxuXHRcdFx0XHRcdGlmICggKCBsYXN0Y2hhciA9PT0gXCJoXCIgfHwgbGFzdGNoYXIgPT09IFwid1wiICkgJiYgIXBmLnNpemVzU3VwcG9ydGVkICkge1xyXG5cdFx0XHRcdFx0XHRyZXNDYW5kaWRhdGUgPSBwYXJzZUZsb2F0KCAoIHBhcnNlSW50KCBjdXJyLCAxMCApIC8gd2lkdGhJbkNzc1BpeGVscyApICk7XHJcblx0XHRcdFx0XHR9IGVsc2UgaWYgKCBsYXN0Y2hhciA9PT0gXCJ4XCIgKSB7XHJcblx0XHRcdFx0XHRcdHZhciByZXMgPSBjdXJyICYmIHBhcnNlRmxvYXQoIGN1cnIsIDEwICk7XHJcblx0XHRcdFx0XHRcdHJlc0NhbmRpZGF0ZSA9IHJlcyAmJiAhaXNOYU4oIHJlcyApID8gcmVzIDogMTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdHJldHVybiByZXNDYW5kaWRhdGUgfHwgMTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBUYWtlcyBhIHNyY3NldCBpbiB0aGUgZm9ybSBvZiB1cmwvXHJcblx0ICogZXguIFwiaW1hZ2VzL3BpYy1tZWRpdW0ucG5nIDF4LCBpbWFnZXMvcGljLW1lZGl1bS0yeC5wbmcgMnhcIiBvclxyXG5cdCAqICAgICBcImltYWdlcy9waWMtbWVkaXVtLnBuZyA0MDB3LCBpbWFnZXMvcGljLW1lZGl1bS0yeC5wbmcgODAwd1wiIG9yXHJcblx0ICogICAgIFwiaW1hZ2VzL3BpYy1zbWFsbC5wbmdcIlxyXG5cdCAqIEdldCBhbiBhcnJheSBvZiBpbWFnZSBjYW5kaWRhdGVzIGluIHRoZSBmb3JtIG9mXHJcblx0ICogICAgICB7dXJsOiBcIi9mb28vYmFyLnBuZ1wiLCByZXNvbHV0aW9uOiAxfVxyXG5cdCAqIHdoZXJlIHJlc29sdXRpb24gaXMgaHR0cDovL2Rldi53My5vcmcvY3Nzd2cvY3NzLXZhbHVlcy0zLyNyZXNvbHV0aW9uLXZhbHVlXHJcblx0ICogSWYgc2l6ZXMgaXMgc3BlY2lmaWVkLCByZXNvbHV0aW9uIGlzIGNhbGN1bGF0ZWRcclxuXHQgKi9cclxuXHRwZi5nZXRDYW5kaWRhdGVzRnJvbVNvdXJjZVNldCA9IGZ1bmN0aW9uKCBzcmNzZXQsIHNpemVzICkge1xyXG5cdFx0dmFyIGNhbmRpZGF0ZXMgPSBwZi5wYXJzZVNyY3NldCggc3Jjc2V0ICksXHJcblx0XHRcdGZvcm1hdHRlZENhbmRpZGF0ZXMgPSBbXTtcclxuXHJcblx0XHRmb3IgKCB2YXIgaSA9IDAsIGxlbiA9IGNhbmRpZGF0ZXMubGVuZ3RoOyBpIDwgbGVuOyBpKysgKSB7XHJcblx0XHRcdHZhciBjYW5kaWRhdGUgPSBjYW5kaWRhdGVzWyBpIF07XHJcblxyXG5cdFx0XHRmb3JtYXR0ZWRDYW5kaWRhdGVzLnB1c2goe1xyXG5cdFx0XHRcdHVybDogY2FuZGlkYXRlLnVybCxcclxuXHRcdFx0XHRyZXNvbHV0aW9uOiBwZi5wYXJzZURlc2NyaXB0b3IoIGNhbmRpZGF0ZS5kZXNjcmlwdG9yLCBzaXplcyApXHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGZvcm1hdHRlZENhbmRpZGF0ZXM7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogaWYgaXQncyBhbiBpbWcgZWxlbWVudCBhbmQgaXQgaGFzIGEgc3Jjc2V0IHByb3BlcnR5LFxyXG5cdCAqIHdlIG5lZWQgdG8gcmVtb3ZlIHRoZSBhdHRyaWJ1dGUgc28gd2UgY2FuIG1hbmlwdWxhdGUgc3JjXHJcblx0ICogKHRoZSBwcm9wZXJ0eSdzIGV4aXN0ZW5jZSBpbmZlcnMgbmF0aXZlIHNyY3NldCBzdXBwb3J0LCBhbmQgYSBzcmNzZXQtc3VwcG9ydGluZyBicm93c2VyIHdpbGwgcHJpb3JpdGl6ZSBzcmNzZXQncyB2YWx1ZSBvdmVyIG91ciB3aW5uaW5nIHBpY3R1cmUgY2FuZGlkYXRlKVxyXG5cdCAqIHRoaXMgbW92ZXMgc3Jjc2V0J3MgdmFsdWUgdG8gbWVtb3J5IGZvciBsYXRlciB1c2UgYW5kIHJlbW92ZXMgdGhlIGF0dHJcclxuXHQgKi9cclxuXHRwZi5kb2RnZVNyY3NldCA9IGZ1bmN0aW9uKCBpbWcgKSB7XHJcblx0XHRpZiAoIGltZy5zcmNzZXQgKSB7XHJcblx0XHRcdGltZ1sgcGYubnMgXS5zcmNzZXQgPSBpbWcuc3Jjc2V0O1xyXG5cdFx0XHRpbWcuc3Jjc2V0ID0gXCJcIjtcclxuXHRcdFx0aW1nLnNldEF0dHJpYnV0ZSggXCJkYXRhLXBmc3Jjc2V0XCIsIGltZ1sgcGYubnMgXS5zcmNzZXQgKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQvLyBBY2NlcHQgYSBzb3VyY2Ugb3IgaW1nIGVsZW1lbnQgYW5kIHByb2Nlc3MgaXRzIHNyY3NldCBhbmQgc2l6ZXMgYXR0cnNcclxuXHRwZi5wcm9jZXNzU291cmNlU2V0ID0gZnVuY3Rpb24oIGVsICkge1xyXG5cdFx0dmFyIHNyY3NldCA9IGVsLmdldEF0dHJpYnV0ZSggXCJzcmNzZXRcIiApLFxyXG5cdFx0XHRzaXplcyA9IGVsLmdldEF0dHJpYnV0ZSggXCJzaXplc1wiICksXHJcblx0XHRcdGNhbmRpZGF0ZXMgPSBbXTtcclxuXHJcblx0XHQvLyBpZiBpdCdzIGFuIGltZyBlbGVtZW50LCB1c2UgdGhlIGNhY2hlZCBzcmNzZXQgcHJvcGVydHkgKGRlZmluZWQgb3Igbm90KVxyXG5cdFx0aWYgKCBlbC5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpID09PSBcIklNR1wiICYmIGVsWyBwZi5ucyBdICYmIGVsWyBwZi5ucyBdLnNyY3NldCApIHtcclxuXHRcdFx0c3Jjc2V0ID0gZWxbIHBmLm5zIF0uc3Jjc2V0O1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggc3Jjc2V0ICkge1xyXG5cdFx0XHRjYW5kaWRhdGVzID0gcGYuZ2V0Q2FuZGlkYXRlc0Zyb21Tb3VyY2VTZXQoIHNyY3NldCwgc2l6ZXMgKTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBjYW5kaWRhdGVzO1xyXG5cdH07XHJcblxyXG5cdHBmLmJhY2tmYWNlVmlzaWJpbGl0eUZpeCA9IGZ1bmN0aW9uKCBwaWNJbWcgKSB7XHJcblx0XHQvLyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9zY290dGplaGwvcGljdHVyZWZpbGwvaXNzdWVzLzMzMlxyXG5cdFx0dmFyIHN0eWxlID0gcGljSW1nLnN0eWxlIHx8IHt9LFxyXG5cdFx0XHRXZWJraXRCYWNrZmFjZVZpc2liaWxpdHkgPSBcIndlYmtpdEJhY2tmYWNlVmlzaWJpbGl0eVwiIGluIHN0eWxlLFxyXG5cdFx0XHRjdXJyZW50Wm9vbSA9IHN0eWxlLnpvb207XHJcblxyXG5cdFx0aWYgKFdlYmtpdEJhY2tmYWNlVmlzaWJpbGl0eSkge1xyXG5cdFx0XHRzdHlsZS56b29tID0gXCIuOTk5XCI7XHJcblxyXG5cdFx0XHRXZWJraXRCYWNrZmFjZVZpc2liaWxpdHkgPSBwaWNJbWcub2Zmc2V0V2lkdGg7XHJcblxyXG5cdFx0XHRzdHlsZS56b29tID0gY3VycmVudFpvb207XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0cGYuc2V0SW50cmluc2ljU2l6ZSA9IChmdW5jdGlvbigpIHtcclxuXHRcdHZhciB1cmxDYWNoZSA9IHt9O1xyXG5cdFx0dmFyIHNldFNpemUgPSBmdW5jdGlvbiggcGljSW1nLCB3aWR0aCwgcmVzICkge1xyXG4gICAgICAgICAgICBpZiAoIHdpZHRoICkge1xyXG5cdFx0XHQgICAgcGljSW1nLnNldEF0dHJpYnV0ZSggXCJ3aWR0aFwiLCBwYXJzZUludCh3aWR0aCAvIHJlcywgMTApICk7XHJcbiAgICAgICAgICAgIH1cclxuXHRcdH07XHJcblx0XHRyZXR1cm4gZnVuY3Rpb24oIHBpY0ltZywgYmVzdENhbmRpZGF0ZSApIHtcclxuXHRcdFx0dmFyIGltZztcclxuXHRcdFx0aWYgKCAhcGljSW1nWyBwZi5ucyBdIHx8IHcucGZTdG9wSW50cmluc2ljU2l6ZSApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCBwaWNJbWdbIHBmLm5zIF0uZGltcyA9PT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdHBpY0ltZ1sgcGYubnNdLmRpbXMgPSBwaWNJbWcuZ2V0QXR0cmlidXRlKFwid2lkdGhcIikgfHwgcGljSW1nLmdldEF0dHJpYnV0ZShcImhlaWdodFwiKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIHBpY0ltZ1sgcGYubnNdLmRpbXMgKSB7IHJldHVybjsgfVxyXG5cclxuXHRcdFx0aWYgKCBiZXN0Q2FuZGlkYXRlLnVybCBpbiB1cmxDYWNoZSApIHtcclxuXHRcdFx0XHRzZXRTaXplKCBwaWNJbWcsIHVybENhY2hlW2Jlc3RDYW5kaWRhdGUudXJsXSwgYmVzdENhbmRpZGF0ZS5yZXNvbHV0aW9uICk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0aW1nID0gZG9jLmNyZWF0ZUVsZW1lbnQoIFwiaW1nXCIgKTtcclxuXHRcdFx0XHRpbWcub25sb2FkID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHR1cmxDYWNoZVtiZXN0Q2FuZGlkYXRlLnVybF0gPSBpbWcud2lkdGg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vSUUgMTAvMTEgZG9uJ3QgY2FsY3VsYXRlIHdpZHRoIGZvciBzdmcgb3V0c2lkZSBkb2N1bWVudFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggIXVybENhY2hlW2Jlc3RDYW5kaWRhdGUudXJsXSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5ib2R5LmFwcGVuZENoaWxkKCBpbWcgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybENhY2hlW2Jlc3RDYW5kaWRhdGUudXJsXSA9IGltZy53aWR0aCB8fCBpbWcub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuYm9keS5yZW1vdmVDaGlsZCggaW1nICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2goZSl7fVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcblx0XHRcdFx0XHRpZiAoIHBpY0ltZy5zcmMgPT09IGJlc3RDYW5kaWRhdGUudXJsICkge1xyXG5cdFx0XHRcdFx0XHRzZXRTaXplKCBwaWNJbWcsIHVybENhY2hlW2Jlc3RDYW5kaWRhdGUudXJsXSwgYmVzdENhbmRpZGF0ZS5yZXNvbHV0aW9uICk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRwaWNJbWcgPSBudWxsO1xyXG5cdFx0XHRcdFx0aW1nLm9ubG9hZCA9IG51bGw7XHJcblx0XHRcdFx0XHRpbWcgPSBudWxsO1xyXG5cdFx0XHRcdH07XHJcblx0XHRcdFx0aW1nLnNyYyA9IGJlc3RDYW5kaWRhdGUudXJsO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cdH0pKCk7XHJcblxyXG5cdHBmLmFwcGx5QmVzdENhbmRpZGF0ZSA9IGZ1bmN0aW9uKCBjYW5kaWRhdGVzLCBwaWNJbWcgKSB7XHJcblx0XHR2YXIgY2FuZGlkYXRlLFxyXG5cdFx0XHRsZW5ndGgsXHJcblx0XHRcdGJlc3RDYW5kaWRhdGU7XHJcblxyXG5cdFx0Y2FuZGlkYXRlcy5zb3J0KCBwZi5hc2NlbmRpbmdTb3J0ICk7XHJcblxyXG5cdFx0bGVuZ3RoID0gY2FuZGlkYXRlcy5sZW5ndGg7XHJcblx0XHRiZXN0Q2FuZGlkYXRlID0gY2FuZGlkYXRlc1sgbGVuZ3RoIC0gMSBdO1xyXG5cclxuXHRcdGZvciAoIHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrICkge1xyXG5cdFx0XHRjYW5kaWRhdGUgPSBjYW5kaWRhdGVzWyBpIF07XHJcblx0XHRcdGlmICggY2FuZGlkYXRlLnJlc29sdXRpb24gPj0gcGYuZ2V0RHByKCkgKSB7XHJcblx0XHRcdFx0YmVzdENhbmRpZGF0ZSA9IGNhbmRpZGF0ZTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggYmVzdENhbmRpZGF0ZSApIHtcclxuXHJcblx0XHRcdGJlc3RDYW5kaWRhdGUudXJsID0gcGYubWFrZVVybCggYmVzdENhbmRpZGF0ZS51cmwgKTtcclxuXHJcblx0XHRcdGlmICggcGljSW1nLnNyYyAhPT0gYmVzdENhbmRpZGF0ZS51cmwgKSB7XHJcblx0XHRcdFx0aWYgKCBwZi5yZXN0cmljdHNNaXhlZENvbnRlbnQoKSAmJiBiZXN0Q2FuZGlkYXRlLnVybC5zdWJzdHIoMCwgXCJodHRwOlwiLmxlbmd0aCkudG9Mb3dlckNhc2UoKSA9PT0gXCJodHRwOlwiICkge1xyXG5cdFx0XHRcdFx0aWYgKCB3aW5kb3cuY29uc29sZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdFx0XHRjb25zb2xlLndhcm4oIFwiQmxvY2tlZCBtaXhlZCBjb250ZW50IGltYWdlIFwiICsgYmVzdENhbmRpZGF0ZS51cmwgKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0cGljSW1nLnNyYyA9IGJlc3RDYW5kaWRhdGUudXJsO1xyXG5cdFx0XHRcdFx0Ly8gY3VycmVudFNyYyBhdHRyaWJ1dGUgYW5kIHByb3BlcnR5IHRvIG1hdGNoXHJcblx0XHRcdFx0XHQvLyBodHRwOi8vcGljdHVyZS5yZXNwb25zaXZlaW1hZ2VzLm9yZy8jdGhlLWltZy1lbGVtZW50XHJcblx0XHRcdFx0XHRpZiAoICFwZi5jdXJTcmNTdXBwb3J0ZWQgKSB7XHJcblx0XHRcdFx0XHRcdHBpY0ltZy5jdXJyZW50U3JjID0gcGljSW1nLnNyYztcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRwZi5iYWNrZmFjZVZpc2liaWxpdHlGaXgoIHBpY0ltZyApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cGYuc2V0SW50cmluc2ljU2l6ZShwaWNJbWcsIGJlc3RDYW5kaWRhdGUpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdHBmLmFzY2VuZGluZ1NvcnQgPSBmdW5jdGlvbiggYSwgYiApIHtcclxuXHRcdHJldHVybiBhLnJlc29sdXRpb24gLSBiLnJlc29sdXRpb247XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogSW4gSUU5LCA8c291cmNlPiBlbGVtZW50cyBnZXQgcmVtb3ZlZCBpZiB0aGV5IGFyZW4ndCBjaGlsZHJlbiBvZlxyXG5cdCAqIHZpZGVvIGVsZW1lbnRzLiBUaHVzLCB3ZSBjb25kaXRpb25hbGx5IHdyYXAgc291cmNlIGVsZW1lbnRzXHJcblx0ICogdXNpbmcgPCEtLVtpZiBJRSA5XT48dmlkZW8gc3R5bGU9XCJkaXNwbGF5OiBub25lO1wiPjwhW2VuZGlmXS0tPlxyXG5cdCAqIGFuZCBtdXN0IGFjY291bnQgZm9yIHRoYXQgaGVyZSBieSBtb3ZpbmcgdGhvc2Ugc291cmNlIGVsZW1lbnRzXHJcblx0ICogYmFjayBpbnRvIHRoZSBwaWN0dXJlIGVsZW1lbnQuXHJcblx0ICovXHJcblx0cGYucmVtb3ZlVmlkZW9TaGltID0gZnVuY3Rpb24oIHBpY3R1cmUgKSB7XHJcblx0XHR2YXIgdmlkZW9zID0gcGljdHVyZS5nZXRFbGVtZW50c0J5VGFnTmFtZSggXCJ2aWRlb1wiICk7XHJcblx0XHRpZiAoIHZpZGVvcy5sZW5ndGggKSB7XHJcblx0XHRcdHZhciB2aWRlbyA9IHZpZGVvc1sgMCBdLFxyXG5cdFx0XHRcdHZzb3VyY2VzID0gdmlkZW8uZ2V0RWxlbWVudHNCeVRhZ05hbWUoIFwic291cmNlXCIgKTtcclxuXHRcdFx0d2hpbGUgKCB2c291cmNlcy5sZW5ndGggKSB7XHJcblx0XHRcdFx0cGljdHVyZS5pbnNlcnRCZWZvcmUoIHZzb3VyY2VzWyAwIF0sIHZpZGVvICk7XHJcblx0XHRcdH1cclxuXHRcdFx0Ly8gUmVtb3ZlIHRoZSB2aWRlbyBlbGVtZW50IG9uY2Ugd2UncmUgZmluaXNoZWQgcmVtb3ZpbmcgaXRzIGNoaWxkcmVuXHJcblx0XHRcdHZpZGVvLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoIHZpZGVvICk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogRmluZCBhbGwgYGltZ2AgZWxlbWVudHMsIGFuZCBhZGQgdGhlbSB0byB0aGUgY2FuZGlkYXRlIGxpc3QgaWYgdGhleSBoYXZlXHJcblx0ICogYSBgcGljdHVyZWAgcGFyZW50LCBhIGBzaXplc2AgYXR0cmlidXRlIGluIGJhc2ljIGBzcmNzZXRgIHN1cHBvcnRpbmcgYnJvd3NlcnMsXHJcblx0ICogYSBgc3Jjc2V0YCBhdHRyaWJ1dGUgYXQgYWxsLCBhbmQgdGhleSBoYXZlbuKAmXQgYmVlbiBldmFsdWF0ZWQgYWxyZWFkeS5cclxuXHQgKi9cclxuXHRwZi5nZXRBbGxFbGVtZW50cyA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGVsZW1zID0gW10sXHJcblx0XHRcdGltZ3MgPSBkb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIFwiaW1nXCIgKTtcclxuXHJcblx0XHRmb3IgKCB2YXIgaCA9IDAsIGxlbiA9IGltZ3MubGVuZ3RoOyBoIDwgbGVuOyBoKysgKSB7XHJcblx0XHRcdHZhciBjdXJySW1nID0gaW1nc1sgaCBdO1xyXG5cclxuXHRcdFx0aWYgKCBjdXJySW1nLnBhcmVudE5vZGUubm9kZU5hbWUudG9VcHBlckNhc2UoKSA9PT0gXCJQSUNUVVJFXCIgfHxcclxuXHRcdFx0KCBjdXJySW1nLmdldEF0dHJpYnV0ZSggXCJzcmNzZXRcIiApICE9PSBudWxsICkgfHwgY3VyckltZ1sgcGYubnMgXSAmJiBjdXJySW1nWyBwZi5ucyBdLnNyY3NldCAhPT0gbnVsbCApIHtcclxuXHRcdFx0XHRlbGVtcy5wdXNoKCBjdXJySW1nICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHJldHVybiBlbGVtcztcclxuXHR9O1xyXG5cclxuXHRwZi5nZXRNYXRjaCA9IGZ1bmN0aW9uKCBpbWcsIHBpY3R1cmUgKSB7XHJcblx0XHR2YXIgc291cmNlcyA9IHBpY3R1cmUuY2hpbGROb2RlcyxcclxuXHRcdFx0bWF0Y2g7XHJcblxyXG5cdFx0Ly8gR28gdGhyb3VnaCBlYWNoIGNoaWxkLCBhbmQgaWYgdGhleSBoYXZlIG1lZGlhIHF1ZXJpZXMsIGV2YWx1YXRlIHRoZW1cclxuXHRcdGZvciAoIHZhciBqID0gMCwgc2xlbiA9IHNvdXJjZXMubGVuZ3RoOyBqIDwgc2xlbjsgaisrICkge1xyXG5cdFx0XHR2YXIgc291cmNlID0gc291cmNlc1sgaiBdO1xyXG5cclxuXHRcdFx0Ly8gaWdub3JlIG5vbi1lbGVtZW50IG5vZGVzXHJcblx0XHRcdGlmICggc291cmNlLm5vZGVUeXBlICE9PSAxICkge1xyXG5cdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBIaXR0aW5nIHRoZSBgaW1nYCBlbGVtZW50IHRoYXQgc3RhcnRlZCBldmVyeXRoaW5nIHN0b3BzIHRoZSBzZWFyY2ggZm9yIGBzb3VyY2VzYC5cclxuXHRcdFx0Ly8gSWYgbm8gcHJldmlvdXMgYHNvdXJjZWAgbWF0Y2hlcywgdGhlIGBpbWdgIGl0c2VsZiBpcyBldmFsdWF0ZWQgbGF0ZXIuXHJcblx0XHRcdGlmICggc291cmNlID09PSBpbWcgKSB7XHJcblx0XHRcdFx0cmV0dXJuIG1hdGNoO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBpZ25vcmUgbm9uLWBzb3VyY2VgIG5vZGVzXHJcblx0XHRcdGlmICggc291cmNlLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkgIT09IFwiU09VUkNFXCIgKSB7XHJcblx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdH1cclxuXHRcdFx0Ly8gaWYgaXQncyBhIHNvdXJjZSBlbGVtZW50IHRoYXQgaGFzIHRoZSBgc3JjYCBwcm9wZXJ0eSBzZXQsIHRocm93IGEgd2FybmluZyBpbiB0aGUgY29uc29sZVxyXG5cdFx0XHRpZiAoIHNvdXJjZS5nZXRBdHRyaWJ1dGUoIFwic3JjXCIgKSAhPT0gbnVsbCAmJiB0eXBlb2YgY29uc29sZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdGNvbnNvbGUud2FybihcIlRoZSBgc3JjYCBhdHRyaWJ1dGUgaXMgaW52YWxpZCBvbiBgcGljdHVyZWAgYHNvdXJjZWAgZWxlbWVudDsgaW5zdGVhZCwgdXNlIGBzcmNzZXRgLlwiKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dmFyIG1lZGlhID0gc291cmNlLmdldEF0dHJpYnV0ZSggXCJtZWRpYVwiICk7XHJcblxyXG5cdFx0XHQvLyBpZiBzb3VyY2UgZG9lcyBub3QgaGF2ZSBhIHNyY3NldCBhdHRyaWJ1dGUsIHNraXBcclxuXHRcdFx0aWYgKCAhc291cmNlLmdldEF0dHJpYnV0ZSggXCJzcmNzZXRcIiApICkge1xyXG5cdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBpZiB0aGVyZSdzIG5vIG1lZGlhIHNwZWNpZmllZCwgT1Igdy5tYXRjaE1lZGlhIGlzIHN1cHBvcnRlZFxyXG5cdFx0XHRpZiAoICggIW1lZGlhIHx8IHBmLm1hdGNoZXNNZWRpYSggbWVkaWEgKSApICkge1xyXG5cdFx0XHRcdHZhciB0eXBlU3VwcG9ydGVkID0gcGYudmVyaWZ5VHlwZVN1cHBvcnQoIHNvdXJjZSApO1xyXG5cclxuXHRcdFx0XHRpZiAoIHR5cGVTdXBwb3J0ZWQgPT09IHRydWUgKSB7XHJcblx0XHRcdFx0XHRtYXRjaCA9IHNvdXJjZTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdH0gZWxzZSBpZiAoIHR5cGVTdXBwb3J0ZWQgPT09IFwicGVuZGluZ1wiICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBtYXRjaDtcclxuXHR9O1xyXG5cclxuXHRmdW5jdGlvbiBwaWN0dXJlZmlsbCggb3B0ICkge1xyXG5cdFx0dmFyIGVsZW1lbnRzLFxyXG5cdFx0XHRlbGVtZW50LFxyXG5cdFx0XHRwYXJlbnQsXHJcblx0XHRcdGZpcnN0TWF0Y2gsXHJcblx0XHRcdGNhbmRpZGF0ZXMsXHJcblx0XHRcdG9wdGlvbnMgPSBvcHQgfHwge307XHJcblxyXG5cdFx0ZWxlbWVudHMgPSBvcHRpb25zLmVsZW1lbnRzIHx8IHBmLmdldEFsbEVsZW1lbnRzKCk7XHJcblxyXG5cdFx0Ly8gTG9vcCB0aHJvdWdoIGFsbCBlbGVtZW50c1xyXG5cdFx0Zm9yICggdmFyIGkgPSAwLCBwbGVuID0gZWxlbWVudHMubGVuZ3RoOyBpIDwgcGxlbjsgaSsrICkge1xyXG5cdFx0XHRlbGVtZW50ID0gZWxlbWVudHNbIGkgXTtcclxuXHRcdFx0cGFyZW50ID0gZWxlbWVudC5wYXJlbnROb2RlO1xyXG5cdFx0XHRmaXJzdE1hdGNoID0gdW5kZWZpbmVkO1xyXG5cdFx0XHRjYW5kaWRhdGVzID0gdW5kZWZpbmVkO1xyXG5cclxuXHRcdFx0Ly8gaW1tZWRpYXRlbHkgc2tpcCBub24tYGltZ2Agbm9kZXNcclxuXHRcdFx0aWYgKCBlbGVtZW50Lm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkgIT09IFwiSU1HXCIgKSB7XHJcblx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIGV4cGFuZG8gZm9yIGNhY2hpbmcgZGF0YSBvbiB0aGUgaW1nXHJcblx0XHRcdGlmICggIWVsZW1lbnRbIHBmLm5zIF0gKSB7XHJcblx0XHRcdFx0ZWxlbWVudFsgcGYubnMgXSA9IHt9O1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBpZiB0aGUgZWxlbWVudCBoYXMgYWxyZWFkeSBiZWVuIGV2YWx1YXRlZCwgc2tpcCBpdCB1bmxlc3NcclxuXHRcdFx0Ly8gYG9wdGlvbnMucmVldmFsdWF0ZWAgaXMgc2V0IHRvIHRydWUgKCB0aGlzLCBmb3IgZXhhbXBsZSxcclxuXHRcdFx0Ly8gaXMgc2V0IHRvIHRydWUgd2hlbiBydW5uaW5nIGBwaWN0dXJlZmlsbGAgb24gYHJlc2l6ZWAgKS5cclxuXHRcdFx0aWYgKCAhb3B0aW9ucy5yZWV2YWx1YXRlICYmIGVsZW1lbnRbIHBmLm5zIF0uZXZhbHVhdGVkICkge1xyXG5cdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBpZiBgaW1nYCBpcyBpbiBhIGBwaWN0dXJlYCBlbGVtZW50XHJcblx0XHRcdGlmICggcGFyZW50ICYmIHBhcmVudC5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpID09PSBcIlBJQ1RVUkVcIiApIHtcclxuXHJcblx0XHRcdFx0Ly8gSUU5IHZpZGVvIHdvcmthcm91bmRcclxuXHRcdFx0XHRwZi5yZW1vdmVWaWRlb1NoaW0oIHBhcmVudCApO1xyXG5cclxuXHRcdFx0XHQvLyByZXR1cm4gdGhlIGZpcnN0IG1hdGNoIHdoaWNoIG1pZ2h0IHVuZGVmaW5lZFxyXG5cdFx0XHRcdC8vIHJldHVybnMgZmFsc2UgaWYgdGhlcmUgaXMgYSBwZW5kaW5nIHNvdXJjZVxyXG5cdFx0XHRcdC8vIFRPRE8gdGhlIHJldHVybiB0eXBlIGhlcmUgaXMgYnJ1dGFsLCBjbGVhbnVwXHJcblx0XHRcdFx0Zmlyc3RNYXRjaCA9IHBmLmdldE1hdGNoKCBlbGVtZW50LCBwYXJlbnQgKTtcclxuXHJcblx0XHRcdFx0Ly8gaWYgYW55IHNvdXJjZXMgYXJlIHBlbmRpbmcgaW4gdGhpcyBwaWN0dXJlIGR1ZSB0byBhc3luYyB0eXBlIHRlc3QocylcclxuXHRcdFx0XHQvLyByZW1vdmUgdGhlIGV2YWx1YXRlZCBhdHRyIGFuZCBza2lwIGZvciBub3cgKCB0aGUgcGVuZGluZyB0ZXN0IHdpbGxcclxuXHRcdFx0XHQvLyByZXJ1biBwaWN0dXJlZmlsbCBvbiB0aGlzIGVsZW1lbnQgd2hlbiBjb21wbGV0ZSlcclxuXHRcdFx0XHRpZiAoIGZpcnN0TWF0Y2ggPT09IGZhbHNlICkge1xyXG5cdFx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGZpcnN0TWF0Y2ggPSB1bmRlZmluZWQ7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIENhY2hlIGFuZCByZW1vdmUgYHNyY3NldGAgaWYgcHJlc2VudCBhbmQgd2XigJlyZSBnb2luZyB0byBiZSBkb2luZyBgcGljdHVyZWAvYHNyY3NldGAvYHNpemVzYCBwb2x5ZmlsbGluZyB0byBpdC5cclxuXHRcdFx0aWYgKCAoIHBhcmVudCAmJiBwYXJlbnQubm9kZU5hbWUudG9VcHBlckNhc2UoKSA9PT0gXCJQSUNUVVJFXCIgKSB8fFxyXG5cdFx0XHQoICFwZi5zaXplc1N1cHBvcnRlZCAmJiAoIGVsZW1lbnQuc3Jjc2V0ICYmIHJlZ1dEZXNjLnRlc3QoIGVsZW1lbnQuc3Jjc2V0ICkgKSApICkge1xyXG5cdFx0XHRcdHBmLmRvZGdlU3Jjc2V0KCBlbGVtZW50ICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggZmlyc3RNYXRjaCApIHtcclxuXHRcdFx0XHRjYW5kaWRhdGVzID0gcGYucHJvY2Vzc1NvdXJjZVNldCggZmlyc3RNYXRjaCApO1xyXG5cdFx0XHRcdHBmLmFwcGx5QmVzdENhbmRpZGF0ZSggY2FuZGlkYXRlcywgZWxlbWVudCApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdC8vIE5vIHNvdXJjZXMgbWF0Y2hlZCwgc28gd2XigJlyZSBkb3duIHRvIHByb2Nlc3NpbmcgdGhlIGlubmVyIGBpbWdgIGFzIGEgc291cmNlLlxyXG5cdFx0XHRcdGNhbmRpZGF0ZXMgPSBwZi5wcm9jZXNzU291cmNlU2V0KCBlbGVtZW50ICk7XHJcblxyXG5cdFx0XHRcdGlmICggZWxlbWVudC5zcmNzZXQgPT09IHVuZGVmaW5lZCB8fCBlbGVtZW50WyBwZi5ucyBdLnNyY3NldCApIHtcclxuXHRcdFx0XHRcdC8vIEVpdGhlciBgc3Jjc2V0YCBpcyBjb21wbGV0ZWx5IHVuc3VwcG9ydGVkLCBvciB3ZSBuZWVkIHRvIHBvbHlmaWxsIGBzaXplc2AgZnVuY3Rpb25hbGl0eS5cclxuXHRcdFx0XHRcdHBmLmFwcGx5QmVzdENhbmRpZGF0ZSggY2FuZGlkYXRlcywgZWxlbWVudCApO1xyXG5cdFx0XHRcdH0gLy8gRWxzZSwgcmVzb2x1dGlvbi1vbmx5IGBzcmNzZXRgIGlzIHN1cHBvcnRlZCBuYXRpdmVseS5cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gc2V0IGV2YWx1YXRlZCB0byB0cnVlIHRvIGF2b2lkIHVubmVjZXNzYXJ5IHJlcGFyc2luZ1xyXG5cdFx0XHRlbGVtZW50WyBwZi5ucyBdLmV2YWx1YXRlZCA9IHRydWU7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTZXRzIHVwIHBpY3R1cmUgcG9seWZpbGwgYnkgcG9sbGluZyB0aGUgZG9jdW1lbnQgYW5kIHJ1bm5pbmdcclxuXHQgKiB0aGUgcG9seWZpbGwgZXZlcnkgMjUwbXMgdW50aWwgdGhlIGRvY3VtZW50IGlzIHJlYWR5LlxyXG5cdCAqIEFsc28gYXR0YWNoZXMgcGljdHVyZWZpbGwgb24gcmVzaXplXHJcblx0ICovXHJcblx0ZnVuY3Rpb24gcnVuUGljdHVyZWZpbGwoKSB7XHJcblx0XHRwZi5pbml0VHlwZURldGVjdHMoKTtcclxuXHRcdHBpY3R1cmVmaWxsKCk7XHJcblx0XHR2YXIgaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKCBmdW5jdGlvbigpIHtcclxuXHRcdFx0Ly8gV2hlbiB0aGUgZG9jdW1lbnQgaGFzIGZpbmlzaGVkIGxvYWRpbmcsIHN0b3AgY2hlY2tpbmcgZm9yIG5ldyBpbWFnZXNcclxuXHRcdFx0Ly8gaHR0cHM6Ly9naXRodWIuY29tL2RlZC9kb21yZWFkeS9ibG9iL21hc3Rlci9yZWFkeS5qcyNMMTVcclxuXHRcdFx0cGljdHVyZWZpbGwoKTtcclxuXHJcblx0XHRcdGlmICggL15sb2FkZWR8Xml8XmMvLnRlc3QoIGRvYy5yZWFkeVN0YXRlICkgKSB7XHJcblx0XHRcdFx0Y2xlYXJJbnRlcnZhbCggaW50ZXJ2YWxJZCApO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0fSwgMjUwICk7XHJcblxyXG5cdFx0dmFyIHJlc2l6ZVRpbWVyO1xyXG5cdFx0dmFyIGhhbmRsZVJlc2l6ZSA9IGZ1bmN0aW9uKCkge1xyXG5cdCAgICAgICAgcGljdHVyZWZpbGwoeyByZWV2YWx1YXRlOiB0cnVlIH0pO1xyXG5cdCAgICB9O1xyXG5cdFx0ZnVuY3Rpb24gY2hlY2tSZXNpemUoKSB7XHJcblx0XHQgICAgY2xlYXJUaW1lb3V0KHJlc2l6ZVRpbWVyKTtcclxuXHRcdCAgICByZXNpemVUaW1lciA9IHNldFRpbWVvdXQoIGhhbmRsZVJlc2l6ZSwgNjAgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIHcuYWRkRXZlbnRMaXN0ZW5lciApIHtcclxuXHRcdFx0dy5hZGRFdmVudExpc3RlbmVyKCBcInJlc2l6ZVwiLCBjaGVja1Jlc2l6ZSwgZmFsc2UgKTtcclxuXHRcdH0gZWxzZSBpZiAoIHcuYXR0YWNoRXZlbnQgKSB7XHJcblx0XHRcdHcuYXR0YWNoRXZlbnQoIFwib25yZXNpemVcIiwgY2hlY2tSZXNpemUgKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHJ1blBpY3R1cmVmaWxsKCk7XHJcblxyXG5cdC8qIGV4cG9zZSBtZXRob2RzIGZvciB0ZXN0aW5nICovXHJcblx0cGljdHVyZWZpbGwuXyA9IHBmO1xyXG5cclxuXHRleHBvc2UoIHBpY3R1cmVmaWxsICk7XHJcblxyXG59ICkoIHdpbmRvdywgd2luZG93LmRvY3VtZW50LCBuZXcgd2luZG93LkltYWdlKCkgKTtcclxuXHJcblxyXG4vKlxyXG4gKiDQndCw0LLQuNCz0LDRhtC40Y8g0LIg0YjQsNC/0LrQtVxyXG4gKi9cclxuY29uc3QgbWFpbk5hdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy0tbWFpbi1uYXYnKTtcclxuY29uc3QgbWFpbk5hdkJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy0taGVhZGVyX19uYXYtYnRuJyk7XHJcbmNvbnN0IGJ1cmdlckljb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdqcy0taGVhZGVyLWJ1cmdlcicpO1xyXG5cclxuaWYgKG1hdGNoTWVkaWEpIHtcclxuICBsZXQgbXFOYXYgPSB3aW5kb3cubWF0Y2hNZWRpYSggJyhtaW4td2lkdGg6IDc2OHB4KScgKTtcclxuICBtcU5hdi5hZGRMaXN0ZW5lcihXaWR0aENoYW5nZU5hdik7XHJcbiAgV2lkdGhDaGFuZ2VOYXYobXFOYXYpO1xyXG59XHJcblxyXG5tYWluTmF2QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZ0KSB7XHJcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBtYWluTmF2LmNsYXNzTGlzdC50b2dnbGUoJ2Rpc3BsYXktbm9uZScpO1xyXG4gICAgbWFpbk5hdkJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKCdoZWFkZXJfX25hdi1idG4tLWNsb3NlJyk7XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gV2lkdGhDaGFuZ2VOYXYobXEpIHtcclxuICBpZiAoIW1xLm1hdGNoZXMpIHtcclxuICAgIG1haW5OYXYuY2xhc3NMaXN0LmFkZCgnZGlzcGxheS1ub25lJyk7XHJcbiAgICBtYWluTmF2QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc3BsYXktbm9uZScpO1xyXG4gICAgbWFpbk5hdkJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdoZWFkZXJfX25hdi1idG4tLWNsb3NlJyk7XHJcbiAgfSBlbHNlIHtcclxuICAgIG1haW5OYXYuY2xhc3NMaXN0LnJlbW92ZSgnZGlzcGxheS1ub25lJyk7XHJcbiAgICBtYWluTmF2QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXktbm9uZScpO1xyXG4gIH1cclxufVxyXG5cclxuXHJcbi8qXHJcbiAqINCf0LXRgNC10LrQu9GO0YfQsNGC0LXQu9GMINC60LDRgNGC0LjQvdC60LggXCLQtNC+IC0g0L/QvtGB0LvQtVwiXHJcbiAqL1xyXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWV4YW1wbGVfX3N3aXRjaCcpKSB7XHJcbiAgY29uc3QgZXhhbXBsZUFmdGVyQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWV4YW1wbGVfX3N3aXRjaC1idG4tLWFmdGVyJyk7XHJcbiAgY29uc3QgZXhhbXBsZUJlZm9yZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1leGFtcGxlX19zd2l0Y2gtYnRuLS1iZWZvcmUnKTtcclxuICBjb25zdCBleGFtcGxlVG9nZ2xlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWV4YW1wbGVfX3N3aXRjaCcpO1xyXG4gIGNvbnN0IGltZ0FmdGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWV4YW1wbGVfX3BpY3R1cmUtLWFmdGVyJyk7XHJcbiAgY29uc3QgaW1nQmVmb3JlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWV4YW1wbGVfX3BpY3R1cmUtLWJlZm9yZScpO1xyXG4gIGNvbnN0IGltZ0hpZGUgPSAnZXhhbXBsZV9fcGljdHVyZS0taGlkZSc7XHJcblxyXG4gIGlmIChtYXRjaE1lZGlhKSB7XHJcbiAgICBsZXQgbXFFeGFtcGxlID0gd2luZG93Lm1hdGNoTWVkaWEoICcobWF4LXdpZHRoOiA3NjhweCknICk7XHJcbiAgICBtcUV4YW1wbGUuYWRkTGlzdGVuZXIoV2lkdGhDaGFuZ2VFeGFtcGxlKTtcclxuICAgIFdpZHRoQ2hhbmdlRXhhbXBsZShtcUV4YW1wbGUpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gV2lkdGhDaGFuZ2VFeGFtcGxlKG1xKSB7XHJcbiAgICBpZiAobXEubWF0Y2hlcykge1xyXG4gICAgICBleGFtcGxlQWZ0ZXJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzaG93SW1nQWZ0ZXIpO1xyXG4gICAgICBleGFtcGxlQmVmb3JlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2hvd0ltZ0JlZm9yZSk7XHJcbiAgICAgIGV4YW1wbGVUb2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVJbWcpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZXhhbXBsZUFmdGVyQnRuLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2hvd0ltZ0FmdGVyKTtcclxuICAgICAgZXhhbXBsZUJlZm9yZUJ0bi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHNob3dJbWdCZWZvcmUpO1xyXG4gICAgICBleGFtcGxlVG9nZ2xlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlSW1nKTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgZnVuY3Rpb24gc2hvd0ltZ0FmdGVyKGV2dCkge1xyXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBpbWdBZnRlci5jbGFzc0xpc3QucmVtb3ZlKGltZ0hpZGUpO1xyXG4gICAgaW1nQmVmb3JlLmNsYXNzTGlzdC5hZGQoaW1nSGlkZSk7XHJcbiAgICBleGFtcGxlVG9nZ2xlLmNsYXNzTGlzdC5hZGQoJ2V4YW1wbGVfX3N3aXRjaC0tYWZ0ZXInKTtcclxuICB9XHJcbiAgXHJcbiAgZnVuY3Rpb24gc2hvd0ltZ0JlZm9yZShldnQpIHtcclxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgaW1nQmVmb3JlLmNsYXNzTGlzdC5yZW1vdmUoaW1nSGlkZSk7XHJcbiAgICBpbWdBZnRlci5jbGFzc0xpc3QuYWRkKGltZ0hpZGUpO1xyXG4gICAgZXhhbXBsZVRvZ2dsZS5jbGFzc0xpc3QucmVtb3ZlKCdleGFtcGxlX19zd2l0Y2gtLWFmdGVyJyk7XHJcbiAgfVxyXG4gIFxyXG4gIGZ1bmN0aW9uIHRvZ2dsZUltZyhldnQpIHtcclxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgaW1nQmVmb3JlLmNsYXNzTGlzdC50b2dnbGUoaW1nSGlkZSk7XHJcbiAgICBpbWdBZnRlci5jbGFzc0xpc3QudG9nZ2xlKGltZ0hpZGUpO1xyXG4gICAgZXhhbXBsZVRvZ2dsZS5jbGFzc0xpc3QudG9nZ2xlKCdleGFtcGxlX19zd2l0Y2gtLWFmdGVyJyk7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuLypcclxuICog0J/QvtC00LXQu9GO0YfQtdC90LjQtSDRj9C90LTQtdC60YEg0LrQsNGA0YJcclxuICovXHJcbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjeW1hcCcpKSB7XHJcbiAgeW1hcHMucmVhZHkoZnVuY3Rpb24gKCkge1xyXG4gICAgbGV0IG15TWFwID0gbmV3IHltYXBzLk1hcChcInltYXBcIiwge1xyXG4gICAgICBjZW50ZXI6IFs1OS45Mzg2MzEsIDMwLjMyMzA1NTRdLFxyXG4gICAgICB6b29tOiAxN1xyXG4gICAgfSk7XHJcblxyXG4gICAgbGV0IHBsYWNlbWFyayA9IG5ldyB5bWFwcy5QbGFjZW1hcmsoWzU5LjkzODYzMSwgMzAuMzIzMDU1NF0sIHtcclxuICAgICAgYmFsbG9vbkNvbnRlbnRIZWFkZXI6IFwiQ2F0IEVuZXJneVwiLFxyXG4gICAgICBiYWxsb29uQ29udGVudEJvZHk6IFwi0YPQuy4g0JHQvtC70YzRiNCw0Y8gPGJyPtCa0L7QvdGO0YjQtdC90L3QsNGPLCDQtC4gMTkvOCA8YnI+0KHQsNC90LrRgi3Qn9C10YLQtdGA0LHRg9GA0LNcIixcclxuICAgICAgaGludENvbnRlbnQ6IFwi0JzRiyDQvdCw0YXQvtC00LjQvNGB0Y8g0LfQtNC10YHRjFwiXHJcbiAgICB9LCB7XHJcbiAgICAgIGljb25MYXlvdXQ6ICdkZWZhdWx0I2ltYWdlJyxcclxuICAgICAgaWNvbkltYWdlSHJlZjogJ2ltZy9waWN0dXJlL21hcC1waW4ucG5nJyxcclxuICAgICAgaWNvbkltYWdlU2l6ZTogWzYwLCA1MV0sXHJcbiAgICAgIGljb25JbWFnZU9mZnNldDogWy0zMCwgLTUxXVxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIG15TWFwLmdlb09iamVjdHMuYWRkKHBsYWNlbWFyayk7XHJcbiAgICBteU1hcC5iZWhhdmlvcnMuZGlzYWJsZShbJ3Njcm9sbFpvb20nXSk7XHJcblxyXG4gICAgaWYgKG1hdGNoTWVkaWEpIHtcclxuICAgICAgbGV0IGRldmljZVdpZHRoID0gd2luZG93Lm1hdGNoTWVkaWEoICcobWluLXdpZHRoOiAxMzAwcHgpJyApO1xyXG4gICAgICBkZXZpY2VXaWR0aC5hZGRMaXN0ZW5lcihzZXRNYXBDZW50ZXIpO1xyXG4gICAgICBzZXRNYXBDZW50ZXIoZGV2aWNlV2lkdGgpO1xyXG5cclxuICAgICAgZnVuY3Rpb24gc2V0TWFwQ2VudGVyKG1xKSB7XHJcbiAgICAgICAgaWYgKG1xLm1hdGNoZXMpIHtcclxuICAgICAgICAgIG15TWFwLnNldENlbnRlcihbNTkuOTM4NzI1LDMwLjMxOTQ0N10pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBteU1hcC5zZXRDZW50ZXIoWzU5LjkzODYzMSwgMzAuMzIzMDU1NF0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0pO1xyXG59Il19

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsid2luZG93IiwibWF0Y2hNZWRpYSIsInN0eWxlTWVkaWEiLCJtZWRpYSIsImluZm8iLCJzY3JpcHQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwic3R5bGUiLCJwYXJlbnROb2RlIiwiaW5zZXJ0QmVmb3JlIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImN1cnJlbnRTdHlsZSIsIm1hdGNoTWVkaXVtIiwidGV4dCIsInN0eWxlU2hlZXQiLCJ0ZXh0Q29udGVudCIsIndpZHRoIiwibWF0Y2hlcyIsInciLCJkb2MiLCJpbWFnZSIsImV4cG9zZSIsInBpY3R1cmVmaWxsIiwibW9kdWxlIiwiX3R5cGVvZiIsImV4cG9ydHMiLCJkZWZpbmUiLCJhbWQiLCJIVE1MUGljdHVyZUVsZW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiYW5jaG9yIiwic2V0SW50cmluc2ljU2l6ZSIsInBmIiwicmVnV0Rlc2MiLCJucyIsInNpemVzU3VwcG9ydGVkIiwiY3VyU3JjU3VwcG9ydGVkIiwidHJpbSIsInN0ciIsInJlcGxhY2UiLCJtYWtlVXJsIiwic3JjIiwiaHJlZiIsInJlc3RyaWN0c01peGVkQ29udGVudCIsImxvY2F0aW9uIiwibWF0Y2hlc01lZGlhIiwiZ2V0RHByIiwiZGV2aWNlUGl4ZWxSYXRpbyIsImdldFdpZHRoRnJvbUxlbmd0aCIsImxlbmd0aCIsImNzc1ZhbHVlIiwiaW5kZXhPZiIsInBhcnNlRmxvYXQiLCJsZW5ndGhFbCIsImNzc1RleHQiLCJlIiwiYm9keSIsImFwcGVuZENoaWxkIiwib2Zmc2V0V2lkdGgiLCJkZXRlY3RUeXBlU3VwcG9ydCIsInR5cGUiLCJ0eXBlVXJpIiwib25lcnJvciIsIkltYWdlIiwib25sb2FkIiwidHlwZXMiLCJpbml0VHlwZURldGVjdHMiLCJpbXBsZW1lbnRhdGlvbiIsImhhc0ZlYXR1cmUiLCJ2ZXJpZnlUeXBlU3VwcG9ydCIsInNvdXJjZSIsInBmVHlwZSIsInBhcnNlU2l6ZSIsInNvdXJjZVNpemVTdHIiLCJtYXRjaCIsImZpbmRXaWR0aEZyb21Tb3VyY2VTaXplIiwic291cmNlU2l6ZUxpc3RTdHIiLCJ3aW5uaW5nTGVuZ3RoIiwic291cmNlU2l6ZUxpc3QiLCJzcGxpdCIsImkiLCJsZW4iLCJzb3VyY2VTaXplIiwicGFyc2VkU2l6ZSIsIk1hdGgiLCJtYXgiLCJpbm5lcldpZHRoIiwiZG9jdW1lbnRFbGVtZW50IiwiY2xpZW50V2lkdGgiLCJwYXJzZVNyY3NldCIsInNyY3NldCIsImNhbmRpZGF0ZXMiLCJ1cmwiLCJwb3MiLCJzZWFyY2giLCJkZXNjcmlwdG9yIiwic2xpY2UiLCJkZXNjcG9zIiwicGFyc2VEZXNjcmlwdG9yIiwic2l6ZXNhdHRyIiwicmVzQ2FuZGlkYXRlIiwic2l6ZXMiLCJzaXplRGVzY3JpcHRvciIsIndpZHRoSW5Dc3NQaXhlbHMiLCJzcGxpdERlc2NyaXB0b3IiLCJjdXJyIiwibGFzdGNoYXIiLCJyZXMiLCJpc05hTiIsInBhcnNlSW50IiwiZ2V0Q2FuZGlkYXRlc0Zyb21Tb3VyY2VTZXQiLCJmb3JtYXR0ZWRDYW5kaWRhdGVzIiwiY2FuZGlkYXRlIiwiZG9kZ2VTcmNzZXQiLCJpbWciLCJzZXRBdHRyaWJ1dGUiLCJwcm9jZXNzU291cmNlU2V0IiwiZWwiLCJnZXRBdHRyaWJ1dGUiLCJ0b1VwcGVyQ2FzZSIsImJhY2tmYWNlVmlzaWJpbGl0eUZpeCIsInBpY0ltZyIsImN1cnJlbnRab29tIiwiem9vbSIsIldlYmtpdEJhY2tmYWNlVmlzaWJpbGl0eSIsImJlc3RDYW5kaWRhdGUiLCJwZlN0b3BJbnRyaW5zaWNTaXplIiwidW5kZWZpbmVkIiwiZGltcyIsInVybENhY2hlIiwicmVtb3ZlQ2hpbGQiLCJzZXRTaXplIiwicmVzb2x1dGlvbiIsImFwcGx5QmVzdENhbmRpZGF0ZSIsInNvcnQiLCJhc2NlbmRpbmdTb3J0Iiwic3Vic3RyIiwidG9Mb3dlckNhc2UiLCJjb25zb2xlIiwiY3VycmVudFNyYyIsImEiLCJiIiwicmVtb3ZlVmlkZW9TaGltIiwicGljdHVyZSIsInZpZGVvcyIsInZpZGVvIiwidnNvdXJjZXMiLCJnZXRBbGxFbGVtZW50cyIsImltZ3MiLCJoIiwiY3VyckltZyIsIm5vZGVOYW1lIiwiZWxlbXMiLCJwdXNoIiwiZ2V0TWF0Y2giLCJzb3VyY2VzIiwiY2hpbGROb2RlcyIsImoiLCJzbGVuIiwibm9kZVR5cGUiLCJ3YXJuIiwidHlwZVN1cHBvcnRlZCIsImhhbmRsZVJlc2l6ZSIsInJlZXZhbHVhdGUiLCJyZXNpemVUaW1lciIsImludGVydmFsSWQiLCJzZXRJbnRlcnZhbCIsInRlc3QiLCJyZWFkeVN0YXRlIiwiY2xlYXJJbnRlcnZhbCIsImNoZWNrUmVzaXplIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsImFkZEV2ZW50TGlzdGVuZXIiLCJydW5QaWN0dXJlZmlsbCIsImF0dGFjaEV2ZW50IiwiZWxlbWVudHMiLCJlbGVtZW50IiwicGFyZW50IiwiZmlyc3RNYXRjaCIsIm9wdGlvbnMiLCJwbGVuIiwiZXZhbHVhdGVkIiwibWFpbk5hdiIsInF1ZXJ5U2VsZWN0b3IiLCJtYWluTmF2QnV0dG9uIiwibXFOYXYiLCJXaWR0aENoYW5nZU5hdiIsImV2dCIsInByZXZlbnREZWZhdWx0IiwibXEiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJhZGQiLCJ0b2dnbGUiLCJleGFtcGxlVG9nZ2xlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV4YW1wbGVBZnRlckJ0biIsInNob3dJbWdBZnRlciIsImV4YW1wbGVCZWZvcmVCdG4iLCJzaG93SW1nQmVmb3JlIiwidG9nZ2xlSW1nIiwiaW1nQWZ0ZXIiLCJpbWdCZWZvcmUiLCJpbWdIaWRlIiwiV2lkdGhDaGFuZ2VFeGFtcGxlIiwibXFFeGFtcGxlIiwieW1hcHMiLCJyZWFkeSIsIm15TWFwIiwiTWFwIiwiY2VudGVyIiwiUGxhY2VtYXJrIiwiaGludENvbnRlbnQiLCJiYWxsb29uQ29udGVudEhlYWRlciIsImJhbGxvb25Db250ZW50Qm9keSIsImljb25JbWFnZU9mZnNldCIsImljb25JbWFnZVNpemUiLCJwbGFjZW1hcmsiLCJzZXRDZW50ZXIiLCJiZWhhdmlvcnMiLCJkaXNhYmxlIiwiZGV2aWNlV2lkdGgiLCJhZGRMaXN0ZW5lciIsInNldE1hcENlbnRlciJdLCJtYXBwaW5ncyI6ImtQQUdBQSxPQUFBQyxhQUFBRCxPQUFBQyxXQUFBLFdBR0EsSUFBQUMsRUFBQUYsT0FBQUUsWUFBQUYsT0FBQUcsTUFTQyxJQUFLRCxFQUFZLENBSGpCLElBR0FFLEVBSElGLEVBQWNGLFNBQU9FLGNBQWNGLFNBS3JDSyxFQUFjQyxTQUFTQyxxQkFBcUIsVUFBVSxHQUR2REMsRUFDQ0gsS0FBTSxXQURQRyxFQUVDSixHQUFjLG9CQUdmSSxFQUFLQyxXQUFTQyxhQUFBRixFQUFkSCxHQUtBRCxFQUFJLHFCQUFJSixRQUFpQ0EsT0FBT1csaUJBQWlCSCxFQUFPLE9BQVNBLEVBQU1JLGFBR3RGQyxFQUFBQSxDQUNDQSxZQUFRLFNBQUdWLEdBQVgsSUFBSVcsRUFBTyxVQUFZWCxFQUFRLHlDQUZwQixPQU9WSyxFQUZETyxXQUdDUCxFQUFBQSxXQUFNUSxRQUFjRixFQUFwQk4sRUFBTVEsWUFBY0YsRUFSdkIsUUFBQVYsRUFBQWEsUUFtQkNDLE9BQUFBLFNBQVNoQixHQUNUQyxNQUFBQSxDQUZNZSxRQUFQaEIsRUFBQVcsWUFBQVYsR0FBQSxPQUREQSxNQUFBQSxHQUFBLFFBMUNELElBdURDLFNBQUFnQixFQUFBQyxFQUFBQyxHQUlDLFNBQUFDLEVBQUFDLEdBRUMsWUFBQSxvQkFBQUMsT0FBQSxZQUFBQyxFQUFBRCxVQUFBLFdBQUFDLEVBQUFELE9BQUFFLFNBRUFGLE9BSERFLFFBR1lILEVBQ1gsbUJBQUFJLFFBQUFBLE9BQUFDLEtBQ29DRCxPQUFBLGNBQUEsV0FBQSxPQUFBSixJQUNwQyxXQUFBRSxFQUFBTixLQUNEQSxFQUFBSSxZQUFLQSxHQU9OLEdBQUtKLEVBQUVVLG1CQUNOUCxFQUFPLGtCQURSLENBTUFGLEVBQUlVLGNBQWUsV0FHbkIsSUEwQkNDLEVBa1VFQyxFQTVWQ0MsRUFBS2QsRUFBRUksYUFBZSxHQUUx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LENBQU0sZUFHekJQLFdBQUEsQ0FBQSxJQVNXaE0sRUFBUCxTQUFnQjZLLEdBQ2RtQixFQUFLaE0sUUFEUGdNLEVBRU9VLFVBQUEsQ0FBQSxVQUFBLFlBRU5WLEVBQUFVLFVBQUEsQ0FBQSxVQUFBLGNBWkNDLEVBQVVDLE9BQVM3TixXQUF6Qix1QkFJRThOLEVBQVlDLFlBQVlDLEdBRjFCQSxFQUFBRiIsImZpbGUiOiJzY3JpcHQtbWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcclxuICogUGljdHVyZWZpbGxcclxuICovXHJcbi8qISBQaWN0dXJlZmlsbCAtIHYyLjMuMSAtIDIwMTUtMDQtMDlcclxuKiBodHRwOi8vc2NvdHRqZWhsLmdpdGh1Yi5pby9waWN0dXJlZmlsbFxyXG4qIENvcHlyaWdodCAoYykgMjAxNSBodHRwczovL2dpdGh1Yi5jb20vc2NvdHRqZWhsL3BpY3R1cmVmaWxsL2Jsb2IvbWFzdGVyL0F1dGhvcnMudHh0OyBMaWNlbnNlZCBNSVQgKi9cclxuLyohIG1hdGNoTWVkaWEoKSBwb2x5ZmlsbCAtIFRlc3QgYSBDU1MgbWVkaWEgdHlwZS9xdWVyeSBpbiBKUy4gQXV0aG9ycyAmIGNvcHlyaWdodCAoYykgMjAxMjogU2NvdHQgSmVobCwgUGF1bCBJcmlzaCwgTmljaG9sYXMgWmFrYXMsIERhdmlkIEtuaWdodC4gRHVhbCBNSVQvQlNEIGxpY2Vuc2UgKi9cclxuXHJcbndpbmRvdy5tYXRjaE1lZGlhIHx8ICh3aW5kb3cubWF0Y2hNZWRpYSA9IGZ1bmN0aW9uKCkge1xyXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cclxuXHQvLyBGb3IgYnJvd3NlcnMgdGhhdCBzdXBwb3J0IG1hdGNoTWVkaXVtIGFwaSBzdWNoIGFzIElFIDkgYW5kIHdlYmtpdFxyXG5cdHZhciBzdHlsZU1lZGlhID0gKHdpbmRvdy5zdHlsZU1lZGlhIHx8IHdpbmRvdy5tZWRpYSk7XHJcblxyXG5cdC8vIEZvciB0aG9zZSB0aGF0IGRvbid0IHN1cHBvcnQgbWF0Y2hNZWRpdW1cclxuXHRpZiAoIXN0eWxlTWVkaWEpIHtcclxuXHRcdHZhciBzdHlsZSAgICAgICA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyksXHJcblx0XHRcdHNjcmlwdCAgICAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdLFxyXG5cdFx0XHRpbmZvICAgICAgICA9IG51bGw7XHJcblxyXG5cdFx0c3R5bGUudHlwZSAgPSAndGV4dC9jc3MnO1xyXG5cdFx0c3R5bGUuaWQgICAgPSAnbWF0Y2htZWRpYWpzLXRlc3QnO1xyXG5cclxuXHRcdHNjcmlwdC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShzdHlsZSwgc2NyaXB0KTtcclxuXHJcblx0XHQvLyAnc3R5bGUuY3VycmVudFN0eWxlJyBpcyB1c2VkIGJ5IElFIDw9IDggYW5kICd3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZScgZm9yIGFsbCBvdGhlciBicm93c2Vyc1xyXG5cdFx0aW5mbyA9ICgnZ2V0Q29tcHV0ZWRTdHlsZScgaW4gd2luZG93KSAmJiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShzdHlsZSwgbnVsbCkgfHwgc3R5bGUuY3VycmVudFN0eWxlO1xyXG5cclxuXHRcdHN0eWxlTWVkaWEgPSB7XHJcblx0XHRcdG1hdGNoTWVkaXVtOiBmdW5jdGlvbihtZWRpYSkge1xyXG5cdFx0XHRcdHZhciB0ZXh0ID0gJ0BtZWRpYSAnICsgbWVkaWEgKyAneyAjbWF0Y2htZWRpYWpzLXRlc3QgeyB3aWR0aDogMXB4OyB9IH0nO1xyXG5cclxuXHRcdFx0XHQvLyAnc3R5bGUuc3R5bGVTaGVldCcgaXMgdXNlZCBieSBJRSA8PSA4IGFuZCAnc3R5bGUudGV4dENvbnRlbnQnIGZvciBhbGwgb3RoZXIgYnJvd3NlcnNcclxuXHRcdFx0XHRpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xyXG5cdFx0XHRcdFx0c3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gdGV4dDtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0c3R5bGUudGV4dENvbnRlbnQgPSB0ZXh0O1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gVGVzdCBpZiBtZWRpYSBxdWVyeSBpcyB0cnVlIG9yIGZhbHNlXHJcblx0XHRcdFx0cmV0dXJuIGluZm8ud2lkdGggPT09ICcxcHgnO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cdH1cclxuXHJcblx0cmV0dXJuIGZ1bmN0aW9uKG1lZGlhKSB7XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRtYXRjaGVzOiBzdHlsZU1lZGlhLm1hdGNoTWVkaXVtKG1lZGlhIHx8ICdhbGwnKSxcclxuXHRcdFx0bWVkaWE6IG1lZGlhIHx8ICdhbGwnXHJcblx0XHR9O1xyXG5cdH07XHJcbn0oKSk7XHJcbi8qISBQaWN0dXJlZmlsbCAtIFJlc3BvbnNpdmUgSW1hZ2VzIHRoYXQgd29yayB0b2RheS5cclxuKiAgQXV0aG9yOiBTY290dCBKZWhsLCBGaWxhbWVudCBHcm91cCwgMjAxMiAoIG5ldyBwcm9wb3NhbCBpbXBsZW1lbnRlZCBieSBTaGF3biBKYW5zZXBhciApXHJcbiogIExpY2Vuc2U6IE1JVC9HUEx2MlxyXG4qICBTcGVjOiBodHRwOi8vcGljdHVyZS5yZXNwb25zaXZlaW1hZ2VzLm9yZy9cclxuKi9cclxuKGZ1bmN0aW9uKCB3LCBkb2MsIGltYWdlICkge1xyXG5cdC8vIEVuYWJsZSBzdHJpY3QgbW9kZVxyXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cclxuXHRmdW5jdGlvbiBleHBvc2UocGljdHVyZWZpbGwpIHtcclxuXHRcdC8qIGV4cG9zZSBwaWN0dXJlZmlsbCAqL1xyXG5cdFx0aWYgKCB0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJvYmplY3RcIiApIHtcclxuXHRcdFx0Ly8gQ29tbW9uSlMsIGp1c3QgZXhwb3J0XHJcblx0XHRcdG1vZHVsZS5leHBvcnRzID0gcGljdHVyZWZpbGw7XHJcblx0XHR9IGVsc2UgaWYgKCB0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCApIHtcclxuXHRcdFx0Ly8gQU1EIHN1cHBvcnRcclxuXHRcdFx0ZGVmaW5lKCBcInBpY3R1cmVmaWxsXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gcGljdHVyZWZpbGw7IH0gKTtcclxuXHRcdH1cclxuXHRcdGlmICggdHlwZW9mIHcgPT09IFwib2JqZWN0XCIgKSB7XHJcblx0XHRcdC8vIElmIG5vIEFNRCBhbmQgd2UgYXJlIGluIHRoZSBicm93c2VyLCBhdHRhY2ggdG8gd2luZG93XHJcblx0XHRcdHcucGljdHVyZWZpbGwgPSBwaWN0dXJlZmlsbDtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8vIElmIHBpY3R1cmUgaXMgc3VwcG9ydGVkLCB3ZWxsLCB0aGF0J3MgYXdlc29tZS4gTGV0J3MgZ2V0IG91dHRhIGhlcmUuLi5cclxuXHRpZiAoIHcuSFRNTFBpY3R1cmVFbGVtZW50ICkge1xyXG5cdFx0ZXhwb3NlKGZ1bmN0aW9uKCkgeyB9KTtcclxuXHRcdHJldHVybjtcclxuXHR9XHJcblxyXG5cdC8vIEhUTUwgc2hpbXx2IGl0IGZvciBvbGQgSUUgKElFOSB3aWxsIHN0aWxsIG5lZWQgdGhlIEhUTUwgdmlkZW8gdGFnIHdvcmthcm91bmQpXHJcblx0ZG9jLmNyZWF0ZUVsZW1lbnQoIFwicGljdHVyZVwiICk7XHJcblxyXG5cdC8vIGxvY2FsIG9iamVjdCBmb3IgbWV0aG9kIHJlZmVyZW5jZXMgYW5kIHRlc3RpbmcgZXhwb3N1cmVcclxuXHR2YXIgcGYgPSB3LnBpY3R1cmVmaWxsIHx8IHt9O1xyXG5cclxuXHR2YXIgcmVnV0Rlc2MgPSAvXFxzK1xcKz9cXGQrKGVcXGQrKT93LztcclxuXHJcblx0Ly8gbmFtZXNwYWNlXHJcblx0cGYubnMgPSBcInBpY3R1cmVmaWxsXCI7XHJcblxyXG5cdC8vIHNyY3NldCBzdXBwb3J0IHRlc3RcclxuXHQoZnVuY3Rpb24oKSB7XHJcblx0XHRwZi5zcmNzZXRTdXBwb3J0ZWQgPSBcInNyY3NldFwiIGluIGltYWdlO1xyXG5cdFx0cGYuc2l6ZXNTdXBwb3J0ZWQgPSBcInNpemVzXCIgaW4gaW1hZ2U7XHJcblx0XHRwZi5jdXJTcmNTdXBwb3J0ZWQgPSBcImN1cnJlbnRTcmNcIiBpbiBpbWFnZTtcclxuXHR9KSgpO1xyXG5cclxuXHQvLyBqdXN0IGEgc3RyaW5nIHRyaW0gd29ya2Fyb3VuZFxyXG5cdHBmLnRyaW0gPSBmdW5jdGlvbiggc3RyICkge1xyXG5cdFx0cmV0dXJuIHN0ci50cmltID8gc3RyLnRyaW0oKSA6IHN0ci5yZXBsYWNlKCAvXlxccyt8XFxzKyQvZywgXCJcIiApO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldHMgYSBzdHJpbmcgYW5kIHJldHVybnMgdGhlIGFic29sdXRlIFVSTFxyXG5cdCAqIEBwYXJhbSBzcmNcclxuXHQgKiBAcmV0dXJucyB7U3RyaW5nfSBhYnNvbHV0ZSBVUkxcclxuXHQgKi9cclxuXHRwZi5tYWtlVXJsID0gKGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGFuY2hvciA9IGRvYy5jcmVhdGVFbGVtZW50KCBcImFcIiApO1xyXG5cdFx0cmV0dXJuIGZ1bmN0aW9uKHNyYykge1xyXG5cdFx0XHRhbmNob3IuaHJlZiA9IHNyYztcclxuXHRcdFx0cmV0dXJuIGFuY2hvci5ocmVmO1xyXG5cdFx0fTtcclxuXHR9KSgpO1xyXG5cclxuXHQvKipcclxuXHQgKiBTaG9ydGN1dCBtZXRob2QgZm9yIGh0dHBzOi8vdzNjLmdpdGh1Yi5pby93ZWJhcHBzZWMvc3BlY3MvbWl4ZWRjb250ZW50LyNyZXN0cmljdHMtbWl4ZWQtY29udGVudCAoIGZvciBlYXN5IG92ZXJyaWRpbmcgaW4gdGVzdHMgKVxyXG5cdCAqL1xyXG5cdHBmLnJlc3RyaWN0c01peGVkQ29udGVudCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHcubG9jYXRpb24ucHJvdG9jb2wgPT09IFwiaHR0cHM6XCI7XHJcblx0fTtcclxuXHQvKipcclxuXHQgKiBTaG9ydGN1dCBtZXRob2QgZm9yIG1hdGNoTWVkaWEgKCBmb3IgZWFzeSBvdmVycmlkaW5nIGluIHRlc3RzIClcclxuXHQgKi9cclxuXHJcblx0cGYubWF0Y2hlc01lZGlhID0gZnVuY3Rpb24oIG1lZGlhICkge1xyXG5cdFx0cmV0dXJuIHcubWF0Y2hNZWRpYSAmJiB3Lm1hdGNoTWVkaWEoIG1lZGlhICkubWF0Y2hlcztcclxuXHR9O1xyXG5cclxuXHQvLyBTaG9ydGN1dCBtZXRob2QgZm9yIGBkZXZpY2VQaXhlbFJhdGlvYCAoIGZvciBlYXN5IG92ZXJyaWRpbmcgaW4gdGVzdHMgKVxyXG5cdHBmLmdldERwciA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuICggdy5kZXZpY2VQaXhlbFJhdGlvIHx8IDEgKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBHZXQgd2lkdGggaW4gY3NzIHBpeGVsIHZhbHVlIGZyb20gYSBcImxlbmd0aFwiIHZhbHVlXHJcblx0ICogaHR0cDovL2Rldi53My5vcmcvY3Nzd2cvY3NzLXZhbHVlcy0zLyNsZW5ndGgtdmFsdWVcclxuXHQgKi9cclxuXHRwZi5nZXRXaWR0aEZyb21MZW5ndGggPSBmdW5jdGlvbiggbGVuZ3RoICkge1xyXG5cdFx0dmFyIGNzc1ZhbHVlO1xyXG5cdFx0Ly8gSWYgYSBsZW5ndGggaXMgc3BlY2lmaWVkIGFuZCBkb2VzbuKAmXQgY29udGFpbiBhIHBlcmNlbnRhZ2UsIGFuZCBpdCBpcyBncmVhdGVyIHRoYW4gMCBvciB1c2luZyBgY2FsY2AsIHVzZSBpdC4gRWxzZSwgYWJvcnQuXHJcbiAgICAgICAgaWYgKCAhKGxlbmd0aCAmJiBsZW5ndGguaW5kZXhPZiggXCIlXCIgKSA+IC0xID09PSBmYWxzZSAmJiAoIHBhcnNlRmxvYXQoIGxlbmd0aCApID4gMCB8fCBsZW5ndGguaW5kZXhPZiggXCJjYWxjKFwiICkgPiAtMSApKSApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcblx0XHQvKipcclxuXHRcdCAqIElmIGxlbmd0aCBpcyBzcGVjaWZpZWQgaW4gIGB2d2AgdW5pdHMsIHVzZSBgJWAgaW5zdGVhZCBzaW5jZSB0aGUgZGl2IHdl4oCZcmUgbWVhc3VyaW5nXHJcblx0XHQgKiBpcyBpbmplY3RlZCBhdCB0aGUgdG9wIG9mIHRoZSBkb2N1bWVudC5cclxuXHRcdCAqXHJcblx0XHQgKiBUT0RPOiBtYXliZSB3ZSBzaG91bGQgcHV0IHRoaXMgYmVoaW5kIGEgZmVhdHVyZSB0ZXN0IGZvciBgdndgPyBUaGUgcmlzayBvZiBkb2luZyB0aGlzIGlzIHBvc3NpYmxlIGJyb3dzZXIgaW5jb25zaXN0YW5jaWVzIHdpdGggdncgdnMgJVxyXG5cdFx0ICovXHJcblx0XHRsZW5ndGggPSBsZW5ndGgucmVwbGFjZSggXCJ2d1wiLCBcIiVcIiApO1xyXG5cclxuXHRcdC8vIENyZWF0ZSBhIGNhY2hlZCBlbGVtZW50IGZvciBnZXR0aW5nIGxlbmd0aCB2YWx1ZSB3aWR0aHNcclxuXHRcdGlmICggIXBmLmxlbmd0aEVsICkge1xyXG5cdFx0XHRwZi5sZW5ndGhFbCA9IGRvYy5jcmVhdGVFbGVtZW50KCBcImRpdlwiICk7XHJcblxyXG5cdFx0XHQvLyBQb3NpdGlvbmluZyBzdHlsZXMgaGVscCBwcmV2ZW50IHBhZGRpbmcvbWFyZ2luL3dpZHRoIG9uIGBodG1sYCBvciBgYm9keWAgZnJvbSB0aHJvd2luZyBjYWxjdWxhdGlvbnMgb2ZmLlxyXG5cdFx0XHRwZi5sZW5ndGhFbC5zdHlsZS5jc3NUZXh0ID0gXCJib3JkZXI6MDtkaXNwbGF5OmJsb2NrO2ZvbnQtc2l6ZToxZW07bGVmdDowO21hcmdpbjowO3BhZGRpbmc6MDtwb3NpdGlvbjphYnNvbHV0ZTt2aXNpYmlsaXR5OmhpZGRlblwiO1xyXG5cclxuXHRcdFx0Ly8gQWRkIGEgY2xhc3MsIHNvIHRoYXQgZXZlcnlvbmUga25vd3Mgd2hlcmUgdGhpcyBlbGVtZW50IGNvbWVzIGZyb21cclxuXHRcdFx0cGYubGVuZ3RoRWwuY2xhc3NOYW1lID0gXCJoZWxwZXItZnJvbS1waWN0dXJlZmlsbC1qc1wiO1xyXG5cdFx0fVxyXG5cclxuXHRcdHBmLmxlbmd0aEVsLnN0eWxlLndpZHRoID0gXCIwcHhcIjtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuXHRcdCAgICBwZi5sZW5ndGhFbC5zdHlsZS53aWR0aCA9IGxlbmd0aDtcclxuICAgICAgICB9IGNhdGNoICggZSApIHt9XHJcblxyXG5cdFx0ZG9jLmJvZHkuYXBwZW5kQ2hpbGQocGYubGVuZ3RoRWwpO1xyXG5cclxuXHRcdGNzc1ZhbHVlID0gcGYubGVuZ3RoRWwub2Zmc2V0V2lkdGg7XHJcblxyXG5cdFx0aWYgKCBjc3NWYWx1ZSA8PSAwICkge1xyXG5cdFx0XHRjc3NWYWx1ZSA9IGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdGRvYy5ib2R5LnJlbW92ZUNoaWxkKCBwZi5sZW5ndGhFbCApO1xyXG5cclxuXHRcdHJldHVybiBjc3NWYWx1ZTtcclxuXHR9O1xyXG5cclxuICAgIHBmLmRldGVjdFR5cGVTdXBwb3J0ID0gZnVuY3Rpb24oIHR5cGUsIHR5cGVVcmkgKSB7XHJcbiAgICAgICAgLy8gYmFzZWQgb24gTW9kZXJuaXpyJ3MgbG9zc2xlc3MgaW1nLXdlYnAgdGVzdFxyXG4gICAgICAgIC8vIG5vdGU6IGFzeW5jaHJvbm91c1xyXG4gICAgICAgIHZhciBpbWFnZSA9IG5ldyB3LkltYWdlKCk7XHJcbiAgICAgICAgaW1hZ2Uub25lcnJvciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBwZi50eXBlc1sgdHlwZSBdID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHBpY3R1cmVmaWxsKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBpbWFnZS5vbmxvYWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcGYudHlwZXNbIHR5cGUgXSA9IGltYWdlLndpZHRoID09PSAxO1xyXG4gICAgICAgICAgICBwaWN0dXJlZmlsbCgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgaW1hZ2Uuc3JjID0gdHlwZVVyaTtcclxuXHJcbiAgICAgICAgcmV0dXJuIFwicGVuZGluZ1wiO1xyXG4gICAgfTtcclxuXHQvLyBjb250YWluZXIgb2Ygc3VwcG9ydGVkIG1pbWUgdHlwZXMgdGhhdCBvbmUgbWlnaHQgbmVlZCB0byBxdWFsaWZ5IGJlZm9yZSB1c2luZ1xyXG5cdHBmLnR5cGVzID0gcGYudHlwZXMgfHwge307XHJcblxyXG5cdHBmLmluaXRUeXBlRGV0ZWN0cyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vIEFkZCBzdXBwb3J0IGZvciBzdGFuZGFyZCBtaW1lIHR5cGVzXHJcbiAgICAgICAgcGYudHlwZXNbIFwiaW1hZ2UvanBlZ1wiIF0gPSB0cnVlO1xyXG4gICAgICAgIHBmLnR5cGVzWyBcImltYWdlL2dpZlwiIF0gPSB0cnVlO1xyXG4gICAgICAgIHBmLnR5cGVzWyBcImltYWdlL3BuZ1wiIF0gPSB0cnVlO1xyXG4gICAgICAgIHBmLnR5cGVzWyBcImltYWdlL3N2Zyt4bWxcIiBdID0gZG9jLmltcGxlbWVudGF0aW9uLmhhc0ZlYXR1cmUoXCJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0ltYWdlXCIsIFwiMS4xXCIpO1xyXG4gICAgICAgIHBmLnR5cGVzWyBcImltYWdlL3dlYnBcIiBdID0gcGYuZGV0ZWN0VHlwZVN1cHBvcnQoXCJpbWFnZS93ZWJwXCIsIFwiZGF0YTppbWFnZS93ZWJwO2Jhc2U2NCxVa2xHUmg0QUFBQlhSVUpRVmxBNFRCRUFBQUF2QUFBQUFBZlEvLzczdi8rQmlPaC9BQUE9XCIpO1xyXG4gICAgfTtcclxuXHJcblx0cGYudmVyaWZ5VHlwZVN1cHBvcnQgPSBmdW5jdGlvbiggc291cmNlICkge1xyXG5cdFx0dmFyIHR5cGUgPSBzb3VyY2UuZ2V0QXR0cmlidXRlKCBcInR5cGVcIiApO1xyXG5cdFx0Ly8gaWYgdHlwZSBhdHRyaWJ1dGUgZXhpc3RzLCByZXR1cm4gdGVzdCByZXN1bHQsIG90aGVyd2lzZSByZXR1cm4gdHJ1ZVxyXG5cdFx0aWYgKCB0eXBlID09PSBudWxsIHx8IHR5cGUgPT09IFwiXCIgKSB7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR2YXIgcGZUeXBlID0gcGYudHlwZXNbIHR5cGUgXTtcclxuXHRcdFx0Ly8gaWYgdGhlIHR5cGUgdGVzdCBpcyBhIGZ1bmN0aW9uLCBydW4gaXQgYW5kIHJldHVybiBcInBlbmRpbmdcIiBzdGF0dXMuIFRoZSBmdW5jdGlvbiB3aWxsIHJlcnVuIHBpY3R1cmVmaWxsIG9uIHBlbmRpbmcgZWxlbWVudHMgb25jZSBmaW5pc2hlZC5cclxuXHRcdFx0aWYgKCB0eXBlb2YgcGZUeXBlID09PSBcInN0cmluZ1wiICYmIHBmVHlwZSAhPT0gXCJwZW5kaW5nXCIpIHtcclxuXHRcdFx0XHRwZi50eXBlc1sgdHlwZSBdID0gcGYuZGV0ZWN0VHlwZVN1cHBvcnQoIHR5cGUsIHBmVHlwZSApO1xyXG5cdFx0XHRcdHJldHVybiBcInBlbmRpbmdcIjtcclxuXHRcdFx0fSBlbHNlIGlmICggdHlwZW9mIHBmVHlwZSA9PT0gXCJmdW5jdGlvblwiICkge1xyXG5cdFx0XHRcdHBmVHlwZSgpO1xyXG5cdFx0XHRcdHJldHVybiBcInBlbmRpbmdcIjtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRyZXR1cm4gcGZUeXBlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0Ly8gUGFyc2VzIGFuIGluZGl2aWR1YWwgYHNpemVgIGFuZCByZXR1cm5zIHRoZSBsZW5ndGgsIGFuZCBvcHRpb25hbCBtZWRpYSBxdWVyeVxyXG5cdHBmLnBhcnNlU2l6ZSA9IGZ1bmN0aW9uKCBzb3VyY2VTaXplU3RyICkge1xyXG5cdFx0dmFyIG1hdGNoID0gLyhcXChbXildK1xcKSk/XFxzKiguKykvZy5leGVjKCBzb3VyY2VTaXplU3RyICk7XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRtZWRpYTogbWF0Y2ggJiYgbWF0Y2hbMV0sXHJcblx0XHRcdGxlbmd0aDogbWF0Y2ggJiYgbWF0Y2hbMl1cclxuXHRcdH07XHJcblx0fTtcclxuXHJcblx0Ly8gVGFrZXMgYSBzdHJpbmcgb2Ygc2l6ZXMgYW5kIHJldHVybnMgdGhlIHdpZHRoIGluIHBpeGVscyBhcyBhIG51bWJlclxyXG5cdHBmLmZpbmRXaWR0aEZyb21Tb3VyY2VTaXplID0gZnVuY3Rpb24oIHNvdXJjZVNpemVMaXN0U3RyICkge1xyXG5cdFx0Ly8gU3BsaXQgdXAgc291cmNlIHNpemUgbGlzdCwgaWUgKCBtYXgtd2lkdGg6IDMwZW0gKSAxMDAlLCAoIG1heC13aWR0aDogNTBlbSApIDUwJSwgMzMlXHJcblx0XHQvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICBvciAobWluLXdpZHRoOjMwZW0pIGNhbGMoMzAlIC0gMTVweClcclxuXHRcdHZhciBzb3VyY2VTaXplTGlzdCA9IHBmLnRyaW0oIHNvdXJjZVNpemVMaXN0U3RyICkuc3BsaXQoIC9cXHMqLFxccyovICksXHJcblx0XHRcdHdpbm5pbmdMZW5ndGg7XHJcblxyXG5cdFx0Zm9yICggdmFyIGkgPSAwLCBsZW4gPSBzb3VyY2VTaXplTGlzdC5sZW5ndGg7IGkgPCBsZW47IGkrKyApIHtcclxuXHRcdFx0Ly8gTWF0Y2ggPG1lZGlhLWNvbmRpdGlvbj4/IGxlbmd0aCwgaWUgKCBtaW4td2lkdGg6IDUwZW0gKSAxMDAlXHJcblx0XHRcdHZhciBzb3VyY2VTaXplID0gc291cmNlU2l6ZUxpc3RbIGkgXSxcclxuXHRcdFx0XHQvLyBTcGxpdCBcIiggbWluLXdpZHRoOiA1MGVtICkgMTAwJVwiIGludG8gc2VwYXJhdGUgc3RyaW5nc1xyXG5cdFx0XHRcdHBhcnNlZFNpemUgPSBwZi5wYXJzZVNpemUoIHNvdXJjZVNpemUgKSxcclxuXHRcdFx0XHRsZW5ndGggPSBwYXJzZWRTaXplLmxlbmd0aCxcclxuXHRcdFx0XHRtZWRpYSA9IHBhcnNlZFNpemUubWVkaWE7XHJcblxyXG5cdFx0XHRpZiAoICFsZW5ndGggKSB7XHJcblx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdH1cclxuXHRcdFx0Ly8gaWYgdGhlcmUgaXMgbm8gbWVkaWEgcXVlcnkgb3IgaXQgbWF0Y2hlcywgY2hvb3NlIHRoaXMgYXMgb3VyIHdpbm5pbmcgbGVuZ3RoXHJcblx0XHRcdGlmICggKCFtZWRpYSB8fCBwZi5tYXRjaGVzTWVkaWEoIG1lZGlhICkpICYmXHJcblx0XHRcdFx0Ly8gcGFzcyB0aGUgbGVuZ3RoIHRvIGEgbWV0aG9kIHRoYXQgY2FuIHByb3Blcmx5IGRldGVybWluZSBsZW5ndGhcclxuXHRcdFx0XHQvLyBpbiBwaXhlbHMgYmFzZWQgb24gdGhlc2UgZm9ybWF0czogaHR0cDovL2Rldi53My5vcmcvY3Nzd2cvY3NzLXZhbHVlcy0zLyNsZW5ndGgtdmFsdWVcclxuXHRcdFx0XHQod2lubmluZ0xlbmd0aCA9IHBmLmdldFdpZHRoRnJvbUxlbmd0aCggbGVuZ3RoICkpICkge1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly9pZiB3ZSBoYXZlIG5vIHdpbm5pbmdMZW5ndGggZmFsbGJhY2sgdG8gMTAwdndcclxuXHRcdHJldHVybiB3aW5uaW5nTGVuZ3RoIHx8IE1hdGgubWF4KHcuaW5uZXJXaWR0aCB8fCAwLCBkb2MuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoKTtcclxuXHR9O1xyXG5cclxuXHRwZi5wYXJzZVNyY3NldCA9IGZ1bmN0aW9uKCBzcmNzZXQgKSB7XHJcblx0XHQvKipcclxuXHRcdCAqIEEgbG90IG9mIHRoaXMgd2FzIHB1bGxlZCBmcm9tIEJvcmlzIFNtdXPigJkgcGFyc2VyIGZvciB0aGUgbm93LWRlZnVuY3QgV0hBVFdHIGBzcmNzZXRgXHJcblx0XHQgKiBodHRwczovL2dpdGh1Yi5jb20vYm9yaXNtdXMvc3Jjc2V0LXBvbHlmaWxsL2Jsb2IvbWFzdGVyL2pzL3NyY3NldC1pbmZvLmpzXHJcblx0XHQgKlxyXG5cdFx0ICogMS4gTGV0IGlucHV0IChgc3Jjc2V0YCkgYmUgdGhlIHZhbHVlIHBhc3NlZCB0byB0aGlzIGFsZ29yaXRobS5cclxuXHRcdCAqIDIuIExldCBwb3NpdGlvbiBiZSBhIHBvaW50ZXIgaW50byBpbnB1dCwgaW5pdGlhbGx5IHBvaW50aW5nIGF0IHRoZSBzdGFydCBvZiB0aGUgc3RyaW5nLlxyXG5cdFx0ICogMy4gTGV0IHJhdyBjYW5kaWRhdGVzIGJlIGFuIGluaXRpYWxseSBlbXB0eSBvcmRlcmVkIGxpc3Qgb2YgVVJMcyB3aXRoIGFzc29jaWF0ZWRcclxuXHRcdCAqICAgIHVucGFyc2VkIGRlc2NyaXB0b3JzLiBUaGUgb3JkZXIgb2YgZW50cmllcyBpbiB0aGUgbGlzdCBpcyB0aGUgb3JkZXIgaW4gd2hpY2ggZW50cmllc1xyXG5cdFx0ICogICAgYXJlIGFkZGVkIHRvIHRoZSBsaXN0LlxyXG5cdFx0ICovXHJcblx0XHR2YXIgY2FuZGlkYXRlcyA9IFtdO1xyXG5cclxuXHRcdHdoaWxlICggc3Jjc2V0ICE9PSBcIlwiICkge1xyXG5cdFx0XHRzcmNzZXQgPSBzcmNzZXQucmVwbGFjZSggL15cXHMrL2csIFwiXCIgKTtcclxuXHJcblx0XHRcdC8vIDUuIENvbGxlY3QgYSBzZXF1ZW5jZSBvZiBjaGFyYWN0ZXJzIHRoYXQgYXJlIG5vdCBzcGFjZSBjaGFyYWN0ZXJzLCBhbmQgbGV0IHRoYXQgYmUgdXJsLlxyXG5cdFx0XHR2YXIgcG9zID0gc3Jjc2V0LnNlYXJjaCgvXFxzL2cpLFxyXG5cdFx0XHRcdHVybCwgZGVzY3JpcHRvciA9IG51bGw7XHJcblxyXG5cdFx0XHRpZiAoIHBvcyAhPT0gLTEgKSB7XHJcblx0XHRcdFx0dXJsID0gc3Jjc2V0LnNsaWNlKCAwLCBwb3MgKTtcclxuXHJcblx0XHRcdFx0dmFyIGxhc3QgPSB1cmwuc2xpY2UoLTEpO1xyXG5cclxuXHRcdFx0XHQvLyA2LiBJZiB1cmwgZW5kcyB3aXRoIGEgVSswMDJDIENPTU1BIGNoYXJhY3RlciAoLCksIHJlbW92ZSB0aGF0IGNoYXJhY3RlciBmcm9tIHVybFxyXG5cdFx0XHRcdC8vIGFuZCBsZXQgZGVzY3JpcHRvcnMgYmUgdGhlIGVtcHR5IHN0cmluZy4gT3RoZXJ3aXNlLCBmb2xsb3cgdGhlc2Ugc3Vic3RlcHNcclxuXHRcdFx0XHQvLyA2LjEuIElmIHVybCBpcyBlbXB0eSwgdGhlbiBqdW1wIHRvIHRoZSBzdGVwIGxhYmVsZWQgZGVzY3JpcHRvciBwYXJzZXIuXHJcblxyXG5cdFx0XHRcdGlmICggbGFzdCA9PT0gXCIsXCIgfHwgdXJsID09PSBcIlwiICkge1xyXG5cdFx0XHRcdFx0dXJsID0gdXJsLnJlcGxhY2UoIC8sKyQvLCBcIlwiICk7XHJcblx0XHRcdFx0XHRkZXNjcmlwdG9yID0gXCJcIjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0c3Jjc2V0ID0gc3Jjc2V0LnNsaWNlKCBwb3MgKyAxICk7XHJcblxyXG5cdFx0XHRcdC8vIDYuMi4gQ29sbGVjdCBhIHNlcXVlbmNlIG9mIGNoYXJhY3RlcnMgdGhhdCBhcmUgbm90IFUrMDAyQyBDT01NQSBjaGFyYWN0ZXJzICgsKSwgYW5kXHJcblx0XHRcdFx0Ly8gbGV0IHRoYXQgYmUgZGVzY3JpcHRvcnMuXHJcblx0XHRcdFx0aWYgKCBkZXNjcmlwdG9yID09PSBudWxsICkge1xyXG5cdFx0XHRcdFx0dmFyIGRlc2Nwb3MgPSBzcmNzZXQuaW5kZXhPZiggXCIsXCIgKTtcclxuXHRcdFx0XHRcdGlmICggZGVzY3BvcyAhPT0gLTEgKSB7XHJcblx0XHRcdFx0XHRcdGRlc2NyaXB0b3IgPSBzcmNzZXQuc2xpY2UoIDAsIGRlc2Nwb3MgKTtcclxuXHRcdFx0XHRcdFx0c3Jjc2V0ID0gc3Jjc2V0LnNsaWNlKCBkZXNjcG9zICsgMSApO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0ZGVzY3JpcHRvciA9IHNyY3NldDtcclxuXHRcdFx0XHRcdFx0c3Jjc2V0ID0gXCJcIjtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dXJsID0gc3Jjc2V0O1xyXG5cdFx0XHRcdHNyY3NldCA9IFwiXCI7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIDcuIEFkZCB1cmwgdG8gcmF3IGNhbmRpZGF0ZXMsIGFzc29jaWF0ZWQgd2l0aCBkZXNjcmlwdG9ycy5cclxuXHRcdFx0aWYgKCB1cmwgfHwgZGVzY3JpcHRvciApIHtcclxuXHRcdFx0XHRjYW5kaWRhdGVzLnB1c2goe1xyXG5cdFx0XHRcdFx0dXJsOiB1cmwsXHJcblx0XHRcdFx0XHRkZXNjcmlwdG9yOiBkZXNjcmlwdG9yXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHJldHVybiBjYW5kaWRhdGVzO1xyXG5cdH07XHJcblxyXG5cdHBmLnBhcnNlRGVzY3JpcHRvciA9IGZ1bmN0aW9uKCBkZXNjcmlwdG9yLCBzaXplc2F0dHIgKSB7XHJcblx0XHQvLyAxMS4gRGVzY3JpcHRvciBwYXJzZXI6IExldCBjYW5kaWRhdGVzIGJlIGFuIGluaXRpYWxseSBlbXB0eSBzb3VyY2Ugc2V0LiBUaGUgb3JkZXIgb2YgZW50cmllcyBpbiB0aGUgbGlzdFxyXG5cdFx0Ly8gaXMgdGhlIG9yZGVyIGluIHdoaWNoIGVudHJpZXMgYXJlIGFkZGVkIHRvIHRoZSBsaXN0LlxyXG5cdFx0dmFyIHNpemVzID0gc2l6ZXNhdHRyIHx8IFwiMTAwdndcIixcclxuXHRcdFx0c2l6ZURlc2NyaXB0b3IgPSBkZXNjcmlwdG9yICYmIGRlc2NyaXB0b3IucmVwbGFjZSggLyheXFxzK3xcXHMrJCkvZywgXCJcIiApLFxyXG5cdFx0XHR3aWR0aEluQ3NzUGl4ZWxzID0gcGYuZmluZFdpZHRoRnJvbVNvdXJjZVNpemUoIHNpemVzICksXHJcblx0XHRcdHJlc0NhbmRpZGF0ZTtcclxuXHJcblx0XHRcdGlmICggc2l6ZURlc2NyaXB0b3IgKSB7XHJcblx0XHRcdFx0dmFyIHNwbGl0RGVzY3JpcHRvciA9IHNpemVEZXNjcmlwdG9yLnNwbGl0KFwiIFwiKTtcclxuXHJcblx0XHRcdFx0Zm9yICh2YXIgaSA9IHNwbGl0RGVzY3JpcHRvci5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG5cdFx0XHRcdFx0dmFyIGN1cnIgPSBzcGxpdERlc2NyaXB0b3JbIGkgXSxcclxuXHRcdFx0XHRcdFx0bGFzdGNoYXIgPSBjdXJyICYmIGN1cnIuc2xpY2UoIGN1cnIubGVuZ3RoIC0gMSApO1xyXG5cclxuXHRcdFx0XHRcdGlmICggKCBsYXN0Y2hhciA9PT0gXCJoXCIgfHwgbGFzdGNoYXIgPT09IFwid1wiICkgJiYgIXBmLnNpemVzU3VwcG9ydGVkICkge1xyXG5cdFx0XHRcdFx0XHRyZXNDYW5kaWRhdGUgPSBwYXJzZUZsb2F0KCAoIHBhcnNlSW50KCBjdXJyLCAxMCApIC8gd2lkdGhJbkNzc1BpeGVscyApICk7XHJcblx0XHRcdFx0XHR9IGVsc2UgaWYgKCBsYXN0Y2hhciA9PT0gXCJ4XCIgKSB7XHJcblx0XHRcdFx0XHRcdHZhciByZXMgPSBjdXJyICYmIHBhcnNlRmxvYXQoIGN1cnIsIDEwICk7XHJcblx0XHRcdFx0XHRcdHJlc0NhbmRpZGF0ZSA9IHJlcyAmJiAhaXNOYU4oIHJlcyApID8gcmVzIDogMTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdHJldHVybiByZXNDYW5kaWRhdGUgfHwgMTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBUYWtlcyBhIHNyY3NldCBpbiB0aGUgZm9ybSBvZiB1cmwvXHJcblx0ICogZXguIFwiaW1hZ2VzL3BpYy1tZWRpdW0ucG5nIDF4LCBpbWFnZXMvcGljLW1lZGl1bS0yeC5wbmcgMnhcIiBvclxyXG5cdCAqICAgICBcImltYWdlcy9waWMtbWVkaXVtLnBuZyA0MDB3LCBpbWFnZXMvcGljLW1lZGl1bS0yeC5wbmcgODAwd1wiIG9yXHJcblx0ICogICAgIFwiaW1hZ2VzL3BpYy1zbWFsbC5wbmdcIlxyXG5cdCAqIEdldCBhbiBhcnJheSBvZiBpbWFnZSBjYW5kaWRhdGVzIGluIHRoZSBmb3JtIG9mXHJcblx0ICogICAgICB7dXJsOiBcIi9mb28vYmFyLnBuZ1wiLCByZXNvbHV0aW9uOiAxfVxyXG5cdCAqIHdoZXJlIHJlc29sdXRpb24gaXMgaHR0cDovL2Rldi53My5vcmcvY3Nzd2cvY3NzLXZhbHVlcy0zLyNyZXNvbHV0aW9uLXZhbHVlXHJcblx0ICogSWYgc2l6ZXMgaXMgc3BlY2lmaWVkLCByZXNvbHV0aW9uIGlzIGNhbGN1bGF0ZWRcclxuXHQgKi9cclxuXHRwZi5nZXRDYW5kaWRhdGVzRnJvbVNvdXJjZVNldCA9IGZ1bmN0aW9uKCBzcmNzZXQsIHNpemVzICkge1xyXG5cdFx0dmFyIGNhbmRpZGF0ZXMgPSBwZi5wYXJzZVNyY3NldCggc3Jjc2V0ICksXHJcblx0XHRcdGZvcm1hdHRlZENhbmRpZGF0ZXMgPSBbXTtcclxuXHJcblx0XHRmb3IgKCB2YXIgaSA9IDAsIGxlbiA9IGNhbmRpZGF0ZXMubGVuZ3RoOyBpIDwgbGVuOyBpKysgKSB7XHJcblx0XHRcdHZhciBjYW5kaWRhdGUgPSBjYW5kaWRhdGVzWyBpIF07XHJcblxyXG5cdFx0XHRmb3JtYXR0ZWRDYW5kaWRhdGVzLnB1c2goe1xyXG5cdFx0XHRcdHVybDogY2FuZGlkYXRlLnVybCxcclxuXHRcdFx0XHRyZXNvbHV0aW9uOiBwZi5wYXJzZURlc2NyaXB0b3IoIGNhbmRpZGF0ZS5kZXNjcmlwdG9yLCBzaXplcyApXHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGZvcm1hdHRlZENhbmRpZGF0ZXM7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogaWYgaXQncyBhbiBpbWcgZWxlbWVudCBhbmQgaXQgaGFzIGEgc3Jjc2V0IHByb3BlcnR5LFxyXG5cdCAqIHdlIG5lZWQgdG8gcmVtb3ZlIHRoZSBhdHRyaWJ1dGUgc28gd2UgY2FuIG1hbmlwdWxhdGUgc3JjXHJcblx0ICogKHRoZSBwcm9wZXJ0eSdzIGV4aXN0ZW5jZSBpbmZlcnMgbmF0aXZlIHNyY3NldCBzdXBwb3J0LCBhbmQgYSBzcmNzZXQtc3VwcG9ydGluZyBicm93c2VyIHdpbGwgcHJpb3JpdGl6ZSBzcmNzZXQncyB2YWx1ZSBvdmVyIG91ciB3aW5uaW5nIHBpY3R1cmUgY2FuZGlkYXRlKVxyXG5cdCAqIHRoaXMgbW92ZXMgc3Jjc2V0J3MgdmFsdWUgdG8gbWVtb3J5IGZvciBsYXRlciB1c2UgYW5kIHJlbW92ZXMgdGhlIGF0dHJcclxuXHQgKi9cclxuXHRwZi5kb2RnZVNyY3NldCA9IGZ1bmN0aW9uKCBpbWcgKSB7XHJcblx0XHRpZiAoIGltZy5zcmNzZXQgKSB7XHJcblx0XHRcdGltZ1sgcGYubnMgXS5zcmNzZXQgPSBpbWcuc3Jjc2V0O1xyXG5cdFx0XHRpbWcuc3Jjc2V0ID0gXCJcIjtcclxuXHRcdFx0aW1nLnNldEF0dHJpYnV0ZSggXCJkYXRhLXBmc3Jjc2V0XCIsIGltZ1sgcGYubnMgXS5zcmNzZXQgKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQvLyBBY2NlcHQgYSBzb3VyY2Ugb3IgaW1nIGVsZW1lbnQgYW5kIHByb2Nlc3MgaXRzIHNyY3NldCBhbmQgc2l6ZXMgYXR0cnNcclxuXHRwZi5wcm9jZXNzU291cmNlU2V0ID0gZnVuY3Rpb24oIGVsICkge1xyXG5cdFx0dmFyIHNyY3NldCA9IGVsLmdldEF0dHJpYnV0ZSggXCJzcmNzZXRcIiApLFxyXG5cdFx0XHRzaXplcyA9IGVsLmdldEF0dHJpYnV0ZSggXCJzaXplc1wiICksXHJcblx0XHRcdGNhbmRpZGF0ZXMgPSBbXTtcclxuXHJcblx0XHQvLyBpZiBpdCdzIGFuIGltZyBlbGVtZW50LCB1c2UgdGhlIGNhY2hlZCBzcmNzZXQgcHJvcGVydHkgKGRlZmluZWQgb3Igbm90KVxyXG5cdFx0aWYgKCBlbC5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpID09PSBcIklNR1wiICYmIGVsWyBwZi5ucyBdICYmIGVsWyBwZi5ucyBdLnNyY3NldCApIHtcclxuXHRcdFx0c3Jjc2V0ID0gZWxbIHBmLm5zIF0uc3Jjc2V0O1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggc3Jjc2V0ICkge1xyXG5cdFx0XHRjYW5kaWRhdGVzID0gcGYuZ2V0Q2FuZGlkYXRlc0Zyb21Tb3VyY2VTZXQoIHNyY3NldCwgc2l6ZXMgKTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBjYW5kaWRhdGVzO1xyXG5cdH07XHJcblxyXG5cdHBmLmJhY2tmYWNlVmlzaWJpbGl0eUZpeCA9IGZ1bmN0aW9uKCBwaWNJbWcgKSB7XHJcblx0XHQvLyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9zY290dGplaGwvcGljdHVyZWZpbGwvaXNzdWVzLzMzMlxyXG5cdFx0dmFyIHN0eWxlID0gcGljSW1nLnN0eWxlIHx8IHt9LFxyXG5cdFx0XHRXZWJraXRCYWNrZmFjZVZpc2liaWxpdHkgPSBcIndlYmtpdEJhY2tmYWNlVmlzaWJpbGl0eVwiIGluIHN0eWxlLFxyXG5cdFx0XHRjdXJyZW50Wm9vbSA9IHN0eWxlLnpvb207XHJcblxyXG5cdFx0aWYgKFdlYmtpdEJhY2tmYWNlVmlzaWJpbGl0eSkge1xyXG5cdFx0XHRzdHlsZS56b29tID0gXCIuOTk5XCI7XHJcblxyXG5cdFx0XHRXZWJraXRCYWNrZmFjZVZpc2liaWxpdHkgPSBwaWNJbWcub2Zmc2V0V2lkdGg7XHJcblxyXG5cdFx0XHRzdHlsZS56b29tID0gY3VycmVudFpvb207XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0cGYuc2V0SW50cmluc2ljU2l6ZSA9IChmdW5jdGlvbigpIHtcclxuXHRcdHZhciB1cmxDYWNoZSA9IHt9O1xyXG5cdFx0dmFyIHNldFNpemUgPSBmdW5jdGlvbiggcGljSW1nLCB3aWR0aCwgcmVzICkge1xyXG4gICAgICAgICAgICBpZiAoIHdpZHRoICkge1xyXG5cdFx0XHQgICAgcGljSW1nLnNldEF0dHJpYnV0ZSggXCJ3aWR0aFwiLCBwYXJzZUludCh3aWR0aCAvIHJlcywgMTApICk7XHJcbiAgICAgICAgICAgIH1cclxuXHRcdH07XHJcblx0XHRyZXR1cm4gZnVuY3Rpb24oIHBpY0ltZywgYmVzdENhbmRpZGF0ZSApIHtcclxuXHRcdFx0dmFyIGltZztcclxuXHRcdFx0aWYgKCAhcGljSW1nWyBwZi5ucyBdIHx8IHcucGZTdG9wSW50cmluc2ljU2l6ZSApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCBwaWNJbWdbIHBmLm5zIF0uZGltcyA9PT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdHBpY0ltZ1sgcGYubnNdLmRpbXMgPSBwaWNJbWcuZ2V0QXR0cmlidXRlKFwid2lkdGhcIikgfHwgcGljSW1nLmdldEF0dHJpYnV0ZShcImhlaWdodFwiKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIHBpY0ltZ1sgcGYubnNdLmRpbXMgKSB7IHJldHVybjsgfVxyXG5cclxuXHRcdFx0aWYgKCBiZXN0Q2FuZGlkYXRlLnVybCBpbiB1cmxDYWNoZSApIHtcclxuXHRcdFx0XHRzZXRTaXplKCBwaWNJbWcsIHVybENhY2hlW2Jlc3RDYW5kaWRhdGUudXJsXSwgYmVzdENhbmRpZGF0ZS5yZXNvbHV0aW9uICk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0aW1nID0gZG9jLmNyZWF0ZUVsZW1lbnQoIFwiaW1nXCIgKTtcclxuXHRcdFx0XHRpbWcub25sb2FkID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHR1cmxDYWNoZVtiZXN0Q2FuZGlkYXRlLnVybF0gPSBpbWcud2lkdGg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vSUUgMTAvMTEgZG9uJ3QgY2FsY3VsYXRlIHdpZHRoIGZvciBzdmcgb3V0c2lkZSBkb2N1bWVudFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggIXVybENhY2hlW2Jlc3RDYW5kaWRhdGUudXJsXSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5ib2R5LmFwcGVuZENoaWxkKCBpbWcgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybENhY2hlW2Jlc3RDYW5kaWRhdGUudXJsXSA9IGltZy53aWR0aCB8fCBpbWcub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuYm9keS5yZW1vdmVDaGlsZCggaW1nICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2goZSl7fVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcblx0XHRcdFx0XHRpZiAoIHBpY0ltZy5zcmMgPT09IGJlc3RDYW5kaWRhdGUudXJsICkge1xyXG5cdFx0XHRcdFx0XHRzZXRTaXplKCBwaWNJbWcsIHVybENhY2hlW2Jlc3RDYW5kaWRhdGUudXJsXSwgYmVzdENhbmRpZGF0ZS5yZXNvbHV0aW9uICk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRwaWNJbWcgPSBudWxsO1xyXG5cdFx0XHRcdFx0aW1nLm9ubG9hZCA9IG51bGw7XHJcblx0XHRcdFx0XHRpbWcgPSBudWxsO1xyXG5cdFx0XHRcdH07XHJcblx0XHRcdFx0aW1nLnNyYyA9IGJlc3RDYW5kaWRhdGUudXJsO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cdH0pKCk7XHJcblxyXG5cdHBmLmFwcGx5QmVzdENhbmRpZGF0ZSA9IGZ1bmN0aW9uKCBjYW5kaWRhdGVzLCBwaWNJbWcgKSB7XHJcblx0XHR2YXIgY2FuZGlkYXRlLFxyXG5cdFx0XHRsZW5ndGgsXHJcblx0XHRcdGJlc3RDYW5kaWRhdGU7XHJcblxyXG5cdFx0Y2FuZGlkYXRlcy5zb3J0KCBwZi5hc2NlbmRpbmdTb3J0ICk7XHJcblxyXG5cdFx0bGVuZ3RoID0gY2FuZGlkYXRlcy5sZW5ndGg7XHJcblx0XHRiZXN0Q2FuZGlkYXRlID0gY2FuZGlkYXRlc1sgbGVuZ3RoIC0gMSBdO1xyXG5cclxuXHRcdGZvciAoIHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrICkge1xyXG5cdFx0XHRjYW5kaWRhdGUgPSBjYW5kaWRhdGVzWyBpIF07XHJcblx0XHRcdGlmICggY2FuZGlkYXRlLnJlc29sdXRpb24gPj0gcGYuZ2V0RHByKCkgKSB7XHJcblx0XHRcdFx0YmVzdENhbmRpZGF0ZSA9IGNhbmRpZGF0ZTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggYmVzdENhbmRpZGF0ZSApIHtcclxuXHJcblx0XHRcdGJlc3RDYW5kaWRhdGUudXJsID0gcGYubWFrZVVybCggYmVzdENhbmRpZGF0ZS51cmwgKTtcclxuXHJcblx0XHRcdGlmICggcGljSW1nLnNyYyAhPT0gYmVzdENhbmRpZGF0ZS51cmwgKSB7XHJcblx0XHRcdFx0aWYgKCBwZi5yZXN0cmljdHNNaXhlZENvbnRlbnQoKSAmJiBiZXN0Q2FuZGlkYXRlLnVybC5zdWJzdHIoMCwgXCJodHRwOlwiLmxlbmd0aCkudG9Mb3dlckNhc2UoKSA9PT0gXCJodHRwOlwiICkge1xyXG5cdFx0XHRcdFx0aWYgKCB3aW5kb3cuY29uc29sZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdFx0XHRjb25zb2xlLndhcm4oIFwiQmxvY2tlZCBtaXhlZCBjb250ZW50IGltYWdlIFwiICsgYmVzdENhbmRpZGF0ZS51cmwgKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0cGljSW1nLnNyYyA9IGJlc3RDYW5kaWRhdGUudXJsO1xyXG5cdFx0XHRcdFx0Ly8gY3VycmVudFNyYyBhdHRyaWJ1dGUgYW5kIHByb3BlcnR5IHRvIG1hdGNoXHJcblx0XHRcdFx0XHQvLyBodHRwOi8vcGljdHVyZS5yZXNwb25zaXZlaW1hZ2VzLm9yZy8jdGhlLWltZy1lbGVtZW50XHJcblx0XHRcdFx0XHRpZiAoICFwZi5jdXJTcmNTdXBwb3J0ZWQgKSB7XHJcblx0XHRcdFx0XHRcdHBpY0ltZy5jdXJyZW50U3JjID0gcGljSW1nLnNyYztcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRwZi5iYWNrZmFjZVZpc2liaWxpdHlGaXgoIHBpY0ltZyApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cGYuc2V0SW50cmluc2ljU2l6ZShwaWNJbWcsIGJlc3RDYW5kaWRhdGUpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdHBmLmFzY2VuZGluZ1NvcnQgPSBmdW5jdGlvbiggYSwgYiApIHtcclxuXHRcdHJldHVybiBhLnJlc29sdXRpb24gLSBiLnJlc29sdXRpb247XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogSW4gSUU5LCA8c291cmNlPiBlbGVtZW50cyBnZXQgcmVtb3ZlZCBpZiB0aGV5IGFyZW4ndCBjaGlsZHJlbiBvZlxyXG5cdCAqIHZpZGVvIGVsZW1lbnRzLiBUaHVzLCB3ZSBjb25kaXRpb25hbGx5IHdyYXAgc291cmNlIGVsZW1lbnRzXHJcblx0ICogdXNpbmcgPCEtLVtpZiBJRSA5XT48dmlkZW8gc3R5bGU9XCJkaXNwbGF5OiBub25lO1wiPjwhW2VuZGlmXS0tPlxyXG5cdCAqIGFuZCBtdXN0IGFjY291bnQgZm9yIHRoYXQgaGVyZSBieSBtb3ZpbmcgdGhvc2Ugc291cmNlIGVsZW1lbnRzXHJcblx0ICogYmFjayBpbnRvIHRoZSBwaWN0dXJlIGVsZW1lbnQuXHJcblx0ICovXHJcblx0cGYucmVtb3ZlVmlkZW9TaGltID0gZnVuY3Rpb24oIHBpY3R1cmUgKSB7XHJcblx0XHR2YXIgdmlkZW9zID0gcGljdHVyZS5nZXRFbGVtZW50c0J5VGFnTmFtZSggXCJ2aWRlb1wiICk7XHJcblx0XHRpZiAoIHZpZGVvcy5sZW5ndGggKSB7XHJcblx0XHRcdHZhciB2aWRlbyA9IHZpZGVvc1sgMCBdLFxyXG5cdFx0XHRcdHZzb3VyY2VzID0gdmlkZW8uZ2V0RWxlbWVudHNCeVRhZ05hbWUoIFwic291cmNlXCIgKTtcclxuXHRcdFx0d2hpbGUgKCB2c291cmNlcy5sZW5ndGggKSB7XHJcblx0XHRcdFx0cGljdHVyZS5pbnNlcnRCZWZvcmUoIHZzb3VyY2VzWyAwIF0sIHZpZGVvICk7XHJcblx0XHRcdH1cclxuXHRcdFx0Ly8gUmVtb3ZlIHRoZSB2aWRlbyBlbGVtZW50IG9uY2Ugd2UncmUgZmluaXNoZWQgcmVtb3ZpbmcgaXRzIGNoaWxkcmVuXHJcblx0XHRcdHZpZGVvLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoIHZpZGVvICk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogRmluZCBhbGwgYGltZ2AgZWxlbWVudHMsIGFuZCBhZGQgdGhlbSB0byB0aGUgY2FuZGlkYXRlIGxpc3QgaWYgdGhleSBoYXZlXHJcblx0ICogYSBgcGljdHVyZWAgcGFyZW50LCBhIGBzaXplc2AgYXR0cmlidXRlIGluIGJhc2ljIGBzcmNzZXRgIHN1cHBvcnRpbmcgYnJvd3NlcnMsXHJcblx0ICogYSBgc3Jjc2V0YCBhdHRyaWJ1dGUgYXQgYWxsLCBhbmQgdGhleSBoYXZlbuKAmXQgYmVlbiBldmFsdWF0ZWQgYWxyZWFkeS5cclxuXHQgKi9cclxuXHRwZi5nZXRBbGxFbGVtZW50cyA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGVsZW1zID0gW10sXHJcblx0XHRcdGltZ3MgPSBkb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIFwiaW1nXCIgKTtcclxuXHJcblx0XHRmb3IgKCB2YXIgaCA9IDAsIGxlbiA9IGltZ3MubGVuZ3RoOyBoIDwgbGVuOyBoKysgKSB7XHJcblx0XHRcdHZhciBjdXJySW1nID0gaW1nc1sgaCBdO1xyXG5cclxuXHRcdFx0aWYgKCBjdXJySW1nLnBhcmVudE5vZGUubm9kZU5hbWUudG9VcHBlckNhc2UoKSA9PT0gXCJQSUNUVVJFXCIgfHxcclxuXHRcdFx0KCBjdXJySW1nLmdldEF0dHJpYnV0ZSggXCJzcmNzZXRcIiApICE9PSBudWxsICkgfHwgY3VyckltZ1sgcGYubnMgXSAmJiBjdXJySW1nWyBwZi5ucyBdLnNyY3NldCAhPT0gbnVsbCApIHtcclxuXHRcdFx0XHRlbGVtcy5wdXNoKCBjdXJySW1nICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHJldHVybiBlbGVtcztcclxuXHR9O1xyXG5cclxuXHRwZi5nZXRNYXRjaCA9IGZ1bmN0aW9uKCBpbWcsIHBpY3R1cmUgKSB7XHJcblx0XHR2YXIgc291cmNlcyA9IHBpY3R1cmUuY2hpbGROb2RlcyxcclxuXHRcdFx0bWF0Y2g7XHJcblxyXG5cdFx0Ly8gR28gdGhyb3VnaCBlYWNoIGNoaWxkLCBhbmQgaWYgdGhleSBoYXZlIG1lZGlhIHF1ZXJpZXMsIGV2YWx1YXRlIHRoZW1cclxuXHRcdGZvciAoIHZhciBqID0gMCwgc2xlbiA9IHNvdXJjZXMubGVuZ3RoOyBqIDwgc2xlbjsgaisrICkge1xyXG5cdFx0XHR2YXIgc291cmNlID0gc291cmNlc1sgaiBdO1xyXG5cclxuXHRcdFx0Ly8gaWdub3JlIG5vbi1lbGVtZW50IG5vZGVzXHJcblx0XHRcdGlmICggc291cmNlLm5vZGVUeXBlICE9PSAxICkge1xyXG5cdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBIaXR0aW5nIHRoZSBgaW1nYCBlbGVtZW50IHRoYXQgc3RhcnRlZCBldmVyeXRoaW5nIHN0b3BzIHRoZSBzZWFyY2ggZm9yIGBzb3VyY2VzYC5cclxuXHRcdFx0Ly8gSWYgbm8gcHJldmlvdXMgYHNvdXJjZWAgbWF0Y2hlcywgdGhlIGBpbWdgIGl0c2VsZiBpcyBldmFsdWF0ZWQgbGF0ZXIuXHJcblx0XHRcdGlmICggc291cmNlID09PSBpbWcgKSB7XHJcblx0XHRcdFx0cmV0dXJuIG1hdGNoO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBpZ25vcmUgbm9uLWBzb3VyY2VgIG5vZGVzXHJcblx0XHRcdGlmICggc291cmNlLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkgIT09IFwiU09VUkNFXCIgKSB7XHJcblx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdH1cclxuXHRcdFx0Ly8gaWYgaXQncyBhIHNvdXJjZSBlbGVtZW50IHRoYXQgaGFzIHRoZSBgc3JjYCBwcm9wZXJ0eSBzZXQsIHRocm93IGEgd2FybmluZyBpbiB0aGUgY29uc29sZVxyXG5cdFx0XHRpZiAoIHNvdXJjZS5nZXRBdHRyaWJ1dGUoIFwic3JjXCIgKSAhPT0gbnVsbCAmJiB0eXBlb2YgY29uc29sZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdGNvbnNvbGUud2FybihcIlRoZSBgc3JjYCBhdHRyaWJ1dGUgaXMgaW52YWxpZCBvbiBgcGljdHVyZWAgYHNvdXJjZWAgZWxlbWVudDsgaW5zdGVhZCwgdXNlIGBzcmNzZXRgLlwiKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dmFyIG1lZGlhID0gc291cmNlLmdldEF0dHJpYnV0ZSggXCJtZWRpYVwiICk7XHJcblxyXG5cdFx0XHQvLyBpZiBzb3VyY2UgZG9lcyBub3QgaGF2ZSBhIHNyY3NldCBhdHRyaWJ1dGUsIHNraXBcclxuXHRcdFx0aWYgKCAhc291cmNlLmdldEF0dHJpYnV0ZSggXCJzcmNzZXRcIiApICkge1xyXG5cdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBpZiB0aGVyZSdzIG5vIG1lZGlhIHNwZWNpZmllZCwgT1Igdy5tYXRjaE1lZGlhIGlzIHN1cHBvcnRlZFxyXG5cdFx0XHRpZiAoICggIW1lZGlhIHx8IHBmLm1hdGNoZXNNZWRpYSggbWVkaWEgKSApICkge1xyXG5cdFx0XHRcdHZhciB0eXBlU3VwcG9ydGVkID0gcGYudmVyaWZ5VHlwZVN1cHBvcnQoIHNvdXJjZSApO1xyXG5cclxuXHRcdFx0XHRpZiAoIHR5cGVTdXBwb3J0ZWQgPT09IHRydWUgKSB7XHJcblx0XHRcdFx0XHRtYXRjaCA9IHNvdXJjZTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdH0gZWxzZSBpZiAoIHR5cGVTdXBwb3J0ZWQgPT09IFwicGVuZGluZ1wiICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBtYXRjaDtcclxuXHR9O1xyXG5cclxuXHRmdW5jdGlvbiBwaWN0dXJlZmlsbCggb3B0ICkge1xyXG5cdFx0dmFyIGVsZW1lbnRzLFxyXG5cdFx0XHRlbGVtZW50LFxyXG5cdFx0XHRwYXJlbnQsXHJcblx0XHRcdGZpcnN0TWF0Y2gsXHJcblx0XHRcdGNhbmRpZGF0ZXMsXHJcblx0XHRcdG9wdGlvbnMgPSBvcHQgfHwge307XHJcblxyXG5cdFx0ZWxlbWVudHMgPSBvcHRpb25zLmVsZW1lbnRzIHx8IHBmLmdldEFsbEVsZW1lbnRzKCk7XHJcblxyXG5cdFx0Ly8gTG9vcCB0aHJvdWdoIGFsbCBlbGVtZW50c1xyXG5cdFx0Zm9yICggdmFyIGkgPSAwLCBwbGVuID0gZWxlbWVudHMubGVuZ3RoOyBpIDwgcGxlbjsgaSsrICkge1xyXG5cdFx0XHRlbGVtZW50ID0gZWxlbWVudHNbIGkgXTtcclxuXHRcdFx0cGFyZW50ID0gZWxlbWVudC5wYXJlbnROb2RlO1xyXG5cdFx0XHRmaXJzdE1hdGNoID0gdW5kZWZpbmVkO1xyXG5cdFx0XHRjYW5kaWRhdGVzID0gdW5kZWZpbmVkO1xyXG5cclxuXHRcdFx0Ly8gaW1tZWRpYXRlbHkgc2tpcCBub24tYGltZ2Agbm9kZXNcclxuXHRcdFx0aWYgKCBlbGVtZW50Lm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkgIT09IFwiSU1HXCIgKSB7XHJcblx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIGV4cGFuZG8gZm9yIGNhY2hpbmcgZGF0YSBvbiB0aGUgaW1nXHJcblx0XHRcdGlmICggIWVsZW1lbnRbIHBmLm5zIF0gKSB7XHJcblx0XHRcdFx0ZWxlbWVudFsgcGYubnMgXSA9IHt9O1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBpZiB0aGUgZWxlbWVudCBoYXMgYWxyZWFkeSBiZWVuIGV2YWx1YXRlZCwgc2tpcCBpdCB1bmxlc3NcclxuXHRcdFx0Ly8gYG9wdGlvbnMucmVldmFsdWF0ZWAgaXMgc2V0IHRvIHRydWUgKCB0aGlzLCBmb3IgZXhhbXBsZSxcclxuXHRcdFx0Ly8gaXMgc2V0IHRvIHRydWUgd2hlbiBydW5uaW5nIGBwaWN0dXJlZmlsbGAgb24gYHJlc2l6ZWAgKS5cclxuXHRcdFx0aWYgKCAhb3B0aW9ucy5yZWV2YWx1YXRlICYmIGVsZW1lbnRbIHBmLm5zIF0uZXZhbHVhdGVkICkge1xyXG5cdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBpZiBgaW1nYCBpcyBpbiBhIGBwaWN0dXJlYCBlbGVtZW50XHJcblx0XHRcdGlmICggcGFyZW50ICYmIHBhcmVudC5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpID09PSBcIlBJQ1RVUkVcIiApIHtcclxuXHJcblx0XHRcdFx0Ly8gSUU5IHZpZGVvIHdvcmthcm91bmRcclxuXHRcdFx0XHRwZi5yZW1vdmVWaWRlb1NoaW0oIHBhcmVudCApO1xyXG5cclxuXHRcdFx0XHQvLyByZXR1cm4gdGhlIGZpcnN0IG1hdGNoIHdoaWNoIG1pZ2h0IHVuZGVmaW5lZFxyXG5cdFx0XHRcdC8vIHJldHVybnMgZmFsc2UgaWYgdGhlcmUgaXMgYSBwZW5kaW5nIHNvdXJjZVxyXG5cdFx0XHRcdC8vIFRPRE8gdGhlIHJldHVybiB0eXBlIGhlcmUgaXMgYnJ1dGFsLCBjbGVhbnVwXHJcblx0XHRcdFx0Zmlyc3RNYXRjaCA9IHBmLmdldE1hdGNoKCBlbGVtZW50LCBwYXJlbnQgKTtcclxuXHJcblx0XHRcdFx0Ly8gaWYgYW55IHNvdXJjZXMgYXJlIHBlbmRpbmcgaW4gdGhpcyBwaWN0dXJlIGR1ZSB0byBhc3luYyB0eXBlIHRlc3QocylcclxuXHRcdFx0XHQvLyByZW1vdmUgdGhlIGV2YWx1YXRlZCBhdHRyIGFuZCBza2lwIGZvciBub3cgKCB0aGUgcGVuZGluZyB0ZXN0IHdpbGxcclxuXHRcdFx0XHQvLyByZXJ1biBwaWN0dXJlZmlsbCBvbiB0aGlzIGVsZW1lbnQgd2hlbiBjb21wbGV0ZSlcclxuXHRcdFx0XHRpZiAoIGZpcnN0TWF0Y2ggPT09IGZhbHNlICkge1xyXG5cdFx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGZpcnN0TWF0Y2ggPSB1bmRlZmluZWQ7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIENhY2hlIGFuZCByZW1vdmUgYHNyY3NldGAgaWYgcHJlc2VudCBhbmQgd2XigJlyZSBnb2luZyB0byBiZSBkb2luZyBgcGljdHVyZWAvYHNyY3NldGAvYHNpemVzYCBwb2x5ZmlsbGluZyB0byBpdC5cclxuXHRcdFx0aWYgKCAoIHBhcmVudCAmJiBwYXJlbnQubm9kZU5hbWUudG9VcHBlckNhc2UoKSA9PT0gXCJQSUNUVVJFXCIgKSB8fFxyXG5cdFx0XHQoICFwZi5zaXplc1N1cHBvcnRlZCAmJiAoIGVsZW1lbnQuc3Jjc2V0ICYmIHJlZ1dEZXNjLnRlc3QoIGVsZW1lbnQuc3Jjc2V0ICkgKSApICkge1xyXG5cdFx0XHRcdHBmLmRvZGdlU3Jjc2V0KCBlbGVtZW50ICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggZmlyc3RNYXRjaCApIHtcclxuXHRcdFx0XHRjYW5kaWRhdGVzID0gcGYucHJvY2Vzc1NvdXJjZVNldCggZmlyc3RNYXRjaCApO1xyXG5cdFx0XHRcdHBmLmFwcGx5QmVzdENhbmRpZGF0ZSggY2FuZGlkYXRlcywgZWxlbWVudCApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdC8vIE5vIHNvdXJjZXMgbWF0Y2hlZCwgc28gd2XigJlyZSBkb3duIHRvIHByb2Nlc3NpbmcgdGhlIGlubmVyIGBpbWdgIGFzIGEgc291cmNlLlxyXG5cdFx0XHRcdGNhbmRpZGF0ZXMgPSBwZi5wcm9jZXNzU291cmNlU2V0KCBlbGVtZW50ICk7XHJcblxyXG5cdFx0XHRcdGlmICggZWxlbWVudC5zcmNzZXQgPT09IHVuZGVmaW5lZCB8fCBlbGVtZW50WyBwZi5ucyBdLnNyY3NldCApIHtcclxuXHRcdFx0XHRcdC8vIEVpdGhlciBgc3Jjc2V0YCBpcyBjb21wbGV0ZWx5IHVuc3VwcG9ydGVkLCBvciB3ZSBuZWVkIHRvIHBvbHlmaWxsIGBzaXplc2AgZnVuY3Rpb25hbGl0eS5cclxuXHRcdFx0XHRcdHBmLmFwcGx5QmVzdENhbmRpZGF0ZSggY2FuZGlkYXRlcywgZWxlbWVudCApO1xyXG5cdFx0XHRcdH0gLy8gRWxzZSwgcmVzb2x1dGlvbi1vbmx5IGBzcmNzZXRgIGlzIHN1cHBvcnRlZCBuYXRpdmVseS5cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gc2V0IGV2YWx1YXRlZCB0byB0cnVlIHRvIGF2b2lkIHVubmVjZXNzYXJ5IHJlcGFyc2luZ1xyXG5cdFx0XHRlbGVtZW50WyBwZi5ucyBdLmV2YWx1YXRlZCA9IHRydWU7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTZXRzIHVwIHBpY3R1cmUgcG9seWZpbGwgYnkgcG9sbGluZyB0aGUgZG9jdW1lbnQgYW5kIHJ1bm5pbmdcclxuXHQgKiB0aGUgcG9seWZpbGwgZXZlcnkgMjUwbXMgdW50aWwgdGhlIGRvY3VtZW50IGlzIHJlYWR5LlxyXG5cdCAqIEFsc28gYXR0YWNoZXMgcGljdHVyZWZpbGwgb24gcmVzaXplXHJcblx0ICovXHJcblx0ZnVuY3Rpb24gcnVuUGljdHVyZWZpbGwoKSB7XHJcblx0XHRwZi5pbml0VHlwZURldGVjdHMoKTtcclxuXHRcdHBpY3R1cmVmaWxsKCk7XHJcblx0XHR2YXIgaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKCBmdW5jdGlvbigpIHtcclxuXHRcdFx0Ly8gV2hlbiB0aGUgZG9jdW1lbnQgaGFzIGZpbmlzaGVkIGxvYWRpbmcsIHN0b3AgY2hlY2tpbmcgZm9yIG5ldyBpbWFnZXNcclxuXHRcdFx0Ly8gaHR0cHM6Ly9naXRodWIuY29tL2RlZC9kb21yZWFkeS9ibG9iL21hc3Rlci9yZWFkeS5qcyNMMTVcclxuXHRcdFx0cGljdHVyZWZpbGwoKTtcclxuXHJcblx0XHRcdGlmICggL15sb2FkZWR8Xml8XmMvLnRlc3QoIGRvYy5yZWFkeVN0YXRlICkgKSB7XHJcblx0XHRcdFx0Y2xlYXJJbnRlcnZhbCggaW50ZXJ2YWxJZCApO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0fSwgMjUwICk7XHJcblxyXG5cdFx0dmFyIHJlc2l6ZVRpbWVyO1xyXG5cdFx0dmFyIGhhbmRsZVJlc2l6ZSA9IGZ1bmN0aW9uKCkge1xyXG5cdCAgICAgICAgcGljdHVyZWZpbGwoeyByZWV2YWx1YXRlOiB0cnVlIH0pO1xyXG5cdCAgICB9O1xyXG5cdFx0ZnVuY3Rpb24gY2hlY2tSZXNpemUoKSB7XHJcblx0XHQgICAgY2xlYXJUaW1lb3V0KHJlc2l6ZVRpbWVyKTtcclxuXHRcdCAgICByZXNpemVUaW1lciA9IHNldFRpbWVvdXQoIGhhbmRsZVJlc2l6ZSwgNjAgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIHcuYWRkRXZlbnRMaXN0ZW5lciApIHtcclxuXHRcdFx0dy5hZGRFdmVudExpc3RlbmVyKCBcInJlc2l6ZVwiLCBjaGVja1Jlc2l6ZSwgZmFsc2UgKTtcclxuXHRcdH0gZWxzZSBpZiAoIHcuYXR0YWNoRXZlbnQgKSB7XHJcblx0XHRcdHcuYXR0YWNoRXZlbnQoIFwib25yZXNpemVcIiwgY2hlY2tSZXNpemUgKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHJ1blBpY3R1cmVmaWxsKCk7XHJcblxyXG5cdC8qIGV4cG9zZSBtZXRob2RzIGZvciB0ZXN0aW5nICovXHJcblx0cGljdHVyZWZpbGwuXyA9IHBmO1xyXG5cclxuXHRleHBvc2UoIHBpY3R1cmVmaWxsICk7XHJcblxyXG59ICkoIHdpbmRvdywgd2luZG93LmRvY3VtZW50LCBuZXcgd2luZG93LkltYWdlKCkgKTtcclxuXHJcblxyXG4vKlxyXG4gKiDQndCw0LLQuNCz0LDRhtC40Y8g0LIg0YjQsNC/0LrQtVxyXG4gKi9cclxuY29uc3QgbWFpbk5hdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy0tbWFpbi1uYXYnKTtcclxuY29uc3QgbWFpbk5hdkJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy0taGVhZGVyX19uYXYtYnRuJyk7XHJcbmNvbnN0IGJ1cmdlckljb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdqcy0taGVhZGVyLWJ1cmdlcicpO1xyXG5cclxuaWYgKG1hdGNoTWVkaWEpIHtcclxuICBsZXQgbXFOYXYgPSB3aW5kb3cubWF0Y2hNZWRpYSggJyhtaW4td2lkdGg6IDc2OHB4KScgKTtcclxuICBtcU5hdi5hZGRMaXN0ZW5lcihXaWR0aENoYW5nZU5hdik7XHJcbiAgV2lkdGhDaGFuZ2VOYXYobXFOYXYpO1xyXG59XHJcblxyXG5tYWluTmF2QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZ0KSB7XHJcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBtYWluTmF2LmNsYXNzTGlzdC50b2dnbGUoJ2Rpc3BsYXktbm9uZScpO1xyXG4gICAgbWFpbk5hdkJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKCdoZWFkZXJfX25hdi1idG4tLWNsb3NlJyk7XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gV2lkdGhDaGFuZ2VOYXYobXEpIHtcclxuICBpZiAoIW1xLm1hdGNoZXMpIHtcclxuICAgIG1haW5OYXYuY2xhc3NMaXN0LmFkZCgnZGlzcGxheS1ub25lJyk7XHJcbiAgICBtYWluTmF2QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc3BsYXktbm9uZScpO1xyXG4gICAgbWFpbk5hdkJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdoZWFkZXJfX25hdi1idG4tLWNsb3NlJyk7XHJcbiAgfSBlbHNlIHtcclxuICAgIG1haW5OYXYuY2xhc3NMaXN0LnJlbW92ZSgnZGlzcGxheS1ub25lJyk7XHJcbiAgICBtYWluTmF2QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXktbm9uZScpO1xyXG4gIH1cclxufVxyXG5cclxuXHJcbi8qXHJcbiAqINCf0LXRgNC10LrQu9GO0YfQsNGC0LXQu9GMINC60LDRgNGC0LjQvdC60LggXCLQtNC+IC0g0L/QvtGB0LvQtVwiXHJcbiAqL1xyXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWV4YW1wbGVfX3N3aXRjaCcpKSB7XHJcbiAgY29uc3QgZXhhbXBsZUFmdGVyQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWV4YW1wbGVfX3N3aXRjaC1idG4tLWFmdGVyJyk7XHJcbiAgY29uc3QgZXhhbXBsZUJlZm9yZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1leGFtcGxlX19zd2l0Y2gtYnRuLS1iZWZvcmUnKTtcclxuICBjb25zdCBleGFtcGxlVG9nZ2xlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWV4YW1wbGVfX3N3aXRjaCcpO1xyXG4gIGNvbnN0IGltZ0FmdGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWV4YW1wbGVfX3BpY3R1cmUtLWFmdGVyJyk7XHJcbiAgY29uc3QgaW1nQmVmb3JlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWV4YW1wbGVfX3BpY3R1cmUtLWJlZm9yZScpO1xyXG4gIGNvbnN0IGltZ0hpZGUgPSAnZXhhbXBsZV9fcGljdHVyZS0taGlkZSc7XHJcblxyXG4gIGlmIChtYXRjaE1lZGlhKSB7XHJcbiAgICBsZXQgbXFFeGFtcGxlID0gd2luZG93Lm1hdGNoTWVkaWEoICcobWF4LXdpZHRoOiA3NjhweCknICk7XHJcbiAgICBtcUV4YW1wbGUuYWRkTGlzdGVuZXIoV2lkdGhDaGFuZ2VFeGFtcGxlKTtcclxuICAgIFdpZHRoQ2hhbmdlRXhhbXBsZShtcUV4YW1wbGUpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gV2lkdGhDaGFuZ2VFeGFtcGxlKG1xKSB7XHJcbiAgICBpZiAobXEubWF0Y2hlcykge1xyXG4gICAgICBleGFtcGxlQWZ0ZXJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzaG93SW1nQWZ0ZXIpO1xyXG4gICAgICBleGFtcGxlQmVmb3JlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2hvd0ltZ0JlZm9yZSk7XHJcbiAgICAgIGV4YW1wbGVUb2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVJbWcpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZXhhbXBsZUFmdGVyQnRuLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2hvd0ltZ0FmdGVyKTtcclxuICAgICAgZXhhbXBsZUJlZm9yZUJ0bi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHNob3dJbWdCZWZvcmUpO1xyXG4gICAgICBleGFtcGxlVG9nZ2xlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlSW1nKTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgZnVuY3Rpb24gc2hvd0ltZ0FmdGVyKGV2dCkge1xyXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBpbWdBZnRlci5jbGFzc0xpc3QucmVtb3ZlKGltZ0hpZGUpO1xyXG4gICAgaW1nQmVmb3JlLmNsYXNzTGlzdC5hZGQoaW1nSGlkZSk7XHJcbiAgICBleGFtcGxlVG9nZ2xlLmNsYXNzTGlzdC5hZGQoJ2V4YW1wbGVfX3N3aXRjaC0tYWZ0ZXInKTtcclxuICB9XHJcbiAgXHJcbiAgZnVuY3Rpb24gc2hvd0ltZ0JlZm9yZShldnQpIHtcclxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgaW1nQmVmb3JlLmNsYXNzTGlzdC5yZW1vdmUoaW1nSGlkZSk7XHJcbiAgICBpbWdBZnRlci5jbGFzc0xpc3QuYWRkKGltZ0hpZGUpO1xyXG4gICAgZXhhbXBsZVRvZ2dsZS5jbGFzc0xpc3QucmVtb3ZlKCdleGFtcGxlX19zd2l0Y2gtLWFmdGVyJyk7XHJcbiAgfVxyXG4gIFxyXG4gIGZ1bmN0aW9uIHRvZ2dsZUltZyhldnQpIHtcclxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgaW1nQmVmb3JlLmNsYXNzTGlzdC50b2dnbGUoaW1nSGlkZSk7XHJcbiAgICBpbWdBZnRlci5jbGFzc0xpc3QudG9nZ2xlKGltZ0hpZGUpO1xyXG4gICAgZXhhbXBsZVRvZ2dsZS5jbGFzc0xpc3QudG9nZ2xlKCdleGFtcGxlX19zd2l0Y2gtLWFmdGVyJyk7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuLypcclxuICog0J/QvtC00LXQu9GO0YfQtdC90LjQtSDRj9C90LTQtdC60YEg0LrQsNGA0YJcclxuICovXHJcbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjeW1hcCcpKSB7XHJcbiAgeW1hcHMucmVhZHkoZnVuY3Rpb24gKCkge1xyXG4gICAgbGV0IG15TWFwID0gbmV3IHltYXBzLk1hcChcInltYXBcIiwge1xyXG4gICAgICBjZW50ZXI6IFs1OS45Mzg2MzEsIDMwLjMyMzA1NTRdLFxyXG4gICAgICB6b29tOiAxN1xyXG4gICAgfSk7XHJcblxyXG4gICAgbGV0IHBsYWNlbWFyayA9IG5ldyB5bWFwcy5QbGFjZW1hcmsoWzU5LjkzODYzMSwgMzAuMzIzMDU1NF0sIHtcclxuICAgICAgYmFsbG9vbkNvbnRlbnRIZWFkZXI6IFwiQ2F0IEVuZXJneVwiLFxyXG4gICAgICBiYWxsb29uQ29udGVudEJvZHk6IFwi0YPQuy4g0JHQvtC70YzRiNCw0Y8gPGJyPtCa0L7QvdGO0YjQtdC90L3QsNGPLCDQtC4gMTkvOCA8YnI+0KHQsNC90LrRgi3Qn9C10YLQtdGA0LHRg9GA0LNcIixcclxuICAgICAgaGludENvbnRlbnQ6IFwi0JzRiyDQvdCw0YXQvtC00LjQvNGB0Y8g0LfQtNC10YHRjFwiXHJcbiAgICB9LCB7XHJcbiAgICAgIGljb25MYXlvdXQ6ICdkZWZhdWx0I2ltYWdlJyxcclxuICAgICAgaWNvbkltYWdlSHJlZjogJ2ltZy9waWN0dXJlL21hcC1waW4ucG5nJyxcclxuICAgICAgaWNvbkltYWdlU2l6ZTogWzYwLCA1MV0sXHJcbiAgICAgIGljb25JbWFnZU9mZnNldDogWy0zMCwgLTUxXVxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIG15TWFwLmdlb09iamVjdHMuYWRkKHBsYWNlbWFyayk7XHJcbiAgICBteU1hcC5iZWhhdmlvcnMuZGlzYWJsZShbJ3Njcm9sbFpvb20nXSk7XHJcblxyXG4gICAgaWYgKG1hdGNoTWVkaWEpIHtcclxuICAgICAgbGV0IGRldmljZVdpZHRoID0gd2luZG93Lm1hdGNoTWVkaWEoICcobWluLXdpZHRoOiAxMzAwcHgpJyApO1xyXG4gICAgICBkZXZpY2VXaWR0aC5hZGRMaXN0ZW5lcihzZXRNYXBDZW50ZXIpO1xyXG4gICAgICBzZXRNYXBDZW50ZXIoZGV2aWNlV2lkdGgpO1xyXG5cclxuICAgICAgZnVuY3Rpb24gc2V0TWFwQ2VudGVyKG1xKSB7XHJcbiAgICAgICAgaWYgKG1xLm1hdGNoZXMpIHtcclxuICAgICAgICAgIG15TWFwLnNldENlbnRlcihbNTkuOTM4NzI1LDMwLjMxOTQ0N10pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBteU1hcC5zZXRDZW50ZXIoWzU5LjkzODYzMSwgMzAuMzIzMDU1NF0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0pO1xyXG59Il19
