"use strict";function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.matchMedia||(window.matchMedia=function(){var t=window.styleMedia||window.media;if(!t){var n,r=document.createElement("style"),e=document.getElementsByTagName("script")[0];r.type="text/css",r.id="matchmediajs-test",e.parentNode.insertBefore(r,e),n="getComputedStyle"in window&&window.getComputedStyle(r,null)||r.currentStyle,t={matchMedium:function(e){var t="@media "+e+"{ #matchmediajs-test { width: 1px; } }";return r.styleSheet?r.styleSheet.cssText=t:r.textContent=t,"1px"===n.width}}}return function(e){return{matches:t.matchMedium(e||"all"),media:e||"all"}}}()),function(l,d,e){function t(e){"object"===("undefined"==typeof module?"undefined":m(module))&&"object"===m(module.exports)?module.exports=e:"function"==typeof define&&define.amd&&define("picturefill",function(){return e}),"object"===m(l)&&(l.picturefill=e)}if(l.HTMLPictureElement)t(function(){});else{d.createElement("picture");var n,r,u=l.picturefill||{},p=/\s+\+?\d+(e\d+)?w/;u.ns="picturefill",u.srcsetSupported="srcset"in e,u.sizesSupported="sizes"in e,u.curSrcSupported="currentSrc"in e,u.trim=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},u.makeUrl=(n=d.createElement("a"),function(e){return n.href=e,n.href}),u.restrictsMixedContent=function(){return"https:"===l.location.protocol},u.matchesMedia=function(e){return l.matchMedia&&l.matchMedia(e).matches},u.getDpr=function(){return l.devicePixelRatio||1},u.getWidthFromLength=function(e){var t;if(!e||-1<e.indexOf("%")!=!1||!(0<parseFloat(e)||-1<e.indexOf("calc(")))return!1;e=e.replace("vw","%"),u.lengthEl||(u.lengthEl=d.createElement("div"),u.lengthEl.style.cssText="border:0;display:block;font-size:1em;left:0;margin:0;padding:0;position:absolute;visibility:hidden",u.lengthEl.className="helper-from-picturefill-js"),u.lengthEl.style.width="0px";try{u.lengthEl.style.width=e}catch(e){}return d.body.appendChild(u.lengthEl),(t=u.lengthEl.offsetWidth)<=0&&(t=!1),d.body.removeChild(u.lengthEl),t},u.detectTypeSupport=function(e,t){var n=new l.Image;return n.onerror=function(){u.types[e]=!1,s()},n.onload=function(){u.types[e]=1===n.width,s()},n.src=t,"pending"},u.types=u.types||{},u.initTypeDetects=function(){u.types["image/jpeg"]=!0,u.types["image/gif"]=!0,u.types["image/png"]=!0,u.types["image/svg+xml"]=d.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"),u.types["image/webp"]=u.detectTypeSupport("image/webp","data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=")},u.verifyTypeSupport=function(e){var t=e.getAttribute("type");if(null===t||""===t)return!0;var n=u.types[t];return"string"==typeof n&&"pending"!==n?(u.types[t]=u.detectTypeSupport(t,n),"pending"):"function"==typeof n?(n(),"pending"):n},u.parseSize=function(e){var t=/(\([^)]+\))?\s*(.+)/g.exec(e);return{media:t&&t[1],length:t&&t[2]}},u.findWidthFromSourceSize=function(e){for(var t,n=u.trim(e).split(/\s*,\s*/),r=0,i=n.length;r<i;r++){var s=n[r],a=u.parseSize(s),o=a.length,c=a.media;if(o&&((!c||u.matchesMedia(c))&&(t=u.getWidthFromLength(o))))break}return t||Math.max(l.innerWidth||0,d.documentElement.clientWidth)},u.parseSrcset=function(e){for(var t=[];""!==e;){var n,r=(e=e.replace(/^\s+/g,"")).search(/\s/g),i=null;if(-1!==r){if(","!==(n=e.slice(0,r)).slice(-1)&&""!==n||(n=n.replace(/,+$/,""),i=""),e=e.slice(r+1),null===i){var s=e.indexOf(",");e=-1!==s?(i=e.slice(0,s),e.slice(s+1)):(i=e,"")}}else n=e,e="";(n||i)&&t.push({url:n,descriptor:i})}return t},u.parseDescriptor=function(e,t){var n,r=t||"100vw",i=e&&e.replace(/(^\s+|\s+$)/g,""),s=u.findWidthFromSourceSize(r);if(i)for(var a=i.split(" "),o=a.length-1;0<=o;o--){var c=a[o],l=c&&c.slice(c.length-1);if("h"!==l&&"w"!==l||u.sizesSupported){if("x"===l){var d=c&&parseFloat(c,10);n=d&&!isNaN(d)?d:1}}else n=parseFloat(parseInt(c,10)/s)}return n||1},u.getCandidatesFromSourceSet=function(e,t){for(var n=u.parseSrcset(e),r=[],i=0,s=n.length;i<s;i++){var a=n[i];r.push({url:a.url,resolution:u.parseDescriptor(a.descriptor,t)})}return r},u.dodgeSrcset=function(e){e.srcset&&(e[u.ns].srcset=e.srcset,e.srcset="",e.setAttribute("data-pfsrcset",e[u.ns].srcset))},u.processSourceSet=function(e){var t=e.getAttribute("srcset"),n=e.getAttribute("sizes"),r=[];return"IMG"===e.nodeName.toUpperCase()&&e[u.ns]&&e[u.ns].srcset&&(t=e[u.ns].srcset),t&&(r=u.getCandidatesFromSourceSet(t,n)),r},u.backfaceVisibilityFix=function(e){var t=e.style||{},n="webkitBackfaceVisibility"in t,r=t.zoom;n&&(t.zoom=".999",n=e.offsetWidth,t.zoom=r)},u.setIntrinsicSize=(r={},function(e,t){var n;e[u.ns]&&!l.pfStopIntrinsicSize&&(void 0===e[u.ns].dims&&(e[u.ns].dims=e.getAttribute("width")||e.getAttribute("height")),e[u.ns].dims||(t.url in r?i(e,r[t.url],t.resolution):((n=d.createElement("img")).onload=function(){if(r[t.url]=n.width,!r[t.url])try{d.body.appendChild(n),r[t.url]=n.width||n.offsetWidth,d.body.removeChild(n)}catch(e){}e.src===t.url&&i(e,r[t.url],t.resolution),e=null,n.onload=null,n=null},n.src=t.url)))}),u.applyBestCandidate=function(e,t){var n,r,i;e.sort(u.ascendingSort),i=e[(r=e.length)-1];for(var s=0;s<r;s++)if((n=e[s]).resolution>=u.getDpr()){i=n;break}i&&(i.url=u.makeUrl(i.url),t.src!==i.url&&(u.restrictsMixedContent()&&"http:"===i.url.substr(0,"http:".length).toLowerCase()?void 0!==window.console&&console.warn("Blocked mixed content image "+i.url):(t.src=i.url,u.curSrcSupported||(t.currentSrc=t.src),u.backfaceVisibilityFix(t))),u.setIntrinsicSize(t,i))},u.ascendingSort=function(e,t){return e.resolution-t.resolution},u.removeVideoShim=function(e){var t=e.getElementsByTagName("video");if(t.length){for(var n=t[0],r=n.getElementsByTagName("source");r.length;)e.insertBefore(r[0],n);n.parentNode.removeChild(n)}},u.getAllElements=function(){for(var e=[],t=d.getElementsByTagName("img"),n=0,r=t.length;n<r;n++){var i=t[n];("PICTURE"===i.parentNode.nodeName.toUpperCase()||null!==i.getAttribute("srcset")||i[u.ns]&&null!==i[u.ns].srcset)&&e.push(i)}return e},u.getMatch=function(e,t){for(var n,r=t.childNodes,i=0,s=r.length;i<s;i++){var a=r[i];if(1===a.nodeType){if(a===e)return n;if("SOURCE"===a.nodeName.toUpperCase()){null!==a.getAttribute("src")&&void 0!==("undefined"==typeof console?"undefined":m(console))&&console.warn("The `src` attribute is invalid on `picture` `source` element; instead, use `srcset`.");var o=a.getAttribute("media");if(a.getAttribute("srcset")&&(!o||u.matchesMedia(o))){var c=u.verifyTypeSupport(a);if(!0===c){n=a;break}if("pending"===c)return!1}}}}return n},function(){function e(){s({reevaluate:!0})}u.initTypeDetects(),s();var t,n=setInterval(function(){s(),/^loaded|^i|^c/.test(d.readyState)&&clearInterval(n)},250);function r(){clearTimeout(t),t=setTimeout(e,60)}l.addEventListener?l.addEventListener("resize",r,!1):l.attachEvent&&l.attachEvent("onresize",r)}(),s._=u,t(s)}function i(e,t,n){t&&e.setAttribute("width",parseInt(t/n,10))}function s(e){for(var t,n,r,i,s,a=e||{},o=0,c=(t=a.elements||u.getAllElements()).length;o<c;o++)if(r=(n=t[o]).parentNode,s=i=void 0,"IMG"===n.nodeName.toUpperCase()&&(n[u.ns]||(n[u.ns]={}),a.reevaluate||!n[u.ns].evaluated)){if(r&&"PICTURE"===r.nodeName.toUpperCase()){if(u.removeVideoShim(r),!1===(i=u.getMatch(n,r)))continue}else i=void 0;(r&&"PICTURE"===r.nodeName.toUpperCase()||!u.sizesSupported&&n.srcset&&p.test(n.srcset))&&u.dodgeSrcset(n),i?(s=u.processSourceSet(i),u.applyBestCandidate(s,n)):(s=u.processSourceSet(n),void 0!==n.srcset&&!n[u.ns].srcset||u.applyBestCandidate(s,n)),n[u.ns].evaluated=!0}}}(window,window.document,new window.Image);var t=document.querySelector(".js--main-nav"),n=document.querySelector(".js--header__nav-btn");if(matchMedia){var e=window.matchMedia("(min-width: 768px)");e.addListener(r),r(e)}function r(e){e.matches?(t.classList.remove("display-none"),n.classList.add("display-none")):(t.classList.add("display-none"),n.classList.remove("display-none"),n.classList.remove("header__nav-btn--close"))}if(n.addEventListener("click",function(e){e.preventDefault(),t.classList.contains("display-none")?(t.classList.remove("display-none"),n.classList.add("header__nav-btn--close")):(t.classList.add("display-none"),n.classList.remove("header__nav-btn--close"))}),document.querySelector(".js-example__switch")){var i=function(e){e.matches?(c.addEventListener("click",s),l.addEventListener("click",a),d.addEventListener("click",o)):(c.removeEventListener("click",s),l.removeEventListener("click",a),d.removeEventListener("click",o))},s=function(e){e.preventDefault(),u.classList.remove(f),p.classList.add(f),d.classList.add("example__switch--after")},a=function(e){e.preventDefault(),p.classList.remove(f),u.classList.add(f),d.classList.remove("example__switch--after")},o=function(e){e.preventDefault(),p.classList.toggle(f),u.classList.toggle(f),d.classList.toggle("example__switch--after")},c=document.querySelector(".js-example__switch-btn--after"),l=document.querySelector(".js-example__switch-btn--before"),d=document.querySelector(".js-example__switch"),u=document.querySelector(".js-example__picture--after"),p=document.querySelector(".js-example__picture--before"),f="example__picture--hide";if(matchMedia){var h=window.matchMedia("(max-width: 768px)");h.addListener(i),i(h)}}document.querySelector("#ymap")&&ymaps.ready(function(){var t=new ymaps.Map("ymap",{center:[59.938631,30.3230554],zoom:17}),e=new ymaps.Placemark([59.938631,30.3230554],{balloonContentHeader:"Cat Energy",balloonContentBody:"ул. Большая <br>Конюшенная, д. 19/8 <br>Санкт-Петербург",hintContent:"Мы находимся здесь"},{iconLayout:"default#image",iconImageHref:"img/picture/map-pin.png",iconImageSize:[60,51],iconImageOffset:[-30,-51]});if(t.geoObjects.add(e),t.behaviors.disable(["scrollZoom"]),matchMedia){var n=function(e){e.matches?t.setCenter([59.938725,30.319447]):t.setCenter([59.938631,30.3230554])},r=window.matchMedia("(min-width: 1300px)");r.addListener(n),n(r)}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsid2luZG93IiwibWF0Y2hNZWRpYSIsInN0eWxlTWVkaWEiLCJtZWRpYSIsImluZm8iLCJzY3JpcHQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwic3R5bGUiLCJwYXJlbnROb2RlIiwiaW5zZXJ0QmVmb3JlIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImN1cnJlbnRTdHlsZSIsIm1hdGNoTWVkaXVtIiwidGV4dCIsInN0eWxlU2hlZXQiLCJ0ZXh0Q29udGVudCIsIndpZHRoIiwibWF0Y2hlcyIsInciLCJkb2MiLCJpbWFnZSIsImV4cG9zZSIsInBpY3R1cmVmaWxsIiwibW9kdWxlIiwiX3R5cGVvZiIsImV4cG9ydHMiLCJkZWZpbmUiLCJhbWQiLCJIVE1MUGljdHVyZUVsZW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiYW5jaG9yIiwic2V0SW50cmluc2ljU2l6ZSIsInBmIiwicmVnV0Rlc2MiLCJucyIsInNpemVzU3VwcG9ydGVkIiwiY3VyU3JjU3VwcG9ydGVkIiwidHJpbSIsInN0ciIsInJlcGxhY2UiLCJtYWtlVXJsIiwic3JjIiwiaHJlZiIsInJlc3RyaWN0c01peGVkQ29udGVudCIsImxvY2F0aW9uIiwibWF0Y2hlc01lZGlhIiwiZ2V0RHByIiwiZGV2aWNlUGl4ZWxSYXRpbyIsImdldFdpZHRoRnJvbUxlbmd0aCIsImxlbmd0aCIsImNzc1ZhbHVlIiwiaW5kZXhPZiIsInBhcnNlRmxvYXQiLCJsZW5ndGhFbCIsImNzc1RleHQiLCJlIiwiYm9keSIsImFwcGVuZENoaWxkIiwib2Zmc2V0V2lkdGgiLCJkZXRlY3RUeXBlU3VwcG9ydCIsInR5cGUiLCJ0eXBlVXJpIiwib25lcnJvciIsIkltYWdlIiwib25sb2FkIiwidHlwZXMiLCJpbml0VHlwZURldGVjdHMiLCJpbXBsZW1lbnRhdGlvbiIsImhhc0ZlYXR1cmUiLCJ2ZXJpZnlUeXBlU3VwcG9ydCIsInNvdXJjZSIsInBmVHlwZSIsInBhcnNlU2l6ZSIsInNvdXJjZVNpemVTdHIiLCJtYXRjaCIsImZpbmRXaWR0aEZyb21Tb3VyY2VTaXplIiwic291cmNlU2l6ZUxpc3RTdHIiLCJ3aW5uaW5nTGVuZ3RoIiwic291cmNlU2l6ZUxpc3QiLCJzcGxpdCIsImkiLCJsZW4iLCJzb3VyY2VTaXplIiwicGFyc2VkU2l6ZSIsIk1hdGgiLCJtYXgiLCJpbm5lcldpZHRoIiwiZG9jdW1lbnRFbGVtZW50IiwiY2xpZW50V2lkdGgiLCJwYXJzZVNyY3NldCIsInNyY3NldCIsImNhbmRpZGF0ZXMiLCJ1cmwiLCJwb3MiLCJzZWFyY2giLCJkZXNjcmlwdG9yIiwic2xpY2UiLCJkZXNjcG9zIiwicGFyc2VEZXNjcmlwdG9yIiwic2l6ZXNhdHRyIiwicmVzQ2FuZGlkYXRlIiwic2l6ZXMiLCJzaXplRGVzY3JpcHRvciIsIndpZHRoSW5Dc3NQaXhlbHMiLCJzcGxpdERlc2NyaXB0b3IiLCJjdXJyIiwibGFzdGNoYXIiLCJyZXMiLCJpc05hTiIsInBhcnNlSW50IiwiZ2V0Q2FuZGlkYXRlc0Zyb21Tb3VyY2VTZXQiLCJmb3JtYXR0ZWRDYW5kaWRhdGVzIiwiY2FuZGlkYXRlIiwiZG9kZ2VTcmNzZXQiLCJpbWciLCJzZXRBdHRyaWJ1dGUiLCJwcm9jZXNzU291cmNlU2V0IiwiZWwiLCJnZXRBdHRyaWJ1dGUiLCJ0b1VwcGVyQ2FzZSIsImJhY2tmYWNlVmlzaWJpbGl0eUZpeCIsInBpY0ltZyIsImN1cnJlbnRab29tIiwiem9vbSIsIldlYmtpdEJhY2tmYWNlVmlzaWJpbGl0eSIsImJlc3RDYW5kaWRhdGUiLCJwZlN0b3BJbnRyaW5zaWNTaXplIiwidW5kZWZpbmVkIiwiZGltcyIsInVybENhY2hlIiwicmVtb3ZlQ2hpbGQiLCJzZXRTaXplIiwicmVzb2x1dGlvbiIsImFwcGx5QmVzdENhbmRpZGF0ZSIsInNvcnQiLCJhc2NlbmRpbmdTb3J0Iiwic3Vic3RyIiwidG9Mb3dlckNhc2UiLCJjb25zb2xlIiwiY3VycmVudFNyYyIsImEiLCJiIiwicmVtb3ZlVmlkZW9TaGltIiwicGljdHVyZSIsInZpZGVvcyIsInZpZGVvIiwidnNvdXJjZXMiLCJnZXRBbGxFbGVtZW50cyIsImltZ3MiLCJoIiwiY3VyckltZyIsIm5vZGVOYW1lIiwiZWxlbXMiLCJwdXNoIiwiZ2V0TWF0Y2giLCJzb3VyY2VzIiwiY2hpbGROb2RlcyIsImoiLCJzbGVuIiwibm9kZVR5cGUiLCJ3YXJuIiwidHlwZVN1cHBvcnRlZCIsImhhbmRsZVJlc2l6ZSIsInJlZXZhbHVhdGUiLCJyZXNpemVUaW1lciIsImludGVydmFsSWQiLCJzZXRJbnRlcnZhbCIsInRlc3QiLCJyZWFkeVN0YXRlIiwiY2xlYXJJbnRlcnZhbCIsImNoZWNrUmVzaXplIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsImFkZEV2ZW50TGlzdGVuZXIiLCJydW5QaWN0dXJlZmlsbCIsImF0dGFjaEV2ZW50IiwiZWxlbWVudHMiLCJlbGVtZW50IiwicGFyZW50IiwiZmlyc3RNYXRjaCIsIm9wdGlvbnMiLCJwbGVuIiwiZXZhbHVhdGVkIiwibWFpbk5hdiIsInF1ZXJ5U2VsZWN0b3IiLCJtYWluTmF2QnV0dG9uIiwibXFOYXYiLCJXaWR0aENoYW5nZU5hdiIsIm1xIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiZXZ0IiwiY29udGFpbnMiLCJwcmV2ZW50RGVmYXVsdCIsImV4YW1wbGVCZWZvcmVCdG4iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXhhbXBsZVRvZ2dsZSIsImV4YW1wbGVBZnRlckJ0biIsInNob3dJbWdBZnRlciIsInNob3dJbWdCZWZvcmUiLCJ0b2dnbGVJbWciLCJpbWdBZnRlciIsImltZ0JlZm9yZSIsImltZ0hpZGUiLCJ0b2dnbGUiLCJ5bWFwcyIsInJlYWR5IiwibXlNYXAiLCJNYXAiLCJjZW50ZXIiLCJQbGFjZW1hcmsiLCJiYWxsb29uQ29udGVudEhlYWRlciIsImljb25MYXlvdXQiLCJiYWxsb29uQ29udGVudEJvZHkiLCJoaW50Q29udGVudCIsImljb25JbWFnZUhyZWYiLCJwbGFjZW1hcmsiLCJpY29uSW1hZ2VTaXplIiwiZGlzYWJsZSIsInNldE1hcENlbnRlciIsInNldENlbnRlciIsImdlb09iamVjdHMiLCJiZWhhdmlvcnMiLCJkZXZpY2VXaWR0aCJdLCJtYXBwaW5ncyI6ImtQQUdBQSxPQUFBQyxhQUFBRCxPQUFBQyxXQUFBLFdBR0EsSUFBQUMsRUFBQUYsT0FBQUUsWUFBQUYsT0FBQUcsTUFTQyxJQUFLRCxFQUFZLENBSGpCLElBR0FFLEVBSElGLEVBQWNGLFNBQU9FLGNBQWNGLFNBS3JDSyxFQUFjQyxTQUFTQyxxQkFBcUIsVUFBVSxHQUR2REMsRUFDQ0gsS0FBTSxXQURQRyxFQUVDSixHQUFjLG9CQUdmSSxFQUFLQyxXQUFTQyxhQUFBRixFQUFkSCxHQUtBRCxFQUFJLHFCQUFJSixRQUFpQ0EsT0FBT1csaUJBQWlCSCxFQUFPLE9BQVNBLEVBQU1JLGFBR3RGQyxFQUFBQSxDQUNDQSxZQUFRLFNBQUdWLEdBQVgsSUFBSVcsRUFBTyxVQUFZWCxFQUFRLHlDQUZwQixPQU9WSyxFQUZETyxXQUdDUCxFQUFBQSxXQUFNUSxRQUFjRixFQUFwQk4sRUFBTVEsWUFBY0YsRUFSdkIsUUFBQVYsRUFBQWEsUUFtQkNDLE9BQUFBLFNBQVNoQixHQUNUQyxNQUFBQSxDQUZNZSxRQUFQaEIsRUFBQVcsWUFBQVYsR0FBQSxPQUREQSxNQUFBQSxHQUFBLFFBMUNELElBdURDLFNBQUFnQixFQUFBQyxFQUFBQyxHQUlDLFNBQUFDLEVBQUFDLEdBRUMsWUFBQSxvQkFBQUMsT0FBQSxZQUFBQyxFQUFBRCxVQUFBLFdBQUFDLEVBQUFELE9BQUFFLFNBRUFGLE9BSERFLFFBR1lILEVBQ1gsbUJBQUFJLFFBQUFBLE9BQUFDLEtBQ29DRCxPQUFBLGNBQUEsV0FBQSxPQUFBSixJQUNwQyxXQUFBRSxFQUFBTixLQUNEQSxFQUFBSSxZQUFLQSxHQU9OLEdBQUtKLEVBQUVVLG1CQUNOUCxFQUFPLGtCQURSLENBTUFGLEVBQUlVLGNBQWUsV0FHbkIsSUEwQkNDLEVBa1VFQyxFQTVWQ0MsRUFBS2QsRUFBRUksYUFBZSxHQUUxQlcsRUFBWSxvQkFH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WixHQUVEQyxFQUFBQSxXQUFlMUIsSUFBQTJCLEdBQ2ZDLEVBQUFBLFVBQWFDLFFBQUUsQ0FIZCxlQUpIM04sV0FBQSxDQUFBLElBbUJXNE4sRUFMSyxTQUtkaEMsR0FDTUEsRUFBRzNLLFFBQ0wrTCxFQUFNYSxVQUFVLENBQUMsVUFBRCxZQUVoQmIsRUFBTWEsVUFBVSxDQUFDLFVBQVcsY0FaNUJDLEVBQU4vTixPQUFxQjBOLFdBQXJCLHVCQUNBVCxFQUFNZSxZQUFtQkgsR0FLdkJBLEVBQWFJIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG4gKiBQaWN0dXJlZmlsbFxyXG4gKi9cclxuLyohIFBpY3R1cmVmaWxsIC0gdjIuMy4xIC0gMjAxNS0wNC0wOVxyXG4qIGh0dHA6Ly9zY290dGplaGwuZ2l0aHViLmlvL3BpY3R1cmVmaWxsXHJcbiogQ29weXJpZ2h0IChjKSAyMDE1IGh0dHBzOi8vZ2l0aHViLmNvbS9zY290dGplaGwvcGljdHVyZWZpbGwvYmxvYi9tYXN0ZXIvQXV0aG9ycy50eHQ7IExpY2Vuc2VkIE1JVCAqL1xyXG4vKiEgbWF0Y2hNZWRpYSgpIHBvbHlmaWxsIC0gVGVzdCBhIENTUyBtZWRpYSB0eXBlL3F1ZXJ5IGluIEpTLiBBdXRob3JzICYgY29weXJpZ2h0IChjKSAyMDEyOiBTY290dCBKZWhsLCBQYXVsIElyaXNoLCBOaWNob2xhcyBaYWthcywgRGF2aWQgS25pZ2h0LiBEdWFsIE1JVC9CU0QgbGljZW5zZSAqL1xyXG5cclxud2luZG93Lm1hdGNoTWVkaWEgfHwgKHdpbmRvdy5tYXRjaE1lZGlhID0gZnVuY3Rpb24oKSB7XHJcblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5cdC8vIEZvciBicm93c2VycyB0aGF0IHN1cHBvcnQgbWF0Y2hNZWRpdW0gYXBpIHN1Y2ggYXMgSUUgOSBhbmQgd2Via2l0XHJcblx0dmFyIHN0eWxlTWVkaWEgPSAod2luZG93LnN0eWxlTWVkaWEgfHwgd2luZG93Lm1lZGlhKTtcclxuXHJcblx0Ly8gRm9yIHRob3NlIHRoYXQgZG9uJ3Qgc3VwcG9ydCBtYXRjaE1lZGl1bVxyXG5cdGlmICghc3R5bGVNZWRpYSkge1xyXG5cdFx0dmFyIHN0eWxlICAgICAgID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKSxcclxuXHRcdFx0c2NyaXB0ICAgICAgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0JylbMF0sXHJcblx0XHRcdGluZm8gICAgICAgID0gbnVsbDtcclxuXHJcblx0XHRzdHlsZS50eXBlICA9ICd0ZXh0L2Nzcyc7XHJcblx0XHRzdHlsZS5pZCAgICA9ICdtYXRjaG1lZGlhanMtdGVzdCc7XHJcblxyXG5cdFx0c2NyaXB0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHN0eWxlLCBzY3JpcHQpO1xyXG5cclxuXHRcdC8vICdzdHlsZS5jdXJyZW50U3R5bGUnIGlzIHVzZWQgYnkgSUUgPD0gOCBhbmQgJ3dpbmRvdy5nZXRDb21wdXRlZFN0eWxlJyBmb3IgYWxsIG90aGVyIGJyb3dzZXJzXHJcblx0XHRpbmZvID0gKCdnZXRDb21wdXRlZFN0eWxlJyBpbiB3aW5kb3cpICYmIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHN0eWxlLCBudWxsKSB8fCBzdHlsZS5jdXJyZW50U3R5bGU7XHJcblxyXG5cdFx0c3R5bGVNZWRpYSA9IHtcclxuXHRcdFx0bWF0Y2hNZWRpdW06IGZ1bmN0aW9uKG1lZGlhKSB7XHJcblx0XHRcdFx0dmFyIHRleHQgPSAnQG1lZGlhICcgKyBtZWRpYSArICd7ICNtYXRjaG1lZGlhanMtdGVzdCB7IHdpZHRoOiAxcHg7IH0gfSc7XHJcblxyXG5cdFx0XHRcdC8vICdzdHlsZS5zdHlsZVNoZWV0JyBpcyB1c2VkIGJ5IElFIDw9IDggYW5kICdzdHlsZS50ZXh0Q29udGVudCcgZm9yIGFsbCBvdGhlciBicm93c2Vyc1xyXG5cdFx0XHRcdGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XHJcblx0XHRcdFx0XHRzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSB0ZXh0O1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRzdHlsZS50ZXh0Q29udGVudCA9IHRleHQ7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBUZXN0IGlmIG1lZGlhIHF1ZXJ5IGlzIHRydWUgb3IgZmFsc2VcclxuXHRcdFx0XHRyZXR1cm4gaW5mby53aWR0aCA9PT0gJzFweCc7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gZnVuY3Rpb24obWVkaWEpIHtcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdG1hdGNoZXM6IHN0eWxlTWVkaWEubWF0Y2hNZWRpdW0obWVkaWEgfHwgJ2FsbCcpLFxyXG5cdFx0XHRtZWRpYTogbWVkaWEgfHwgJ2FsbCdcclxuXHRcdH07XHJcblx0fTtcclxufSgpKTtcclxuLyohIFBpY3R1cmVmaWxsIC0gUmVzcG9uc2l2ZSBJbWFnZXMgdGhhdCB3b3JrIHRvZGF5LlxyXG4qICBBdXRob3I6IFNjb3R0IEplaGwsIEZpbGFtZW50IEdyb3VwLCAyMDEyICggbmV3IHByb3Bvc2FsIGltcGxlbWVudGVkIGJ5IFNoYXduIEphbnNlcGFyIClcclxuKiAgTGljZW5zZTogTUlUL0dQTHYyXHJcbiogIFNwZWM6IGh0dHA6Ly9waWN0dXJlLnJlc3BvbnNpdmVpbWFnZXMub3JnL1xyXG4qL1xyXG4oZnVuY3Rpb24oIHcsIGRvYywgaW1hZ2UgKSB7XHJcblx0Ly8gRW5hYmxlIHN0cmljdCBtb2RlXHJcblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5cdGZ1bmN0aW9uIGV4cG9zZShwaWN0dXJlZmlsbCkge1xyXG5cdFx0LyogZXhwb3NlIHBpY3R1cmVmaWxsICovXHJcblx0XHRpZiAoIHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcIm9iamVjdFwiICkge1xyXG5cdFx0XHQvLyBDb21tb25KUywganVzdCBleHBvcnRcclxuXHRcdFx0bW9kdWxlLmV4cG9ydHMgPSBwaWN0dXJlZmlsbDtcclxuXHRcdH0gZWxzZSBpZiAoIHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kICkge1xyXG5cdFx0XHQvLyBBTUQgc3VwcG9ydFxyXG5cdFx0XHRkZWZpbmUoIFwicGljdHVyZWZpbGxcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBwaWN0dXJlZmlsbDsgfSApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCB0eXBlb2YgdyA9PT0gXCJvYmplY3RcIiApIHtcclxuXHRcdFx0Ly8gSWYgbm8gQU1EIGFuZCB3ZSBhcmUgaW4gdGhlIGJyb3dzZXIsIGF0dGFjaCB0byB3aW5kb3dcclxuXHRcdFx0dy5waWN0dXJlZmlsbCA9IHBpY3R1cmVmaWxsO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Ly8gSWYgcGljdHVyZSBpcyBzdXBwb3J0ZWQsIHdlbGwsIHRoYXQncyBhd2Vzb21lLiBMZXQncyBnZXQgb3V0dGEgaGVyZS4uLlxyXG5cdGlmICggdy5IVE1MUGljdHVyZUVsZW1lbnQgKSB7XHJcblx0XHRleHBvc2UoZnVuY3Rpb24oKSB7IH0pO1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHJcblx0Ly8gSFRNTCBzaGltfHYgaXQgZm9yIG9sZCBJRSAoSUU5IHdpbGwgc3RpbGwgbmVlZCB0aGUgSFRNTCB2aWRlbyB0YWcgd29ya2Fyb3VuZClcclxuXHRkb2MuY3JlYXRlRWxlbWVudCggXCJwaWN0dXJlXCIgKTtcclxuXHJcblx0Ly8gbG9jYWwgb2JqZWN0IGZvciBtZXRob2QgcmVmZXJlbmNlcyBhbmQgdGVzdGluZyBleHBvc3VyZVxyXG5cdHZhciBwZiA9IHcucGljdHVyZWZpbGwgfHwge307XHJcblxyXG5cdHZhciByZWdXRGVzYyA9IC9cXHMrXFwrP1xcZCsoZVxcZCspP3cvO1xyXG5cclxuXHQvLyBuYW1lc3BhY2VcclxuXHRwZi5ucyA9IFwicGljdHVyZWZpbGxcIjtcclxuXHJcblx0Ly8gc3Jjc2V0IHN1cHBvcnQgdGVzdFxyXG5cdChmdW5jdGlvbigpIHtcclxuXHRcdHBmLnNyY3NldFN1cHBvcnRlZCA9IFwic3Jjc2V0XCIgaW4gaW1hZ2U7XHJcblx0XHRwZi5zaXplc1N1cHBvcnRlZCA9IFwic2l6ZXNcIiBpbiBpbWFnZTtcclxuXHRcdHBmLmN1clNyY1N1cHBvcnRlZCA9IFwiY3VycmVudFNyY1wiIGluIGltYWdlO1xyXG5cdH0pKCk7XHJcblxyXG5cdC8vIGp1c3QgYSBzdHJpbmcgdHJpbSB3b3JrYXJvdW5kXHJcblx0cGYudHJpbSA9IGZ1bmN0aW9uKCBzdHIgKSB7XHJcblx0XHRyZXR1cm4gc3RyLnRyaW0gPyBzdHIudHJpbSgpIDogc3RyLnJlcGxhY2UoIC9eXFxzK3xcXHMrJC9nLCBcIlwiICk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogR2V0cyBhIHN0cmluZyBhbmQgcmV0dXJucyB0aGUgYWJzb2x1dGUgVVJMXHJcblx0ICogQHBhcmFtIHNyY1xyXG5cdCAqIEByZXR1cm5zIHtTdHJpbmd9IGFic29sdXRlIFVSTFxyXG5cdCAqL1xyXG5cdHBmLm1ha2VVcmwgPSAoZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgYW5jaG9yID0gZG9jLmNyZWF0ZUVsZW1lbnQoIFwiYVwiICk7XHJcblx0XHRyZXR1cm4gZnVuY3Rpb24oc3JjKSB7XHJcblx0XHRcdGFuY2hvci5ocmVmID0gc3JjO1xyXG5cdFx0XHRyZXR1cm4gYW5jaG9yLmhyZWY7XHJcblx0XHR9O1xyXG5cdH0pKCk7XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNob3J0Y3V0IG1ldGhvZCBmb3IgaHR0cHM6Ly93M2MuZ2l0aHViLmlvL3dlYmFwcHNlYy9zcGVjcy9taXhlZGNvbnRlbnQvI3Jlc3RyaWN0cy1taXhlZC1jb250ZW50ICggZm9yIGVhc3kgb3ZlcnJpZGluZyBpbiB0ZXN0cyApXHJcblx0ICovXHJcblx0cGYucmVzdHJpY3RzTWl4ZWRDb250ZW50ID0gZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdy5sb2NhdGlvbi5wcm90b2NvbCA9PT0gXCJodHRwczpcIjtcclxuXHR9O1xyXG5cdC8qKlxyXG5cdCAqIFNob3J0Y3V0IG1ldGhvZCBmb3IgbWF0Y2hNZWRpYSAoIGZvciBlYXN5IG92ZXJyaWRpbmcgaW4gdGVzdHMgKVxyXG5cdCAqL1xyXG5cclxuXHRwZi5tYXRjaGVzTWVkaWEgPSBmdW5jdGlvbiggbWVkaWEgKSB7XHJcblx0XHRyZXR1cm4gdy5tYXRjaE1lZGlhICYmIHcubWF0Y2hNZWRpYSggbWVkaWEgKS5tYXRjaGVzO1xyXG5cdH07XHJcblxyXG5cdC8vIFNob3J0Y3V0IG1ldGhvZCBmb3IgYGRldmljZVBpeGVsUmF0aW9gICggZm9yIGVhc3kgb3ZlcnJpZGluZyBpbiB0ZXN0cyApXHJcblx0cGYuZ2V0RHByID0gZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gKCB3LmRldmljZVBpeGVsUmF0aW8gfHwgMSApO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldCB3aWR0aCBpbiBjc3MgcGl4ZWwgdmFsdWUgZnJvbSBhIFwibGVuZ3RoXCIgdmFsdWVcclxuXHQgKiBodHRwOi8vZGV2LnczLm9yZy9jc3N3Zy9jc3MtdmFsdWVzLTMvI2xlbmd0aC12YWx1ZVxyXG5cdCAqL1xyXG5cdHBmLmdldFdpZHRoRnJvbUxlbmd0aCA9IGZ1bmN0aW9uKCBsZW5ndGggKSB7XHJcblx0XHR2YXIgY3NzVmFsdWU7XHJcblx0XHQvLyBJZiBhIGxlbmd0aCBpcyBzcGVjaWZpZWQgYW5kIGRvZXNu4oCZdCBjb250YWluIGEgcGVyY2VudGFnZSwgYW5kIGl0IGlzIGdyZWF0ZXIgdGhhbiAwIG9yIHVzaW5nIGBjYWxjYCwgdXNlIGl0LiBFbHNlLCBhYm9ydC5cclxuICAgICAgICBpZiAoICEobGVuZ3RoICYmIGxlbmd0aC5pbmRleE9mKCBcIiVcIiApID4gLTEgPT09IGZhbHNlICYmICggcGFyc2VGbG9hdCggbGVuZ3RoICkgPiAwIHx8IGxlbmd0aC5pbmRleE9mKCBcImNhbGMoXCIgKSA+IC0xICkpICkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogSWYgbGVuZ3RoIGlzIHNwZWNpZmllZCBpbiAgYHZ3YCB1bml0cywgdXNlIGAlYCBpbnN0ZWFkIHNpbmNlIHRoZSBkaXYgd2XigJlyZSBtZWFzdXJpbmdcclxuXHRcdCAqIGlzIGluamVjdGVkIGF0IHRoZSB0b3Agb2YgdGhlIGRvY3VtZW50LlxyXG5cdFx0ICpcclxuXHRcdCAqIFRPRE86IG1heWJlIHdlIHNob3VsZCBwdXQgdGhpcyBiZWhpbmQgYSBmZWF0dXJlIHRlc3QgZm9yIGB2d2A/IFRoZSByaXNrIG9mIGRvaW5nIHRoaXMgaXMgcG9zc2libGUgYnJvd3NlciBpbmNvbnNpc3RhbmNpZXMgd2l0aCB2dyB2cyAlXHJcblx0XHQgKi9cclxuXHRcdGxlbmd0aCA9IGxlbmd0aC5yZXBsYWNlKCBcInZ3XCIsIFwiJVwiICk7XHJcblxyXG5cdFx0Ly8gQ3JlYXRlIGEgY2FjaGVkIGVsZW1lbnQgZm9yIGdldHRpbmcgbGVuZ3RoIHZhbHVlIHdpZHRoc1xyXG5cdFx0aWYgKCAhcGYubGVuZ3RoRWwgKSB7XHJcblx0XHRcdHBmLmxlbmd0aEVsID0gZG9jLmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKTtcclxuXHJcblx0XHRcdC8vIFBvc2l0aW9uaW5nIHN0eWxlcyBoZWxwIHByZXZlbnQgcGFkZGluZy9tYXJnaW4vd2lkdGggb24gYGh0bWxgIG9yIGBib2R5YCBmcm9tIHRocm93aW5nIGNhbGN1bGF0aW9ucyBvZmYuXHJcblx0XHRcdHBmLmxlbmd0aEVsLnN0eWxlLmNzc1RleHQgPSBcImJvcmRlcjowO2Rpc3BsYXk6YmxvY2s7Zm9udC1zaXplOjFlbTtsZWZ0OjA7bWFyZ2luOjA7cGFkZGluZzowO3Bvc2l0aW9uOmFic29sdXRlO3Zpc2liaWxpdHk6aGlkZGVuXCI7XHJcblxyXG5cdFx0XHQvLyBBZGQgYSBjbGFzcywgc28gdGhhdCBldmVyeW9uZSBrbm93cyB3aGVyZSB0aGlzIGVsZW1lbnQgY29tZXMgZnJvbVxyXG5cdFx0XHRwZi5sZW5ndGhFbC5jbGFzc05hbWUgPSBcImhlbHBlci1mcm9tLXBpY3R1cmVmaWxsLWpzXCI7XHJcblx0XHR9XHJcblxyXG5cdFx0cGYubGVuZ3RoRWwuc3R5bGUud2lkdGggPSBcIjBweFwiO1xyXG5cclxuICAgICAgICB0cnkge1xyXG5cdFx0ICAgIHBmLmxlbmd0aEVsLnN0eWxlLndpZHRoID0gbGVuZ3RoO1xyXG4gICAgICAgIH0gY2F0Y2ggKCBlICkge31cclxuXHJcblx0XHRkb2MuYm9keS5hcHBlbmRDaGlsZChwZi5sZW5ndGhFbCk7XHJcblxyXG5cdFx0Y3NzVmFsdWUgPSBwZi5sZW5ndGhFbC5vZmZzZXRXaWR0aDtcclxuXHJcblx0XHRpZiAoIGNzc1ZhbHVlIDw9IDAgKSB7XHJcblx0XHRcdGNzc1ZhbHVlID0gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0ZG9jLmJvZHkucmVtb3ZlQ2hpbGQoIHBmLmxlbmd0aEVsICk7XHJcblxyXG5cdFx0cmV0dXJuIGNzc1ZhbHVlO1xyXG5cdH07XHJcblxyXG4gICAgcGYuZGV0ZWN0VHlwZVN1cHBvcnQgPSBmdW5jdGlvbiggdHlwZSwgdHlwZVVyaSApIHtcclxuICAgICAgICAvLyBiYXNlZCBvbiBNb2Rlcm5penIncyBsb3NzbGVzcyBpbWctd2VicCB0ZXN0XHJcbiAgICAgICAgLy8gbm90ZTogYXN5bmNocm9ub3VzXHJcbiAgICAgICAgdmFyIGltYWdlID0gbmV3IHcuSW1hZ2UoKTtcclxuICAgICAgICBpbWFnZS5vbmVycm9yID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHBmLnR5cGVzWyB0eXBlIF0gPSBmYWxzZTtcclxuICAgICAgICAgICAgcGljdHVyZWZpbGwoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBwZi50eXBlc1sgdHlwZSBdID0gaW1hZ2Uud2lkdGggPT09IDE7XHJcbiAgICAgICAgICAgIHBpY3R1cmVmaWxsKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBpbWFnZS5zcmMgPSB0eXBlVXJpO1xyXG5cclxuICAgICAgICByZXR1cm4gXCJwZW5kaW5nXCI7XHJcbiAgICB9O1xyXG5cdC8vIGNvbnRhaW5lciBvZiBzdXBwb3J0ZWQgbWltZSB0eXBlcyB0aGF0IG9uZSBtaWdodCBuZWVkIHRvIHF1YWxpZnkgYmVmb3JlIHVzaW5nXHJcblx0cGYudHlwZXMgPSBwZi50eXBlcyB8fCB7fTtcclxuXHJcblx0cGYuaW5pdFR5cGVEZXRlY3RzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8gQWRkIHN1cHBvcnQgZm9yIHN0YW5kYXJkIG1pbWUgdHlwZXNcclxuICAgICAgICBwZi50eXBlc1sgXCJpbWFnZS9qcGVnXCIgXSA9IHRydWU7XHJcbiAgICAgICAgcGYudHlwZXNbIFwiaW1hZ2UvZ2lmXCIgXSA9IHRydWU7XHJcbiAgICAgICAgcGYudHlwZXNbIFwiaW1hZ2UvcG5nXCIgXSA9IHRydWU7XHJcbiAgICAgICAgcGYudHlwZXNbIFwiaW1hZ2Uvc3ZnK3htbFwiIF0gPSBkb2MuaW1wbGVtZW50YXRpb24uaGFzRmVhdHVyZShcImh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjSW1hZ2VcIiwgXCIxLjFcIik7XHJcbiAgICAgICAgcGYudHlwZXNbIFwiaW1hZ2Uvd2VicFwiIF0gPSBwZi5kZXRlY3RUeXBlU3VwcG9ydChcImltYWdlL3dlYnBcIiwgXCJkYXRhOmltYWdlL3dlYnA7YmFzZTY0LFVrbEdSaDRBQUFCWFJVSlFWbEE0VEJFQUFBQXZBQUFBQUFmUS8vNzN2LytCaU9oL0FBQT1cIik7XHJcbiAgICB9O1xyXG5cclxuXHRwZi52ZXJpZnlUeXBlU3VwcG9ydCA9IGZ1bmN0aW9uKCBzb3VyY2UgKSB7XHJcblx0XHR2YXIgdHlwZSA9IHNvdXJjZS5nZXRBdHRyaWJ1dGUoIFwidHlwZVwiICk7XHJcblx0XHQvLyBpZiB0eXBlIGF0dHJpYnV0ZSBleGlzdHMsIHJldHVybiB0ZXN0IHJlc3VsdCwgb3RoZXJ3aXNlIHJldHVybiB0cnVlXHJcblx0XHRpZiAoIHR5cGUgPT09IG51bGwgfHwgdHlwZSA9PT0gXCJcIiApIHtcclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHZhciBwZlR5cGUgPSBwZi50eXBlc1sgdHlwZSBdO1xyXG5cdFx0XHQvLyBpZiB0aGUgdHlwZSB0ZXN0IGlzIGEgZnVuY3Rpb24sIHJ1biBpdCBhbmQgcmV0dXJuIFwicGVuZGluZ1wiIHN0YXR1cy4gVGhlIGZ1bmN0aW9uIHdpbGwgcmVydW4gcGljdHVyZWZpbGwgb24gcGVuZGluZyBlbGVtZW50cyBvbmNlIGZpbmlzaGVkLlxyXG5cdFx0XHRpZiAoIHR5cGVvZiBwZlR5cGUgPT09IFwic3RyaW5nXCIgJiYgcGZUeXBlICE9PSBcInBlbmRpbmdcIikge1xyXG5cdFx0XHRcdHBmLnR5cGVzWyB0eXBlIF0gPSBwZi5kZXRlY3RUeXBlU3VwcG9ydCggdHlwZSwgcGZUeXBlICk7XHJcblx0XHRcdFx0cmV0dXJuIFwicGVuZGluZ1wiO1xyXG5cdFx0XHR9IGVsc2UgaWYgKCB0eXBlb2YgcGZUeXBlID09PSBcImZ1bmN0aW9uXCIgKSB7XHJcblx0XHRcdFx0cGZUeXBlKCk7XHJcblx0XHRcdFx0cmV0dXJuIFwicGVuZGluZ1wiO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHJldHVybiBwZlR5cGU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQvLyBQYXJzZXMgYW4gaW5kaXZpZHVhbCBgc2l6ZWAgYW5kIHJldHVybnMgdGhlIGxlbmd0aCwgYW5kIG9wdGlvbmFsIG1lZGlhIHF1ZXJ5XHJcblx0cGYucGFyc2VTaXplID0gZnVuY3Rpb24oIHNvdXJjZVNpemVTdHIgKSB7XHJcblx0XHR2YXIgbWF0Y2ggPSAvKFxcKFteKV0rXFwpKT9cXHMqKC4rKS9nLmV4ZWMoIHNvdXJjZVNpemVTdHIgKTtcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdG1lZGlhOiBtYXRjaCAmJiBtYXRjaFsxXSxcclxuXHRcdFx0bGVuZ3RoOiBtYXRjaCAmJiBtYXRjaFsyXVxyXG5cdFx0fTtcclxuXHR9O1xyXG5cclxuXHQvLyBUYWtlcyBhIHN0cmluZyBvZiBzaXplcyBhbmQgcmV0dXJucyB0aGUgd2lkdGggaW4gcGl4ZWxzIGFzIGEgbnVtYmVyXHJcblx0cGYuZmluZFdpZHRoRnJvbVNvdXJjZVNpemUgPSBmdW5jdGlvbiggc291cmNlU2l6ZUxpc3RTdHIgKSB7XHJcblx0XHQvLyBTcGxpdCB1cCBzb3VyY2Ugc2l6ZSBsaXN0LCBpZSAoIG1heC13aWR0aDogMzBlbSApIDEwMCUsICggbWF4LXdpZHRoOiA1MGVtICkgNTAlLCAzMyVcclxuXHRcdC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yIChtaW4td2lkdGg6MzBlbSkgY2FsYygzMCUgLSAxNXB4KVxyXG5cdFx0dmFyIHNvdXJjZVNpemVMaXN0ID0gcGYudHJpbSggc291cmNlU2l6ZUxpc3RTdHIgKS5zcGxpdCggL1xccyosXFxzKi8gKSxcclxuXHRcdFx0d2lubmluZ0xlbmd0aDtcclxuXHJcblx0XHRmb3IgKCB2YXIgaSA9IDAsIGxlbiA9IHNvdXJjZVNpemVMaXN0Lmxlbmd0aDsgaSA8IGxlbjsgaSsrICkge1xyXG5cdFx0XHQvLyBNYXRjaCA8bWVkaWEtY29uZGl0aW9uPj8gbGVuZ3RoLCBpZSAoIG1pbi13aWR0aDogNTBlbSApIDEwMCVcclxuXHRcdFx0dmFyIHNvdXJjZVNpemUgPSBzb3VyY2VTaXplTGlzdFsgaSBdLFxyXG5cdFx0XHRcdC8vIFNwbGl0IFwiKCBtaW4td2lkdGg6IDUwZW0gKSAxMDAlXCIgaW50byBzZXBhcmF0ZSBzdHJpbmdzXHJcblx0XHRcdFx0cGFyc2VkU2l6ZSA9IHBmLnBhcnNlU2l6ZSggc291cmNlU2l6ZSApLFxyXG5cdFx0XHRcdGxlbmd0aCA9IHBhcnNlZFNpemUubGVuZ3RoLFxyXG5cdFx0XHRcdG1lZGlhID0gcGFyc2VkU2l6ZS5tZWRpYTtcclxuXHJcblx0XHRcdGlmICggIWxlbmd0aCApIHtcclxuXHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0fVxyXG5cdFx0XHQvLyBpZiB0aGVyZSBpcyBubyBtZWRpYSBxdWVyeSBvciBpdCBtYXRjaGVzLCBjaG9vc2UgdGhpcyBhcyBvdXIgd2lubmluZyBsZW5ndGhcclxuXHRcdFx0aWYgKCAoIW1lZGlhIHx8IHBmLm1hdGNoZXNNZWRpYSggbWVkaWEgKSkgJiZcclxuXHRcdFx0XHQvLyBwYXNzIHRoZSBsZW5ndGggdG8gYSBtZXRob2QgdGhhdCBjYW4gcHJvcGVybHkgZGV0ZXJtaW5lIGxlbmd0aFxyXG5cdFx0XHRcdC8vIGluIHBpeGVscyBiYXNlZCBvbiB0aGVzZSBmb3JtYXRzOiBodHRwOi8vZGV2LnczLm9yZy9jc3N3Zy9jc3MtdmFsdWVzLTMvI2xlbmd0aC12YWx1ZVxyXG5cdFx0XHRcdCh3aW5uaW5nTGVuZ3RoID0gcGYuZ2V0V2lkdGhGcm9tTGVuZ3RoKCBsZW5ndGggKSkgKSB7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvL2lmIHdlIGhhdmUgbm8gd2lubmluZ0xlbmd0aCBmYWxsYmFjayB0byAxMDB2d1xyXG5cdFx0cmV0dXJuIHdpbm5pbmdMZW5ndGggfHwgTWF0aC5tYXgody5pbm5lcldpZHRoIHx8IDAsIGRvYy5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgpO1xyXG5cdH07XHJcblxyXG5cdHBmLnBhcnNlU3Jjc2V0ID0gZnVuY3Rpb24oIHNyY3NldCApIHtcclxuXHRcdC8qKlxyXG5cdFx0ICogQSBsb3Qgb2YgdGhpcyB3YXMgcHVsbGVkIGZyb20gQm9yaXMgU211c+KAmSBwYXJzZXIgZm9yIHRoZSBub3ctZGVmdW5jdCBXSEFUV0cgYHNyY3NldGBcclxuXHRcdCAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ib3Jpc211cy9zcmNzZXQtcG9seWZpbGwvYmxvYi9tYXN0ZXIvanMvc3Jjc2V0LWluZm8uanNcclxuXHRcdCAqXHJcblx0XHQgKiAxLiBMZXQgaW5wdXQgKGBzcmNzZXRgKSBiZSB0aGUgdmFsdWUgcGFzc2VkIHRvIHRoaXMgYWxnb3JpdGhtLlxyXG5cdFx0ICogMi4gTGV0IHBvc2l0aW9uIGJlIGEgcG9pbnRlciBpbnRvIGlucHV0LCBpbml0aWFsbHkgcG9pbnRpbmcgYXQgdGhlIHN0YXJ0IG9mIHRoZSBzdHJpbmcuXHJcblx0XHQgKiAzLiBMZXQgcmF3IGNhbmRpZGF0ZXMgYmUgYW4gaW5pdGlhbGx5IGVtcHR5IG9yZGVyZWQgbGlzdCBvZiBVUkxzIHdpdGggYXNzb2NpYXRlZFxyXG5cdFx0ICogICAgdW5wYXJzZWQgZGVzY3JpcHRvcnMuIFRoZSBvcmRlciBvZiBlbnRyaWVzIGluIHRoZSBsaXN0IGlzIHRoZSBvcmRlciBpbiB3aGljaCBlbnRyaWVzXHJcblx0XHQgKiAgICBhcmUgYWRkZWQgdG8gdGhlIGxpc3QuXHJcblx0XHQgKi9cclxuXHRcdHZhciBjYW5kaWRhdGVzID0gW107XHJcblxyXG5cdFx0d2hpbGUgKCBzcmNzZXQgIT09IFwiXCIgKSB7XHJcblx0XHRcdHNyY3NldCA9IHNyY3NldC5yZXBsYWNlKCAvXlxccysvZywgXCJcIiApO1xyXG5cclxuXHRcdFx0Ly8gNS4gQ29sbGVjdCBhIHNlcXVlbmNlIG9mIGNoYXJhY3RlcnMgdGhhdCBhcmUgbm90IHNwYWNlIGNoYXJhY3RlcnMsIGFuZCBsZXQgdGhhdCBiZSB1cmwuXHJcblx0XHRcdHZhciBwb3MgPSBzcmNzZXQuc2VhcmNoKC9cXHMvZyksXHJcblx0XHRcdFx0dXJsLCBkZXNjcmlwdG9yID0gbnVsbDtcclxuXHJcblx0XHRcdGlmICggcG9zICE9PSAtMSApIHtcclxuXHRcdFx0XHR1cmwgPSBzcmNzZXQuc2xpY2UoIDAsIHBvcyApO1xyXG5cclxuXHRcdFx0XHR2YXIgbGFzdCA9IHVybC5zbGljZSgtMSk7XHJcblxyXG5cdFx0XHRcdC8vIDYuIElmIHVybCBlbmRzIHdpdGggYSBVKzAwMkMgQ09NTUEgY2hhcmFjdGVyICgsKSwgcmVtb3ZlIHRoYXQgY2hhcmFjdGVyIGZyb20gdXJsXHJcblx0XHRcdFx0Ly8gYW5kIGxldCBkZXNjcmlwdG9ycyBiZSB0aGUgZW1wdHkgc3RyaW5nLiBPdGhlcndpc2UsIGZvbGxvdyB0aGVzZSBzdWJzdGVwc1xyXG5cdFx0XHRcdC8vIDYuMS4gSWYgdXJsIGlzIGVtcHR5LCB0aGVuIGp1bXAgdG8gdGhlIHN0ZXAgbGFiZWxlZCBkZXNjcmlwdG9yIHBhcnNlci5cclxuXHJcblx0XHRcdFx0aWYgKCBsYXN0ID09PSBcIixcIiB8fCB1cmwgPT09IFwiXCIgKSB7XHJcblx0XHRcdFx0XHR1cmwgPSB1cmwucmVwbGFjZSggLywrJC8sIFwiXCIgKTtcclxuXHRcdFx0XHRcdGRlc2NyaXB0b3IgPSBcIlwiO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRzcmNzZXQgPSBzcmNzZXQuc2xpY2UoIHBvcyArIDEgKTtcclxuXHJcblx0XHRcdFx0Ly8gNi4yLiBDb2xsZWN0IGEgc2VxdWVuY2Ugb2YgY2hhcmFjdGVycyB0aGF0IGFyZSBub3QgVSswMDJDIENPTU1BIGNoYXJhY3RlcnMgKCwpLCBhbmRcclxuXHRcdFx0XHQvLyBsZXQgdGhhdCBiZSBkZXNjcmlwdG9ycy5cclxuXHRcdFx0XHRpZiAoIGRlc2NyaXB0b3IgPT09IG51bGwgKSB7XHJcblx0XHRcdFx0XHR2YXIgZGVzY3BvcyA9IHNyY3NldC5pbmRleE9mKCBcIixcIiApO1xyXG5cdFx0XHRcdFx0aWYgKCBkZXNjcG9zICE9PSAtMSApIHtcclxuXHRcdFx0XHRcdFx0ZGVzY3JpcHRvciA9IHNyY3NldC5zbGljZSggMCwgZGVzY3BvcyApO1xyXG5cdFx0XHRcdFx0XHRzcmNzZXQgPSBzcmNzZXQuc2xpY2UoIGRlc2Nwb3MgKyAxICk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRkZXNjcmlwdG9yID0gc3Jjc2V0O1xyXG5cdFx0XHRcdFx0XHRzcmNzZXQgPSBcIlwiO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR1cmwgPSBzcmNzZXQ7XHJcblx0XHRcdFx0c3Jjc2V0ID0gXCJcIjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gNy4gQWRkIHVybCB0byByYXcgY2FuZGlkYXRlcywgYXNzb2NpYXRlZCB3aXRoIGRlc2NyaXB0b3JzLlxyXG5cdFx0XHRpZiAoIHVybCB8fCBkZXNjcmlwdG9yICkge1xyXG5cdFx0XHRcdGNhbmRpZGF0ZXMucHVzaCh7XHJcblx0XHRcdFx0XHR1cmw6IHVybCxcclxuXHRcdFx0XHRcdGRlc2NyaXB0b3I6IGRlc2NyaXB0b3JcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGNhbmRpZGF0ZXM7XHJcblx0fTtcclxuXHJcblx0cGYucGFyc2VEZXNjcmlwdG9yID0gZnVuY3Rpb24oIGRlc2NyaXB0b3IsIHNpemVzYXR0ciApIHtcclxuXHRcdC8vIDExLiBEZXNjcmlwdG9yIHBhcnNlcjogTGV0IGNhbmRpZGF0ZXMgYmUgYW4gaW5pdGlhbGx5IGVtcHR5IHNvdXJjZSBzZXQuIFRoZSBvcmRlciBvZiBlbnRyaWVzIGluIHRoZSBsaXN0XHJcblx0XHQvLyBpcyB0aGUgb3JkZXIgaW4gd2hpY2ggZW50cmllcyBhcmUgYWRkZWQgdG8gdGhlIGxpc3QuXHJcblx0XHR2YXIgc2l6ZXMgPSBzaXplc2F0dHIgfHwgXCIxMDB2d1wiLFxyXG5cdFx0XHRzaXplRGVzY3JpcHRvciA9IGRlc2NyaXB0b3IgJiYgZGVzY3JpcHRvci5yZXBsYWNlKCAvKF5cXHMrfFxccyskKS9nLCBcIlwiICksXHJcblx0XHRcdHdpZHRoSW5Dc3NQaXhlbHMgPSBwZi5maW5kV2lkdGhGcm9tU291cmNlU2l6ZSggc2l6ZXMgKSxcclxuXHRcdFx0cmVzQ2FuZGlkYXRlO1xyXG5cclxuXHRcdFx0aWYgKCBzaXplRGVzY3JpcHRvciApIHtcclxuXHRcdFx0XHR2YXIgc3BsaXREZXNjcmlwdG9yID0gc2l6ZURlc2NyaXB0b3Iuc3BsaXQoXCIgXCIpO1xyXG5cclxuXHRcdFx0XHRmb3IgKHZhciBpID0gc3BsaXREZXNjcmlwdG9yLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcblx0XHRcdFx0XHR2YXIgY3VyciA9IHNwbGl0RGVzY3JpcHRvclsgaSBdLFxyXG5cdFx0XHRcdFx0XHRsYXN0Y2hhciA9IGN1cnIgJiYgY3Vyci5zbGljZSggY3Vyci5sZW5ndGggLSAxICk7XHJcblxyXG5cdFx0XHRcdFx0aWYgKCAoIGxhc3RjaGFyID09PSBcImhcIiB8fCBsYXN0Y2hhciA9PT0gXCJ3XCIgKSAmJiAhcGYuc2l6ZXNTdXBwb3J0ZWQgKSB7XHJcblx0XHRcdFx0XHRcdHJlc0NhbmRpZGF0ZSA9IHBhcnNlRmxvYXQoICggcGFyc2VJbnQoIGN1cnIsIDEwICkgLyB3aWR0aEluQ3NzUGl4ZWxzICkgKTtcclxuXHRcdFx0XHRcdH0gZWxzZSBpZiAoIGxhc3RjaGFyID09PSBcInhcIiApIHtcclxuXHRcdFx0XHRcdFx0dmFyIHJlcyA9IGN1cnIgJiYgcGFyc2VGbG9hdCggY3VyciwgMTAgKTtcclxuXHRcdFx0XHRcdFx0cmVzQ2FuZGlkYXRlID0gcmVzICYmICFpc05hTiggcmVzICkgPyByZXMgOiAxO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0cmV0dXJuIHJlc0NhbmRpZGF0ZSB8fCAxO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIFRha2VzIGEgc3Jjc2V0IGluIHRoZSBmb3JtIG9mIHVybC9cclxuXHQgKiBleC4gXCJpbWFnZXMvcGljLW1lZGl1bS5wbmcgMXgsIGltYWdlcy9waWMtbWVkaXVtLTJ4LnBuZyAyeFwiIG9yXHJcblx0ICogICAgIFwiaW1hZ2VzL3BpYy1tZWRpdW0ucG5nIDQwMHcsIGltYWdlcy9waWMtbWVkaXVtLTJ4LnBuZyA4MDB3XCIgb3JcclxuXHQgKiAgICAgXCJpbWFnZXMvcGljLXNtYWxsLnBuZ1wiXHJcblx0ICogR2V0IGFuIGFycmF5IG9mIGltYWdlIGNhbmRpZGF0ZXMgaW4gdGhlIGZvcm0gb2ZcclxuXHQgKiAgICAgIHt1cmw6IFwiL2Zvby9iYXIucG5nXCIsIHJlc29sdXRpb246IDF9XHJcblx0ICogd2hlcmUgcmVzb2x1dGlvbiBpcyBodHRwOi8vZGV2LnczLm9yZy9jc3N3Zy9jc3MtdmFsdWVzLTMvI3Jlc29sdXRpb24tdmFsdWVcclxuXHQgKiBJZiBzaXplcyBpcyBzcGVjaWZpZWQsIHJlc29sdXRpb24gaXMgY2FsY3VsYXRlZFxyXG5cdCAqL1xyXG5cdHBmLmdldENhbmRpZGF0ZXNGcm9tU291cmNlU2V0ID0gZnVuY3Rpb24oIHNyY3NldCwgc2l6ZXMgKSB7XHJcblx0XHR2YXIgY2FuZGlkYXRlcyA9IHBmLnBhcnNlU3Jjc2V0KCBzcmNzZXQgKSxcclxuXHRcdFx0Zm9ybWF0dGVkQ2FuZGlkYXRlcyA9IFtdO1xyXG5cclxuXHRcdGZvciAoIHZhciBpID0gMCwgbGVuID0gY2FuZGlkYXRlcy5sZW5ndGg7IGkgPCBsZW47IGkrKyApIHtcclxuXHRcdFx0dmFyIGNhbmRpZGF0ZSA9IGNhbmRpZGF0ZXNbIGkgXTtcclxuXHJcblx0XHRcdGZvcm1hdHRlZENhbmRpZGF0ZXMucHVzaCh7XHJcblx0XHRcdFx0dXJsOiBjYW5kaWRhdGUudXJsLFxyXG5cdFx0XHRcdHJlc29sdXRpb246IHBmLnBhcnNlRGVzY3JpcHRvciggY2FuZGlkYXRlLmRlc2NyaXB0b3IsIHNpemVzIClcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gZm9ybWF0dGVkQ2FuZGlkYXRlcztcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBpZiBpdCdzIGFuIGltZyBlbGVtZW50IGFuZCBpdCBoYXMgYSBzcmNzZXQgcHJvcGVydHksXHJcblx0ICogd2UgbmVlZCB0byByZW1vdmUgdGhlIGF0dHJpYnV0ZSBzbyB3ZSBjYW4gbWFuaXB1bGF0ZSBzcmNcclxuXHQgKiAodGhlIHByb3BlcnR5J3MgZXhpc3RlbmNlIGluZmVycyBuYXRpdmUgc3Jjc2V0IHN1cHBvcnQsIGFuZCBhIHNyY3NldC1zdXBwb3J0aW5nIGJyb3dzZXIgd2lsbCBwcmlvcml0aXplIHNyY3NldCdzIHZhbHVlIG92ZXIgb3VyIHdpbm5pbmcgcGljdHVyZSBjYW5kaWRhdGUpXHJcblx0ICogdGhpcyBtb3ZlcyBzcmNzZXQncyB2YWx1ZSB0byBtZW1vcnkgZm9yIGxhdGVyIHVzZSBhbmQgcmVtb3ZlcyB0aGUgYXR0clxyXG5cdCAqL1xyXG5cdHBmLmRvZGdlU3Jjc2V0ID0gZnVuY3Rpb24oIGltZyApIHtcclxuXHRcdGlmICggaW1nLnNyY3NldCApIHtcclxuXHRcdFx0aW1nWyBwZi5ucyBdLnNyY3NldCA9IGltZy5zcmNzZXQ7XHJcblx0XHRcdGltZy5zcmNzZXQgPSBcIlwiO1xyXG5cdFx0XHRpbWcuc2V0QXR0cmlidXRlKCBcImRhdGEtcGZzcmNzZXRcIiwgaW1nWyBwZi5ucyBdLnNyY3NldCApO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdC8vIEFjY2VwdCBhIHNvdXJjZSBvciBpbWcgZWxlbWVudCBhbmQgcHJvY2VzcyBpdHMgc3Jjc2V0IGFuZCBzaXplcyBhdHRyc1xyXG5cdHBmLnByb2Nlc3NTb3VyY2VTZXQgPSBmdW5jdGlvbiggZWwgKSB7XHJcblx0XHR2YXIgc3Jjc2V0ID0gZWwuZ2V0QXR0cmlidXRlKCBcInNyY3NldFwiICksXHJcblx0XHRcdHNpemVzID0gZWwuZ2V0QXR0cmlidXRlKCBcInNpemVzXCIgKSxcclxuXHRcdFx0Y2FuZGlkYXRlcyA9IFtdO1xyXG5cclxuXHRcdC8vIGlmIGl0J3MgYW4gaW1nIGVsZW1lbnQsIHVzZSB0aGUgY2FjaGVkIHNyY3NldCBwcm9wZXJ0eSAoZGVmaW5lZCBvciBub3QpXHJcblx0XHRpZiAoIGVsLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkgPT09IFwiSU1HXCIgJiYgZWxbIHBmLm5zIF0gJiYgZWxbIHBmLm5zIF0uc3Jjc2V0ICkge1xyXG5cdFx0XHRzcmNzZXQgPSBlbFsgcGYubnMgXS5zcmNzZXQ7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBzcmNzZXQgKSB7XHJcblx0XHRcdGNhbmRpZGF0ZXMgPSBwZi5nZXRDYW5kaWRhdGVzRnJvbVNvdXJjZVNldCggc3Jjc2V0LCBzaXplcyApO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGNhbmRpZGF0ZXM7XHJcblx0fTtcclxuXHJcblx0cGYuYmFja2ZhY2VWaXNpYmlsaXR5Rml4ID0gZnVuY3Rpb24oIHBpY0ltZyApIHtcclxuXHRcdC8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL3Njb3R0amVobC9waWN0dXJlZmlsbC9pc3N1ZXMvMzMyXHJcblx0XHR2YXIgc3R5bGUgPSBwaWNJbWcuc3R5bGUgfHwge30sXHJcblx0XHRcdFdlYmtpdEJhY2tmYWNlVmlzaWJpbGl0eSA9IFwid2Via2l0QmFja2ZhY2VWaXNpYmlsaXR5XCIgaW4gc3R5bGUsXHJcblx0XHRcdGN1cnJlbnRab29tID0gc3R5bGUuem9vbTtcclxuXHJcblx0XHRpZiAoV2Via2l0QmFja2ZhY2VWaXNpYmlsaXR5KSB7XHJcblx0XHRcdHN0eWxlLnpvb20gPSBcIi45OTlcIjtcclxuXHJcblx0XHRcdFdlYmtpdEJhY2tmYWNlVmlzaWJpbGl0eSA9IHBpY0ltZy5vZmZzZXRXaWR0aDtcclxuXHJcblx0XHRcdHN0eWxlLnpvb20gPSBjdXJyZW50Wm9vbTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHRwZi5zZXRJbnRyaW5zaWNTaXplID0gKGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHVybENhY2hlID0ge307XHJcblx0XHR2YXIgc2V0U2l6ZSA9IGZ1bmN0aW9uKCBwaWNJbWcsIHdpZHRoLCByZXMgKSB7XHJcbiAgICAgICAgICAgIGlmICggd2lkdGggKSB7XHJcblx0XHRcdCAgICBwaWNJbWcuc2V0QXR0cmlidXRlKCBcIndpZHRoXCIsIHBhcnNlSW50KHdpZHRoIC8gcmVzLCAxMCkgKTtcclxuICAgICAgICAgICAgfVxyXG5cdFx0fTtcclxuXHRcdHJldHVybiBmdW5jdGlvbiggcGljSW1nLCBiZXN0Q2FuZGlkYXRlICkge1xyXG5cdFx0XHR2YXIgaW1nO1xyXG5cdFx0XHRpZiAoICFwaWNJbWdbIHBmLm5zIF0gfHwgdy5wZlN0b3BJbnRyaW5zaWNTaXplICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIHBpY0ltZ1sgcGYubnMgXS5kaW1zID09PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0cGljSW1nWyBwZi5uc10uZGltcyA9IHBpY0ltZy5nZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiKSB8fCBwaWNJbWcuZ2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggcGljSW1nWyBwZi5uc10uZGltcyApIHsgcmV0dXJuOyB9XHJcblxyXG5cdFx0XHRpZiAoIGJlc3RDYW5kaWRhdGUudXJsIGluIHVybENhY2hlICkge1xyXG5cdFx0XHRcdHNldFNpemUoIHBpY0ltZywgdXJsQ2FjaGVbYmVzdENhbmRpZGF0ZS51cmxdLCBiZXN0Q2FuZGlkYXRlLnJlc29sdXRpb24gKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRpbWcgPSBkb2MuY3JlYXRlRWxlbWVudCggXCJpbWdcIiApO1xyXG5cdFx0XHRcdGltZy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdHVybENhY2hlW2Jlc3RDYW5kaWRhdGUudXJsXSA9IGltZy53aWR0aDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy9JRSAxMC8xMSBkb24ndCBjYWxjdWxhdGUgd2lkdGggZm9yIHN2ZyBvdXRzaWRlIGRvY3VtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAhdXJsQ2FjaGVbYmVzdENhbmRpZGF0ZS51cmxdICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmJvZHkuYXBwZW5kQ2hpbGQoIGltZyApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsQ2FjaGVbYmVzdENhbmRpZGF0ZS51cmxdID0gaW1nLndpZHRoIHx8IGltZy5vZmZzZXRXaWR0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5ib2R5LnJlbW92ZUNoaWxkKCBpbWcgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaChlKXt9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuXHRcdFx0XHRcdGlmICggcGljSW1nLnNyYyA9PT0gYmVzdENhbmRpZGF0ZS51cmwgKSB7XHJcblx0XHRcdFx0XHRcdHNldFNpemUoIHBpY0ltZywgdXJsQ2FjaGVbYmVzdENhbmRpZGF0ZS51cmxdLCBiZXN0Q2FuZGlkYXRlLnJlc29sdXRpb24gKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHBpY0ltZyA9IG51bGw7XHJcblx0XHRcdFx0XHRpbWcub25sb2FkID0gbnVsbDtcclxuXHRcdFx0XHRcdGltZyA9IG51bGw7XHJcblx0XHRcdFx0fTtcclxuXHRcdFx0XHRpbWcuc3JjID0gYmVzdENhbmRpZGF0ZS51cmw7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0fSkoKTtcclxuXHJcblx0cGYuYXBwbHlCZXN0Q2FuZGlkYXRlID0gZnVuY3Rpb24oIGNhbmRpZGF0ZXMsIHBpY0ltZyApIHtcclxuXHRcdHZhciBjYW5kaWRhdGUsXHJcblx0XHRcdGxlbmd0aCxcclxuXHRcdFx0YmVzdENhbmRpZGF0ZTtcclxuXHJcblx0XHRjYW5kaWRhdGVzLnNvcnQoIHBmLmFzY2VuZGluZ1NvcnQgKTtcclxuXHJcblx0XHRsZW5ndGggPSBjYW5kaWRhdGVzLmxlbmd0aDtcclxuXHRcdGJlc3RDYW5kaWRhdGUgPSBjYW5kaWRhdGVzWyBsZW5ndGggLSAxIF07XHJcblxyXG5cdFx0Zm9yICggdmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKysgKSB7XHJcblx0XHRcdGNhbmRpZGF0ZSA9IGNhbmRpZGF0ZXNbIGkgXTtcclxuXHRcdFx0aWYgKCBjYW5kaWRhdGUucmVzb2x1dGlvbiA+PSBwZi5nZXREcHIoKSApIHtcclxuXHRcdFx0XHRiZXN0Q2FuZGlkYXRlID0gY2FuZGlkYXRlO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBiZXN0Q2FuZGlkYXRlICkge1xyXG5cclxuXHRcdFx0YmVzdENhbmRpZGF0ZS51cmwgPSBwZi5tYWtlVXJsKCBiZXN0Q2FuZGlkYXRlLnVybCApO1xyXG5cclxuXHRcdFx0aWYgKCBwaWNJbWcuc3JjICE9PSBiZXN0Q2FuZGlkYXRlLnVybCApIHtcclxuXHRcdFx0XHRpZiAoIHBmLnJlc3RyaWN0c01peGVkQ29udGVudCgpICYmIGJlc3RDYW5kaWRhdGUudXJsLnN1YnN0cigwLCBcImh0dHA6XCIubGVuZ3RoKS50b0xvd2VyQ2FzZSgpID09PSBcImh0dHA6XCIgKSB7XHJcblx0XHRcdFx0XHRpZiAoIHdpbmRvdy5jb25zb2xlICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0XHRcdGNvbnNvbGUud2FybiggXCJCbG9ja2VkIG1peGVkIGNvbnRlbnQgaW1hZ2UgXCIgKyBiZXN0Q2FuZGlkYXRlLnVybCApO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRwaWNJbWcuc3JjID0gYmVzdENhbmRpZGF0ZS51cmw7XHJcblx0XHRcdFx0XHQvLyBjdXJyZW50U3JjIGF0dHJpYnV0ZSBhbmQgcHJvcGVydHkgdG8gbWF0Y2hcclxuXHRcdFx0XHRcdC8vIGh0dHA6Ly9waWN0dXJlLnJlc3BvbnNpdmVpbWFnZXMub3JnLyN0aGUtaW1nLWVsZW1lbnRcclxuXHRcdFx0XHRcdGlmICggIXBmLmN1clNyY1N1cHBvcnRlZCApIHtcclxuXHRcdFx0XHRcdFx0cGljSW1nLmN1cnJlbnRTcmMgPSBwaWNJbWcuc3JjO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdHBmLmJhY2tmYWNlVmlzaWJpbGl0eUZpeCggcGljSW1nICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRwZi5zZXRJbnRyaW5zaWNTaXplKHBpY0ltZywgYmVzdENhbmRpZGF0ZSk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0cGYuYXNjZW5kaW5nU29ydCA9IGZ1bmN0aW9uKCBhLCBiICkge1xyXG5cdFx0cmV0dXJuIGEucmVzb2x1dGlvbiAtIGIucmVzb2x1dGlvbjtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBJbiBJRTksIDxzb3VyY2U+IGVsZW1lbnRzIGdldCByZW1vdmVkIGlmIHRoZXkgYXJlbid0IGNoaWxkcmVuIG9mXHJcblx0ICogdmlkZW8gZWxlbWVudHMuIFRodXMsIHdlIGNvbmRpdGlvbmFsbHkgd3JhcCBzb3VyY2UgZWxlbWVudHNcclxuXHQgKiB1c2luZyA8IS0tW2lmIElFIDldPjx2aWRlbyBzdHlsZT1cImRpc3BsYXk6IG5vbmU7XCI+PCFbZW5kaWZdLS0+XHJcblx0ICogYW5kIG11c3QgYWNjb3VudCBmb3IgdGhhdCBoZXJlIGJ5IG1vdmluZyB0aG9zZSBzb3VyY2UgZWxlbWVudHNcclxuXHQgKiBiYWNrIGludG8gdGhlIHBpY3R1cmUgZWxlbWVudC5cclxuXHQgKi9cclxuXHRwZi5yZW1vdmVWaWRlb1NoaW0gPSBmdW5jdGlvbiggcGljdHVyZSApIHtcclxuXHRcdHZhciB2aWRlb3MgPSBwaWN0dXJlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCBcInZpZGVvXCIgKTtcclxuXHRcdGlmICggdmlkZW9zLmxlbmd0aCApIHtcclxuXHRcdFx0dmFyIHZpZGVvID0gdmlkZW9zWyAwIF0sXHJcblx0XHRcdFx0dnNvdXJjZXMgPSB2aWRlby5nZXRFbGVtZW50c0J5VGFnTmFtZSggXCJzb3VyY2VcIiApO1xyXG5cdFx0XHR3aGlsZSAoIHZzb3VyY2VzLmxlbmd0aCApIHtcclxuXHRcdFx0XHRwaWN0dXJlLmluc2VydEJlZm9yZSggdnNvdXJjZXNbIDAgXSwgdmlkZW8gKTtcclxuXHRcdFx0fVxyXG5cdFx0XHQvLyBSZW1vdmUgdGhlIHZpZGVvIGVsZW1lbnQgb25jZSB3ZSdyZSBmaW5pc2hlZCByZW1vdmluZyBpdHMgY2hpbGRyZW5cclxuXHRcdFx0dmlkZW8ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCggdmlkZW8gKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBGaW5kIGFsbCBgaW1nYCBlbGVtZW50cywgYW5kIGFkZCB0aGVtIHRvIHRoZSBjYW5kaWRhdGUgbGlzdCBpZiB0aGV5IGhhdmVcclxuXHQgKiBhIGBwaWN0dXJlYCBwYXJlbnQsIGEgYHNpemVzYCBhdHRyaWJ1dGUgaW4gYmFzaWMgYHNyY3NldGAgc3VwcG9ydGluZyBicm93c2VycyxcclxuXHQgKiBhIGBzcmNzZXRgIGF0dHJpYnV0ZSBhdCBhbGwsIGFuZCB0aGV5IGhhdmVu4oCZdCBiZWVuIGV2YWx1YXRlZCBhbHJlYWR5LlxyXG5cdCAqL1xyXG5cdHBmLmdldEFsbEVsZW1lbnRzID0gZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgZWxlbXMgPSBbXSxcclxuXHRcdFx0aW1ncyA9IGRvYy5nZXRFbGVtZW50c0J5VGFnTmFtZSggXCJpbWdcIiApO1xyXG5cclxuXHRcdGZvciAoIHZhciBoID0gMCwgbGVuID0gaW1ncy5sZW5ndGg7IGggPCBsZW47IGgrKyApIHtcclxuXHRcdFx0dmFyIGN1cnJJbWcgPSBpbWdzWyBoIF07XHJcblxyXG5cdFx0XHRpZiAoIGN1cnJJbWcucGFyZW50Tm9kZS5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpID09PSBcIlBJQ1RVUkVcIiB8fFxyXG5cdFx0XHQoIGN1cnJJbWcuZ2V0QXR0cmlidXRlKCBcInNyY3NldFwiICkgIT09IG51bGwgKSB8fCBjdXJySW1nWyBwZi5ucyBdICYmIGN1cnJJbWdbIHBmLm5zIF0uc3Jjc2V0ICE9PSBudWxsICkge1xyXG5cdFx0XHRcdGVsZW1zLnB1c2goIGN1cnJJbWcgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGVsZW1zO1xyXG5cdH07XHJcblxyXG5cdHBmLmdldE1hdGNoID0gZnVuY3Rpb24oIGltZywgcGljdHVyZSApIHtcclxuXHRcdHZhciBzb3VyY2VzID0gcGljdHVyZS5jaGlsZE5vZGVzLFxyXG5cdFx0XHRtYXRjaDtcclxuXHJcblx0XHQvLyBHbyB0aHJvdWdoIGVhY2ggY2hpbGQsIGFuZCBpZiB0aGV5IGhhdmUgbWVkaWEgcXVlcmllcywgZXZhbHVhdGUgdGhlbVxyXG5cdFx0Zm9yICggdmFyIGogPSAwLCBzbGVuID0gc291cmNlcy5sZW5ndGg7IGogPCBzbGVuOyBqKysgKSB7XHJcblx0XHRcdHZhciBzb3VyY2UgPSBzb3VyY2VzWyBqIF07XHJcblxyXG5cdFx0XHQvLyBpZ25vcmUgbm9uLWVsZW1lbnQgbm9kZXNcclxuXHRcdFx0aWYgKCBzb3VyY2Uubm9kZVR5cGUgIT09IDEgKSB7XHJcblx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIEhpdHRpbmcgdGhlIGBpbWdgIGVsZW1lbnQgdGhhdCBzdGFydGVkIGV2ZXJ5dGhpbmcgc3RvcHMgdGhlIHNlYXJjaCBmb3IgYHNvdXJjZXNgLlxyXG5cdFx0XHQvLyBJZiBubyBwcmV2aW91cyBgc291cmNlYCBtYXRjaGVzLCB0aGUgYGltZ2AgaXRzZWxmIGlzIGV2YWx1YXRlZCBsYXRlci5cclxuXHRcdFx0aWYgKCBzb3VyY2UgPT09IGltZyApIHtcclxuXHRcdFx0XHRyZXR1cm4gbWF0Y2g7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIGlnbm9yZSBub24tYHNvdXJjZWAgbm9kZXNcclxuXHRcdFx0aWYgKCBzb3VyY2Uubm9kZU5hbWUudG9VcHBlckNhc2UoKSAhPT0gXCJTT1VSQ0VcIiApIHtcclxuXHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0fVxyXG5cdFx0XHQvLyBpZiBpdCdzIGEgc291cmNlIGVsZW1lbnQgdGhhdCBoYXMgdGhlIGBzcmNgIHByb3BlcnR5IHNldCwgdGhyb3cgYSB3YXJuaW5nIGluIHRoZSBjb25zb2xlXHJcblx0XHRcdGlmICggc291cmNlLmdldEF0dHJpYnV0ZSggXCJzcmNcIiApICE9PSBudWxsICYmIHR5cGVvZiBjb25zb2xlICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0Y29uc29sZS53YXJuKFwiVGhlIGBzcmNgIGF0dHJpYnV0ZSBpcyBpbnZhbGlkIG9uIGBwaWN0dXJlYCBgc291cmNlYCBlbGVtZW50OyBpbnN0ZWFkLCB1c2UgYHNyY3NldGAuXCIpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR2YXIgbWVkaWEgPSBzb3VyY2UuZ2V0QXR0cmlidXRlKCBcIm1lZGlhXCIgKTtcclxuXHJcblx0XHRcdC8vIGlmIHNvdXJjZSBkb2VzIG5vdCBoYXZlIGEgc3Jjc2V0IGF0dHJpYnV0ZSwgc2tpcFxyXG5cdFx0XHRpZiAoICFzb3VyY2UuZ2V0QXR0cmlidXRlKCBcInNyY3NldFwiICkgKSB7XHJcblx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIGlmIHRoZXJlJ3Mgbm8gbWVkaWEgc3BlY2lmaWVkLCBPUiB3Lm1hdGNoTWVkaWEgaXMgc3VwcG9ydGVkXHJcblx0XHRcdGlmICggKCAhbWVkaWEgfHwgcGYubWF0Y2hlc01lZGlhKCBtZWRpYSApICkgKSB7XHJcblx0XHRcdFx0dmFyIHR5cGVTdXBwb3J0ZWQgPSBwZi52ZXJpZnlUeXBlU3VwcG9ydCggc291cmNlICk7XHJcblxyXG5cdFx0XHRcdGlmICggdHlwZVN1cHBvcnRlZCA9PT0gdHJ1ZSApIHtcclxuXHRcdFx0XHRcdG1hdGNoID0gc291cmNlO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0fSBlbHNlIGlmICggdHlwZVN1cHBvcnRlZCA9PT0gXCJwZW5kaW5nXCIgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIG1hdGNoO1xyXG5cdH07XHJcblxyXG5cdGZ1bmN0aW9uIHBpY3R1cmVmaWxsKCBvcHQgKSB7XHJcblx0XHR2YXIgZWxlbWVudHMsXHJcblx0XHRcdGVsZW1lbnQsXHJcblx0XHRcdHBhcmVudCxcclxuXHRcdFx0Zmlyc3RNYXRjaCxcclxuXHRcdFx0Y2FuZGlkYXRlcyxcclxuXHRcdFx0b3B0aW9ucyA9IG9wdCB8fCB7fTtcclxuXHJcblx0XHRlbGVtZW50cyA9IG9wdGlvbnMuZWxlbWVudHMgfHwgcGYuZ2V0QWxsRWxlbWVudHMoKTtcclxuXHJcblx0XHQvLyBMb29wIHRocm91Z2ggYWxsIGVsZW1lbnRzXHJcblx0XHRmb3IgKCB2YXIgaSA9IDAsIHBsZW4gPSBlbGVtZW50cy5sZW5ndGg7IGkgPCBwbGVuOyBpKysgKSB7XHJcblx0XHRcdGVsZW1lbnQgPSBlbGVtZW50c1sgaSBdO1xyXG5cdFx0XHRwYXJlbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XHJcblx0XHRcdGZpcnN0TWF0Y2ggPSB1bmRlZmluZWQ7XHJcblx0XHRcdGNhbmRpZGF0ZXMgPSB1bmRlZmluZWQ7XHJcblxyXG5cdFx0XHQvLyBpbW1lZGlhdGVseSBza2lwIG5vbi1gaW1nYCBub2Rlc1xyXG5cdFx0XHRpZiAoIGVsZW1lbnQubm9kZU5hbWUudG9VcHBlckNhc2UoKSAhPT0gXCJJTUdcIiApIHtcclxuXHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gZXhwYW5kbyBmb3IgY2FjaGluZyBkYXRhIG9uIHRoZSBpbWdcclxuXHRcdFx0aWYgKCAhZWxlbWVudFsgcGYubnMgXSApIHtcclxuXHRcdFx0XHRlbGVtZW50WyBwZi5ucyBdID0ge307XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIGlmIHRoZSBlbGVtZW50IGhhcyBhbHJlYWR5IGJlZW4gZXZhbHVhdGVkLCBza2lwIGl0IHVubGVzc1xyXG5cdFx0XHQvLyBgb3B0aW9ucy5yZWV2YWx1YXRlYCBpcyBzZXQgdG8gdHJ1ZSAoIHRoaXMsIGZvciBleGFtcGxlLFxyXG5cdFx0XHQvLyBpcyBzZXQgdG8gdHJ1ZSB3aGVuIHJ1bm5pbmcgYHBpY3R1cmVmaWxsYCBvbiBgcmVzaXplYCApLlxyXG5cdFx0XHRpZiAoICFvcHRpb25zLnJlZXZhbHVhdGUgJiYgZWxlbWVudFsgcGYubnMgXS5ldmFsdWF0ZWQgKSB7XHJcblx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIGlmIGBpbWdgIGlzIGluIGEgYHBpY3R1cmVgIGVsZW1lbnRcclxuXHRcdFx0aWYgKCBwYXJlbnQgJiYgcGFyZW50Lm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkgPT09IFwiUElDVFVSRVwiICkge1xyXG5cclxuXHRcdFx0XHQvLyBJRTkgdmlkZW8gd29ya2Fyb3VuZFxyXG5cdFx0XHRcdHBmLnJlbW92ZVZpZGVvU2hpbSggcGFyZW50ICk7XHJcblxyXG5cdFx0XHRcdC8vIHJldHVybiB0aGUgZmlyc3QgbWF0Y2ggd2hpY2ggbWlnaHQgdW5kZWZpbmVkXHJcblx0XHRcdFx0Ly8gcmV0dXJucyBmYWxzZSBpZiB0aGVyZSBpcyBhIHBlbmRpbmcgc291cmNlXHJcblx0XHRcdFx0Ly8gVE9ETyB0aGUgcmV0dXJuIHR5cGUgaGVyZSBpcyBicnV0YWwsIGNsZWFudXBcclxuXHRcdFx0XHRmaXJzdE1hdGNoID0gcGYuZ2V0TWF0Y2goIGVsZW1lbnQsIHBhcmVudCApO1xyXG5cclxuXHRcdFx0XHQvLyBpZiBhbnkgc291cmNlcyBhcmUgcGVuZGluZyBpbiB0aGlzIHBpY3R1cmUgZHVlIHRvIGFzeW5jIHR5cGUgdGVzdChzKVxyXG5cdFx0XHRcdC8vIHJlbW92ZSB0aGUgZXZhbHVhdGVkIGF0dHIgYW5kIHNraXAgZm9yIG5vdyAoIHRoZSBwZW5kaW5nIHRlc3Qgd2lsbFxyXG5cdFx0XHRcdC8vIHJlcnVuIHBpY3R1cmVmaWxsIG9uIHRoaXMgZWxlbWVudCB3aGVuIGNvbXBsZXRlKVxyXG5cdFx0XHRcdGlmICggZmlyc3RNYXRjaCA9PT0gZmFsc2UgKSB7XHJcblx0XHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Zmlyc3RNYXRjaCA9IHVuZGVmaW5lZDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gQ2FjaGUgYW5kIHJlbW92ZSBgc3Jjc2V0YCBpZiBwcmVzZW50IGFuZCB3ZeKAmXJlIGdvaW5nIHRvIGJlIGRvaW5nIGBwaWN0dXJlYC9gc3Jjc2V0YC9gc2l6ZXNgIHBvbHlmaWxsaW5nIHRvIGl0LlxyXG5cdFx0XHRpZiAoICggcGFyZW50ICYmIHBhcmVudC5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpID09PSBcIlBJQ1RVUkVcIiApIHx8XHJcblx0XHRcdCggIXBmLnNpemVzU3VwcG9ydGVkICYmICggZWxlbWVudC5zcmNzZXQgJiYgcmVnV0Rlc2MudGVzdCggZWxlbWVudC5zcmNzZXQgKSApICkgKSB7XHJcblx0XHRcdFx0cGYuZG9kZ2VTcmNzZXQoIGVsZW1lbnQgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCBmaXJzdE1hdGNoICkge1xyXG5cdFx0XHRcdGNhbmRpZGF0ZXMgPSBwZi5wcm9jZXNzU291cmNlU2V0KCBmaXJzdE1hdGNoICk7XHJcblx0XHRcdFx0cGYuYXBwbHlCZXN0Q2FuZGlkYXRlKCBjYW5kaWRhdGVzLCBlbGVtZW50ICk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gTm8gc291cmNlcyBtYXRjaGVkLCBzbyB3ZeKAmXJlIGRvd24gdG8gcHJvY2Vzc2luZyB0aGUgaW5uZXIgYGltZ2AgYXMgYSBzb3VyY2UuXHJcblx0XHRcdFx0Y2FuZGlkYXRlcyA9IHBmLnByb2Nlc3NTb3VyY2VTZXQoIGVsZW1lbnQgKTtcclxuXHJcblx0XHRcdFx0aWYgKCBlbGVtZW50LnNyY3NldCA9PT0gdW5kZWZpbmVkIHx8IGVsZW1lbnRbIHBmLm5zIF0uc3Jjc2V0ICkge1xyXG5cdFx0XHRcdFx0Ly8gRWl0aGVyIGBzcmNzZXRgIGlzIGNvbXBsZXRlbHkgdW5zdXBwb3J0ZWQsIG9yIHdlIG5lZWQgdG8gcG9seWZpbGwgYHNpemVzYCBmdW5jdGlvbmFsaXR5LlxyXG5cdFx0XHRcdFx0cGYuYXBwbHlCZXN0Q2FuZGlkYXRlKCBjYW5kaWRhdGVzLCBlbGVtZW50ICk7XHJcblx0XHRcdFx0fSAvLyBFbHNlLCByZXNvbHV0aW9uLW9ubHkgYHNyY3NldGAgaXMgc3VwcG9ydGVkIG5hdGl2ZWx5LlxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBzZXQgZXZhbHVhdGVkIHRvIHRydWUgdG8gYXZvaWQgdW5uZWNlc3NhcnkgcmVwYXJzaW5nXHJcblx0XHRcdGVsZW1lbnRbIHBmLm5zIF0uZXZhbHVhdGVkID0gdHJ1ZTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNldHMgdXAgcGljdHVyZSBwb2x5ZmlsbCBieSBwb2xsaW5nIHRoZSBkb2N1bWVudCBhbmQgcnVubmluZ1xyXG5cdCAqIHRoZSBwb2x5ZmlsbCBldmVyeSAyNTBtcyB1bnRpbCB0aGUgZG9jdW1lbnQgaXMgcmVhZHkuXHJcblx0ICogQWxzbyBhdHRhY2hlcyBwaWN0dXJlZmlsbCBvbiByZXNpemVcclxuXHQgKi9cclxuXHRmdW5jdGlvbiBydW5QaWN0dXJlZmlsbCgpIHtcclxuXHRcdHBmLmluaXRUeXBlRGV0ZWN0cygpO1xyXG5cdFx0cGljdHVyZWZpbGwoKTtcclxuXHRcdHZhciBpbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQvLyBXaGVuIHRoZSBkb2N1bWVudCBoYXMgZmluaXNoZWQgbG9hZGluZywgc3RvcCBjaGVja2luZyBmb3IgbmV3IGltYWdlc1xyXG5cdFx0XHQvLyBodHRwczovL2dpdGh1Yi5jb20vZGVkL2RvbXJlYWR5L2Jsb2IvbWFzdGVyL3JlYWR5LmpzI0wxNVxyXG5cdFx0XHRwaWN0dXJlZmlsbCgpO1xyXG5cclxuXHRcdFx0aWYgKCAvXmxvYWRlZHxeaXxeYy8udGVzdCggZG9jLnJlYWR5U3RhdGUgKSApIHtcclxuXHRcdFx0XHRjbGVhckludGVydmFsKCBpbnRlcnZhbElkICk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHR9LCAyNTAgKTtcclxuXHJcblx0XHR2YXIgcmVzaXplVGltZXI7XHJcblx0XHR2YXIgaGFuZGxlUmVzaXplID0gZnVuY3Rpb24oKSB7XHJcblx0ICAgICAgICBwaWN0dXJlZmlsbCh7IHJlZXZhbHVhdGU6IHRydWUgfSk7XHJcblx0ICAgIH07XHJcblx0XHRmdW5jdGlvbiBjaGVja1Jlc2l6ZSgpIHtcclxuXHRcdCAgICBjbGVhclRpbWVvdXQocmVzaXplVGltZXIpO1xyXG5cdFx0ICAgIHJlc2l6ZVRpbWVyID0gc2V0VGltZW91dCggaGFuZGxlUmVzaXplLCA2MCApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggdy5hZGRFdmVudExpc3RlbmVyICkge1xyXG5cdFx0XHR3LmFkZEV2ZW50TGlzdGVuZXIoIFwicmVzaXplXCIsIGNoZWNrUmVzaXplLCBmYWxzZSApO1xyXG5cdFx0fSBlbHNlIGlmICggdy5hdHRhY2hFdmVudCApIHtcclxuXHRcdFx0dy5hdHRhY2hFdmVudCggXCJvbnJlc2l6ZVwiLCBjaGVja1Jlc2l6ZSApO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cnVuUGljdHVyZWZpbGwoKTtcclxuXHJcblx0LyogZXhwb3NlIG1ldGhvZHMgZm9yIHRlc3RpbmcgKi9cclxuXHRwaWN0dXJlZmlsbC5fID0gcGY7XHJcblxyXG5cdGV4cG9zZSggcGljdHVyZWZpbGwgKTtcclxuXHJcbn0gKSggd2luZG93LCB3aW5kb3cuZG9jdW1lbnQsIG5ldyB3aW5kb3cuSW1hZ2UoKSApO1xyXG5cclxuXHJcbi8qXHJcbiAqINCd0LDQstC40LPQsNGG0LjRjyDQsiDRiNCw0L/QutC1XHJcbiAqL1xyXG5jb25zdCBtYWluTmF2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLS1tYWluLW5hdicpO1xyXG5jb25zdCBtYWluTmF2QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLS1oZWFkZXJfX25hdi1idG4nKTtcclxuXHJcbmlmIChtYXRjaE1lZGlhKSB7XHJcbiAgbGV0IG1xTmF2ID0gd2luZG93Lm1hdGNoTWVkaWEoICcobWluLXdpZHRoOiA3NjhweCknICk7XHJcbiAgbXFOYXYuYWRkTGlzdGVuZXIoV2lkdGhDaGFuZ2VOYXYpO1xyXG4gIFdpZHRoQ2hhbmdlTmF2KG1xTmF2KTtcclxufVxyXG5cclxubWFpbk5hdkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2dCkge1xyXG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGlmIChtYWluTmF2LmNsYXNzTGlzdC5jb250YWlucygnZGlzcGxheS1ub25lJykpIHtcclxuICAgIG1haW5OYXYuY2xhc3NMaXN0LnJlbW92ZSgnZGlzcGxheS1ub25lJyk7XHJcbiAgICBtYWluTmF2QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2hlYWRlcl9fbmF2LWJ0bi0tY2xvc2UnKVxyXG4gIH0gZWxzZSB7XHJcbiAgICBtYWluTmF2LmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXktbm9uZScpO1xyXG4gICAgbWFpbk5hdkJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdoZWFkZXJfX25hdi1idG4tLWNsb3NlJylcclxuICB9XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gV2lkdGhDaGFuZ2VOYXYobXEpIHtcclxuICBpZiAoIW1xLm1hdGNoZXMpIHtcclxuICAgIG1haW5OYXYuY2xhc3NMaXN0LmFkZCgnZGlzcGxheS1ub25lJyk7XHJcbiAgICBtYWluTmF2QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc3BsYXktbm9uZScpO1xyXG4gICAgbWFpbk5hdkJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdoZWFkZXJfX25hdi1idG4tLWNsb3NlJyk7XHJcbiAgfSBlbHNlIHtcclxuICAgIG1haW5OYXYuY2xhc3NMaXN0LnJlbW92ZSgnZGlzcGxheS1ub25lJyk7XHJcbiAgICBtYWluTmF2QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXktbm9uZScpO1xyXG4gIH1cclxufVxyXG5cclxuXHJcbi8qXHJcbiAqINCf0LXRgNC10LrQu9GO0YfQsNGC0LXQu9GMINC60LDRgNGC0LjQvdC60LggXCLQtNC+IC0g0L/QvtGB0LvQtVwiXHJcbiAqL1xyXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWV4YW1wbGVfX3N3aXRjaCcpKSB7XHJcbiAgY29uc3QgZXhhbXBsZUFmdGVyQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWV4YW1wbGVfX3N3aXRjaC1idG4tLWFmdGVyJyk7XHJcbiAgY29uc3QgZXhhbXBsZUJlZm9yZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1leGFtcGxlX19zd2l0Y2gtYnRuLS1iZWZvcmUnKTtcclxuICBjb25zdCBleGFtcGxlVG9nZ2xlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWV4YW1wbGVfX3N3aXRjaCcpO1xyXG4gIGNvbnN0IGltZ0FmdGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWV4YW1wbGVfX3BpY3R1cmUtLWFmdGVyJyk7XHJcbiAgY29uc3QgaW1nQmVmb3JlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWV4YW1wbGVfX3BpY3R1cmUtLWJlZm9yZScpO1xyXG4gIGNvbnN0IGltZ0hpZGUgPSAnZXhhbXBsZV9fcGljdHVyZS0taGlkZSc7XHJcblxyXG4gIGlmIChtYXRjaE1lZGlhKSB7XHJcbiAgICBsZXQgbXFFeGFtcGxlID0gd2luZG93Lm1hdGNoTWVkaWEoICcobWF4LXdpZHRoOiA3NjhweCknICk7XHJcbiAgICBtcUV4YW1wbGUuYWRkTGlzdGVuZXIoV2lkdGhDaGFuZ2VFeGFtcGxlKTtcclxuICAgIFdpZHRoQ2hhbmdlRXhhbXBsZShtcUV4YW1wbGUpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gV2lkdGhDaGFuZ2VFeGFtcGxlKG1xKSB7XHJcbiAgICBpZiAobXEubWF0Y2hlcykge1xyXG4gICAgICBleGFtcGxlQWZ0ZXJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzaG93SW1nQWZ0ZXIpO1xyXG4gICAgICBleGFtcGxlQmVmb3JlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2hvd0ltZ0JlZm9yZSk7XHJcbiAgICAgIGV4YW1wbGVUb2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVJbWcpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZXhhbXBsZUFmdGVyQnRuLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2hvd0ltZ0FmdGVyKTtcclxuICAgICAgZXhhbXBsZUJlZm9yZUJ0bi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHNob3dJbWdCZWZvcmUpO1xyXG4gICAgICBleGFtcGxlVG9nZ2xlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlSW1nKTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgZnVuY3Rpb24gc2hvd0ltZ0FmdGVyKGV2dCkge1xyXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBpbWdBZnRlci5jbGFzc0xpc3QucmVtb3ZlKGltZ0hpZGUpO1xyXG4gICAgaW1nQmVmb3JlLmNsYXNzTGlzdC5hZGQoaW1nSGlkZSk7XHJcbiAgICBleGFtcGxlVG9nZ2xlLmNsYXNzTGlzdC5hZGQoJ2V4YW1wbGVfX3N3aXRjaC0tYWZ0ZXInKTtcclxuICB9XHJcbiAgXHJcbiAgZnVuY3Rpb24gc2hvd0ltZ0JlZm9yZShldnQpIHtcclxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgaW1nQmVmb3JlLmNsYXNzTGlzdC5yZW1vdmUoaW1nSGlkZSk7XHJcbiAgICBpbWdBZnRlci5jbGFzc0xpc3QuYWRkKGltZ0hpZGUpO1xyXG4gICAgZXhhbXBsZVRvZ2dsZS5jbGFzc0xpc3QucmVtb3ZlKCdleGFtcGxlX19zd2l0Y2gtLWFmdGVyJyk7XHJcbiAgfVxyXG4gIFxyXG4gIGZ1bmN0aW9uIHRvZ2dsZUltZyhldnQpIHtcclxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgaW1nQmVmb3JlLmNsYXNzTGlzdC50b2dnbGUoaW1nSGlkZSk7XHJcbiAgICBpbWdBZnRlci5jbGFzc0xpc3QudG9nZ2xlKGltZ0hpZGUpO1xyXG4gICAgZXhhbXBsZVRvZ2dsZS5jbGFzc0xpc3QudG9nZ2xlKCdleGFtcGxlX19zd2l0Y2gtLWFmdGVyJyk7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuLypcclxuICog0J/QvtC00LXQu9GO0YfQtdC90LjQtSDRj9C90LTQtdC60YEg0LrQsNGA0YJcclxuICovXHJcbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjeW1hcCcpKSB7XHJcbiAgeW1hcHMucmVhZHkoZnVuY3Rpb24gKCkge1xyXG4gICAgbGV0IG15TWFwID0gbmV3IHltYXBzLk1hcChcInltYXBcIiwge1xyXG4gICAgICBjZW50ZXI6IFs1OS45Mzg2MzEsIDMwLjMyMzA1NTRdLFxyXG4gICAgICB6b29tOiAxN1xyXG4gICAgfSk7XHJcblxyXG4gICAgbGV0IHBsYWNlbWFyayA9IG5ldyB5bWFwcy5QbGFjZW1hcmsoWzU5LjkzODYzMSwgMzAuMzIzMDU1NF0sIHtcclxuICAgICAgYmFsbG9vbkNvbnRlbnRIZWFkZXI6IFwiQ2F0IEVuZXJneVwiLFxyXG4gICAgICBiYWxsb29uQ29udGVudEJvZHk6IFwi0YPQuy4g0JHQvtC70YzRiNCw0Y8gPGJyPtCa0L7QvdGO0YjQtdC90L3QsNGPLCDQtC4gMTkvOCA8YnI+0KHQsNC90LrRgi3Qn9C10YLQtdGA0LHRg9GA0LNcIixcclxuICAgICAgaGludENvbnRlbnQ6IFwi0JzRiyDQvdCw0YXQvtC00LjQvNGB0Y8g0LfQtNC10YHRjFwiXHJcbiAgICB9LCB7XHJcbiAgICAgIGljb25MYXlvdXQ6ICdkZWZhdWx0I2ltYWdlJyxcclxuICAgICAgaWNvbkltYWdlSHJlZjogJ2ltZy9waWN0dXJlL21hcC1waW4ucG5nJyxcclxuICAgICAgaWNvbkltYWdlU2l6ZTogWzYwLCA1MV0sXHJcbiAgICAgIGljb25JbWFnZU9mZnNldDogWy0zMCwgLTUxXVxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIG15TWFwLmdlb09iamVjdHMuYWRkKHBsYWNlbWFyayk7XHJcbiAgICBteU1hcC5iZWhhdmlvcnMuZGlzYWJsZShbJ3Njcm9sbFpvb20nXSk7XHJcblxyXG4gICAgaWYgKG1hdGNoTWVkaWEpIHtcclxuICAgICAgbGV0IGRldmljZVdpZHRoID0gd2luZG93Lm1hdGNoTWVkaWEoICcobWluLXdpZHRoOiAxMzAwcHgpJyApO1xyXG4gICAgICBkZXZpY2VXaWR0aC5hZGRMaXN0ZW5lcihzZXRNYXBDZW50ZXIpO1xyXG4gICAgICBzZXRNYXBDZW50ZXIoZGV2aWNlV2lkdGgpO1xyXG5cclxuICAgICAgZnVuY3Rpb24gc2V0TWFwQ2VudGVyKG1xKSB7XHJcbiAgICAgICAgaWYgKG1xLm1hdGNoZXMpIHtcclxuICAgICAgICAgIG15TWFwLnNldENlbnRlcihbNTkuOTM4NzI1LDMwLjMxOTQ0N10pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBteU1hcC5zZXRDZW50ZXIoWzU5LjkzODYzMSwgMzAuMzIzMDU1NF0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0pO1xyXG59Il19

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsid2luZG93IiwibWF0Y2hNZWRpYSIsInN0eWxlTWVkaWEiLCJtZWRpYSIsImluZm8iLCJzY3JpcHQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwic3R5bGUiLCJwYXJlbnROb2RlIiwiaW5zZXJ0QmVmb3JlIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImN1cnJlbnRTdHlsZSIsIm1hdGNoTWVkaXVtIiwidGV4dCIsInN0eWxlU2hlZXQiLCJ0ZXh0Q29udGVudCIsIndpZHRoIiwibWF0Y2hlcyIsInciLCJkb2MiLCJpbWFnZSIsImV4cG9zZSIsInBpY3R1cmVmaWxsIiwibW9kdWxlIiwiX3R5cGVvZiIsImV4cG9ydHMiLCJkZWZpbmUiLCJhbWQiLCJIVE1MUGljdHVyZUVsZW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiYW5jaG9yIiwic2V0SW50cmluc2ljU2l6ZSIsInBmIiwicmVnV0Rlc2MiLCJucyIsInNpemVzU3VwcG9ydGVkIiwiY3VyU3JjU3VwcG9ydGVkIiwidHJpbSIsInN0ciIsInJlcGxhY2UiLCJtYWtlVXJsIiwic3JjIiwiaHJlZiIsInJlc3RyaWN0c01peGVkQ29udGVudCIsImxvY2F0aW9uIiwibWF0Y2hlc01lZGlhIiwiZ2V0RHByIiwiZGV2aWNlUGl4ZWxSYXRpbyIsImdldFdpZHRoRnJvbUxlbmd0aCIsImxlbmd0aCIsImNzc1ZhbHVlIiwiaW5kZXhPZiIsInBhcnNlRmxvYXQiLCJsZW5ndGhFbCIsImNzc1RleHQiLCJlIiwiYm9keSIsImFwcGVuZENoaWxkIiwib2Zmc2V0V2lkdGgiLCJkZXRlY3RUeXBlU3VwcG9ydCIsInR5cGUiLCJ0eXBlVXJpIiwib25lcnJvciIsIkltYWdlIiwib25sb2FkIiwidHlwZXMiLCJpbml0VHlwZURldGVjdHMiLCJpbXBsZW1lbnRhdGlvbiIsImhhc0ZlYXR1cmUiLCJ2ZXJpZnlUeXBlU3VwcG9ydCIsInNvdXJjZSIsInBmVHlwZSIsInBhcnNlU2l6ZSIsInNvdXJjZVNpemVTdHIiLCJtYXRjaCIsImZpbmRXaWR0aEZyb21Tb3VyY2VTaXplIiwic291cmNlU2l6ZUxpc3RTdHIiLCJ3aW5uaW5nTGVuZ3RoIiwic291cmNlU2l6ZUxpc3QiLCJzcGxpdCIsImkiLCJsZW4iLCJzb3VyY2VTaXplIiwicGFyc2VkU2l6ZSIsIk1hdGgiLCJtYXgiLCJpbm5lcldpZHRoIiwiZG9jdW1lbnRFbGVtZW50IiwiY2xpZW50V2lkdGgiLCJwYXJzZVNyY3NldCIsInNyY3NldCIsImNhbmRpZGF0ZXMiLCJ1cmwiLCJwb3MiLCJzZWFyY2giLCJkZXNjcmlwdG9yIiwic2xpY2UiLCJkZXNjcG9zIiwicGFyc2VEZXNjcmlwdG9yIiwic2l6ZXNhdHRyIiwicmVzQ2FuZGlkYXRlIiwic2l6ZXMiLCJzaXplRGVzY3JpcHRvciIsIndpZHRoSW5Dc3NQaXhlbHMiLCJzcGxpdERlc2NyaXB0b3IiLCJjdXJyIiwibGFzdGNoYXIiLCJyZXMiLCJpc05hTiIsInBhcnNlSW50IiwiZ2V0Q2FuZGlkYXRlc0Zyb21Tb3VyY2VTZXQiLCJmb3JtYXR0ZWRDYW5kaWRhdGVzIiwiY2FuZGlkYXRlIiwiZG9kZ2VTcmNzZXQiLCJpbWciLCJzZXRBdHRyaWJ1dGUiLCJwcm9jZXNzU291cmNlU2V0IiwiZWwiLCJnZXRBdHRyaWJ1dGUiLCJ0b1VwcGVyQ2FzZSIsImJhY2tmYWNlVmlzaWJpbGl0eUZpeCIsInBpY0ltZyIsImN1cnJlbnRab29tIiwiem9vbSIsIldlYmtpdEJhY2tmYWNlVmlzaWJpbGl0eSIsImJlc3RDYW5kaWRhdGUiLCJwZlN0b3BJbnRyaW5zaWNTaXplIiwidW5kZWZpbmVkIiwiZGltcyIsInVybENhY2hlIiwicmVtb3ZlQ2hpbGQiLCJzZXRTaXplIiwicmVzb2x1dGlvbiIsImFwcGx5QmVzdENhbmRpZGF0ZSIsInNvcnQiLCJhc2NlbmRpbmdTb3J0Iiwic3Vic3RyIiwidG9Mb3dlckNhc2UiLCJjb25zb2xlIiwiY3VycmVudFNyYyIsImEiLCJiIiwicmVtb3ZlVmlkZW9TaGltIiwicGljdHVyZSIsInZpZGVvcyIsInZpZGVvIiwidnNvdXJjZXMiLCJnZXRBbGxFbGVtZW50cyIsImltZ3MiLCJoIiwiY3VyckltZyIsIm5vZGVOYW1lIiwiZWxlbXMiLCJwdXNoIiwiZ2V0TWF0Y2giLCJzb3VyY2VzIiwiY2hpbGROb2RlcyIsImoiLCJzbGVuIiwibm9kZVR5cGUiLCJ3YXJuIiwidHlwZVN1cHBvcnRlZCIsImhhbmRsZVJlc2l6ZSIsInJlZXZhbHVhdGUiLCJyZXNpemVUaW1lciIsImludGVydmFsSWQiLCJzZXRJbnRlcnZhbCIsInRlc3QiLCJyZWFkeVN0YXRlIiwiY2xlYXJJbnRlcnZhbCIsImNoZWNrUmVzaXplIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsImFkZEV2ZW50TGlzdGVuZXIiLCJydW5QaWN0dXJlZmlsbCIsImF0dGFjaEV2ZW50IiwiZWxlbWVudHMiLCJlbGVtZW50IiwicGFyZW50IiwiZmlyc3RNYXRjaCIsIm9wdGlvbnMiLCJwbGVuIiwiZXZhbHVhdGVkIiwibWFpbk5hdiIsInF1ZXJ5U2VsZWN0b3IiLCJtYWluTmF2QnV0dG9uIiwibXFOYXYiLCJXaWR0aENoYW5nZU5hdiIsIm1xIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiZXZ0IiwiY29udGFpbnMiLCJwcmV2ZW50RGVmYXVsdCIsImV4YW1wbGVCZWZvcmVCdG4iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXhhbXBsZVRvZ2dsZSIsImV4YW1wbGVBZnRlckJ0biIsInNob3dJbWdBZnRlciIsInNob3dJbWdCZWZvcmUiLCJ0b2dnbGVJbWciLCJpbWdBZnRlciIsImltZ0JlZm9yZSIsImltZ0hpZGUiLCJ0b2dnbGUiLCJ5bWFwcyIsInJlYWR5IiwibXlNYXAiLCJNYXAiLCJjZW50ZXIiLCJQbGFjZW1hcmsiLCJiYWxsb29uQ29udGVudEhlYWRlciIsImljb25MYXlvdXQiLCJiYWxsb29uQ29udGVudEJvZHkiLCJoaW50Q29udGVudCIsImljb25JbWFnZUhyZWYiLCJwbGFjZW1hcmsiLCJpY29uSW1hZ2VTaXplIiwiZGlzYWJsZSIsInNldE1hcENlbnRlciIsInNldENlbnRlciIsImdlb09iamVjdHMiLCJiZWhhdmlvcnMiLCJkZXZpY2VXaWR0aCJdLCJtYXBwaW5ncyI6ImtQQUdBQSxPQUFBQyxhQUFBRCxPQUFBQyxXQUFBLFdBR0EsSUFBQUMsRUFBQUYsT0FBQUUsWUFBQUYsT0FBQUcsTUFTQyxJQUFLRCxFQUFZLENBSGpCLElBR0FFLEVBSElGLEVBQWNGLFNBQU9FLGNBQWNGLFNBS3JDSyxFQUFjQyxTQUFTQyxxQkFBcUIsVUFBVSxHQUR2REMsRUFDQ0gsS0FBTSxXQURQRyxFQUVDSixHQUFjLG9CQUdmSSxFQUFLQyxXQUFTQyxhQUFBRixFQUFkSCxHQUtBRCxFQUFJLHFCQUFJSixRQUFpQ0EsT0FBT1csaUJBQWlCSCxFQUFPLE9BQVNBLEVBQU1JLGFBR3RGQyxFQUFBQSxDQUNDQSxZQUFRLFNBQUdWLEdBQVgsSUFBSVcsRUFBTyxVQUFZWCxFQUFRLHlDQUZwQixPQU9WSyxFQUZETyxXQUdDUCxFQUFBQSxXQUFNUSxRQUFjRixFQUFwQk4sRUFBTVEsWUFBY0YsRUFSdkIsUUFBQVYsRUFBQWEsUUFtQkNDLE9BQUFBLFNBQVNoQixHQUNUQyxNQUFBQSxDQUZNZSxRQUFQaEIsRUFBQVcsWUFBQVYsR0FBQSxPQUREQSxNQUFBQSxHQUFBLFFBMUNELElBdURDLFNBQUFnQixFQUFBQyxFQUFBQyxHQUlDLFNBQUFDLEVBQUFDLEdBRUMsWUFBQSxvQkFBQUMsT0FBQSxZQUFBQyxFQUFBRCxVQUFBLFdBQUFDLEVBQUFELE9BQUFFLFNBRUFGLE9BSERFLFFBR1lILEVBQ1gsbUJBQUFJLFFBQUFBLE9BQUFDLEtBQ29DRCxPQUFBLGNBQUEsV0FBQSxPQUFBSixJQUNwQyxXQUFBRSxFQUFBTixLQUNEQSxFQUFBSSxZQUFLQSxHQU9OLEdBQUtKLEVBQUVVLG1CQUNOUCxFQUFPLGtCQURSLENBTUFGLEVBQUlVLGNBQWUsV0FHbkIsSUEwQkNDLEVBa1VFQyxFQTVWQ0MsRUFBS2QsRUFBRUksYUFBZSxHQUUxQlcsRUFBWSxvQkFH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WixHQUVEQyxFQUFBQSxXQUFlMUIsSUFBQTJCLEdBQ2ZDLEVBQUFBLFVBQWFDLFFBQUUsQ0FIZCxlQUpIM04sV0FBQSxDQUFBLElBbUJXNE4sRUFMSyxTQUtkaEMsR0FDTUEsRUFBRzNLLFFBQ0wrTCxFQUFNYSxVQUFVLENBQUMsVUFBRCxZQUVoQmIsRUFBTWEsVUFBVSxDQUFDLFVBQVcsY0FaNUJDLEVBQU4vTixPQUFxQjBOLFdBQXJCLHVCQUNBVCxFQUFNZSxZQUFtQkgsR0FLdkJBLEVBQWFJIiwiZmlsZSI6InNjcmlwdC1taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG4gKiBQaWN0dXJlZmlsbFxyXG4gKi9cclxuLyohIFBpY3R1cmVmaWxsIC0gdjIuMy4xIC0gMjAxNS0wNC0wOVxyXG4qIGh0dHA6Ly9zY290dGplaGwuZ2l0aHViLmlvL3BpY3R1cmVmaWxsXHJcbiogQ29weXJpZ2h0IChjKSAyMDE1IGh0dHBzOi8vZ2l0aHViLmNvbS9zY290dGplaGwvcGljdHVyZWZpbGwvYmxvYi9tYXN0ZXIvQXV0aG9ycy50eHQ7IExpY2Vuc2VkIE1JVCAqL1xyXG4vKiEgbWF0Y2hNZWRpYSgpIHBvbHlmaWxsIC0gVGVzdCBhIENTUyBtZWRpYSB0eXBlL3F1ZXJ5IGluIEpTLiBBdXRob3JzICYgY29weXJpZ2h0IChjKSAyMDEyOiBTY290dCBKZWhsLCBQYXVsIElyaXNoLCBOaWNob2xhcyBaYWthcywgRGF2aWQgS25pZ2h0LiBEdWFsIE1JVC9CU0QgbGljZW5zZSAqL1xyXG5cclxud2luZG93Lm1hdGNoTWVkaWEgfHwgKHdpbmRvdy5tYXRjaE1lZGlhID0gZnVuY3Rpb24oKSB7XHJcblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5cdC8vIEZvciBicm93c2VycyB0aGF0IHN1cHBvcnQgbWF0Y2hNZWRpdW0gYXBpIHN1Y2ggYXMgSUUgOSBhbmQgd2Via2l0XHJcblx0dmFyIHN0eWxlTWVkaWEgPSAod2luZG93LnN0eWxlTWVkaWEgfHwgd2luZG93Lm1lZGlhKTtcclxuXHJcblx0Ly8gRm9yIHRob3NlIHRoYXQgZG9uJ3Qgc3VwcG9ydCBtYXRjaE1lZGl1bVxyXG5cdGlmICghc3R5bGVNZWRpYSkge1xyXG5cdFx0dmFyIHN0eWxlICAgICAgID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKSxcclxuXHRcdFx0c2NyaXB0ICAgICAgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0JylbMF0sXHJcblx0XHRcdGluZm8gICAgICAgID0gbnVsbDtcclxuXHJcblx0XHRzdHlsZS50eXBlICA9ICd0ZXh0L2Nzcyc7XHJcblx0XHRzdHlsZS5pZCAgICA9ICdtYXRjaG1lZGlhanMtdGVzdCc7XHJcblxyXG5cdFx0c2NyaXB0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHN0eWxlLCBzY3JpcHQpO1xyXG5cclxuXHRcdC8vICdzdHlsZS5jdXJyZW50U3R5bGUnIGlzIHVzZWQgYnkgSUUgPD0gOCBhbmQgJ3dpbmRvdy5nZXRDb21wdXRlZFN0eWxlJyBmb3IgYWxsIG90aGVyIGJyb3dzZXJzXHJcblx0XHRpbmZvID0gKCdnZXRDb21wdXRlZFN0eWxlJyBpbiB3aW5kb3cpICYmIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHN0eWxlLCBudWxsKSB8fCBzdHlsZS5jdXJyZW50U3R5bGU7XHJcblxyXG5cdFx0c3R5bGVNZWRpYSA9IHtcclxuXHRcdFx0bWF0Y2hNZWRpdW06IGZ1bmN0aW9uKG1lZGlhKSB7XHJcblx0XHRcdFx0dmFyIHRleHQgPSAnQG1lZGlhICcgKyBtZWRpYSArICd7ICNtYXRjaG1lZGlhanMtdGVzdCB7IHdpZHRoOiAxcHg7IH0gfSc7XHJcblxyXG5cdFx0XHRcdC8vICdzdHlsZS5zdHlsZVNoZWV0JyBpcyB1c2VkIGJ5IElFIDw9IDggYW5kICdzdHlsZS50ZXh0Q29udGVudCcgZm9yIGFsbCBvdGhlciBicm93c2Vyc1xyXG5cdFx0XHRcdGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XHJcblx0XHRcdFx0XHRzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSB0ZXh0O1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRzdHlsZS50ZXh0Q29udGVudCA9IHRleHQ7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBUZXN0IGlmIG1lZGlhIHF1ZXJ5IGlzIHRydWUgb3IgZmFsc2VcclxuXHRcdFx0XHRyZXR1cm4gaW5mby53aWR0aCA9PT0gJzFweCc7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gZnVuY3Rpb24obWVkaWEpIHtcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdG1hdGNoZXM6IHN0eWxlTWVkaWEubWF0Y2hNZWRpdW0obWVkaWEgfHwgJ2FsbCcpLFxyXG5cdFx0XHRtZWRpYTogbWVkaWEgfHwgJ2FsbCdcclxuXHRcdH07XHJcblx0fTtcclxufSgpKTtcclxuLyohIFBpY3R1cmVmaWxsIC0gUmVzcG9uc2l2ZSBJbWFnZXMgdGhhdCB3b3JrIHRvZGF5LlxyXG4qICBBdXRob3I6IFNjb3R0IEplaGwsIEZpbGFtZW50IEdyb3VwLCAyMDEyICggbmV3IHByb3Bvc2FsIGltcGxlbWVudGVkIGJ5IFNoYXduIEphbnNlcGFyIClcclxuKiAgTGljZW5zZTogTUlUL0dQTHYyXHJcbiogIFNwZWM6IGh0dHA6Ly9waWN0dXJlLnJlc3BvbnNpdmVpbWFnZXMub3JnL1xyXG4qL1xyXG4oZnVuY3Rpb24oIHcsIGRvYywgaW1hZ2UgKSB7XHJcblx0Ly8gRW5hYmxlIHN0cmljdCBtb2RlXHJcblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5cdGZ1bmN0aW9uIGV4cG9zZShwaWN0dXJlZmlsbCkge1xyXG5cdFx0LyogZXhwb3NlIHBpY3R1cmVmaWxsICovXHJcblx0XHRpZiAoIHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcIm9iamVjdFwiICkge1xyXG5cdFx0XHQvLyBDb21tb25KUywganVzdCBleHBvcnRcclxuXHRcdFx0bW9kdWxlLmV4cG9ydHMgPSBwaWN0dXJlZmlsbDtcclxuXHRcdH0gZWxzZSBpZiAoIHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kICkge1xyXG5cdFx0XHQvLyBBTUQgc3VwcG9ydFxyXG5cdFx0XHRkZWZpbmUoIFwicGljdHVyZWZpbGxcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBwaWN0dXJlZmlsbDsgfSApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCB0eXBlb2YgdyA9PT0gXCJvYmplY3RcIiApIHtcclxuXHRcdFx0Ly8gSWYgbm8gQU1EIGFuZCB3ZSBhcmUgaW4gdGhlIGJyb3dzZXIsIGF0dGFjaCB0byB3aW5kb3dcclxuXHRcdFx0dy5waWN0dXJlZmlsbCA9IHBpY3R1cmVmaWxsO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Ly8gSWYgcGljdHVyZSBpcyBzdXBwb3J0ZWQsIHdlbGwsIHRoYXQncyBhd2Vzb21lLiBMZXQncyBnZXQgb3V0dGEgaGVyZS4uLlxyXG5cdGlmICggdy5IVE1MUGljdHVyZUVsZW1lbnQgKSB7XHJcblx0XHRleHBvc2UoZnVuY3Rpb24oKSB7IH0pO1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHJcblx0Ly8gSFRNTCBzaGltfHYgaXQgZm9yIG9sZCBJRSAoSUU5IHdpbGwgc3RpbGwgbmVlZCB0aGUgSFRNTCB2aWRlbyB0YWcgd29ya2Fyb3VuZClcclxuXHRkb2MuY3JlYXRlRWxlbWVudCggXCJwaWN0dXJlXCIgKTtcclxuXHJcblx0Ly8gbG9jYWwgb2JqZWN0IGZvciBtZXRob2QgcmVmZXJlbmNlcyBhbmQgdGVzdGluZyBleHBvc3VyZVxyXG5cdHZhciBwZiA9IHcucGljdHVyZWZpbGwgfHwge307XHJcblxyXG5cdHZhciByZWdXRGVzYyA9IC9cXHMrXFwrP1xcZCsoZVxcZCspP3cvO1xyXG5cclxuXHQvLyBuYW1lc3BhY2VcclxuXHRwZi5ucyA9IFwicGljdHVyZWZpbGxcIjtcclxuXHJcblx0Ly8gc3Jjc2V0IHN1cHBvcnQgdGVzdFxyXG5cdChmdW5jdGlvbigpIHtcclxuXHRcdHBmLnNyY3NldFN1cHBvcnRlZCA9IFwic3Jjc2V0XCIgaW4gaW1hZ2U7XHJcblx0XHRwZi5zaXplc1N1cHBvcnRlZCA9IFwic2l6ZXNcIiBpbiBpbWFnZTtcclxuXHRcdHBmLmN1clNyY1N1cHBvcnRlZCA9IFwiY3VycmVudFNyY1wiIGluIGltYWdlO1xyXG5cdH0pKCk7XHJcblxyXG5cdC8vIGp1c3QgYSBzdHJpbmcgdHJpbSB3b3JrYXJvdW5kXHJcblx0cGYudHJpbSA9IGZ1bmN0aW9uKCBzdHIgKSB7XHJcblx0XHRyZXR1cm4gc3RyLnRyaW0gPyBzdHIudHJpbSgpIDogc3RyLnJlcGxhY2UoIC9eXFxzK3xcXHMrJC9nLCBcIlwiICk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogR2V0cyBhIHN0cmluZyBhbmQgcmV0dXJucyB0aGUgYWJzb2x1dGUgVVJMXHJcblx0ICogQHBhcmFtIHNyY1xyXG5cdCAqIEByZXR1cm5zIHtTdHJpbmd9IGFic29sdXRlIFVSTFxyXG5cdCAqL1xyXG5cdHBmLm1ha2VVcmwgPSAoZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgYW5jaG9yID0gZG9jLmNyZWF0ZUVsZW1lbnQoIFwiYVwiICk7XHJcblx0XHRyZXR1cm4gZnVuY3Rpb24oc3JjKSB7XHJcblx0XHRcdGFuY2hvci5ocmVmID0gc3JjO1xyXG5cdFx0XHRyZXR1cm4gYW5jaG9yLmhyZWY7XHJcblx0XHR9O1xyXG5cdH0pKCk7XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNob3J0Y3V0IG1ldGhvZCBmb3IgaHR0cHM6Ly93M2MuZ2l0aHViLmlvL3dlYmFwcHNlYy9zcGVjcy9taXhlZGNvbnRlbnQvI3Jlc3RyaWN0cy1taXhlZC1jb250ZW50ICggZm9yIGVhc3kgb3ZlcnJpZGluZyBpbiB0ZXN0cyApXHJcblx0ICovXHJcblx0cGYucmVzdHJpY3RzTWl4ZWRDb250ZW50ID0gZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdy5sb2NhdGlvbi5wcm90b2NvbCA9PT0gXCJodHRwczpcIjtcclxuXHR9O1xyXG5cdC8qKlxyXG5cdCAqIFNob3J0Y3V0IG1ldGhvZCBmb3IgbWF0Y2hNZWRpYSAoIGZvciBlYXN5IG92ZXJyaWRpbmcgaW4gdGVzdHMgKVxyXG5cdCAqL1xyXG5cclxuXHRwZi5tYXRjaGVzTWVkaWEgPSBmdW5jdGlvbiggbWVkaWEgKSB7XHJcblx0XHRyZXR1cm4gdy5tYXRjaE1lZGlhICYmIHcubWF0Y2hNZWRpYSggbWVkaWEgKS5tYXRjaGVzO1xyXG5cdH07XHJcblxyXG5cdC8vIFNob3J0Y3V0IG1ldGhvZCBmb3IgYGRldmljZVBpeGVsUmF0aW9gICggZm9yIGVhc3kgb3ZlcnJpZGluZyBpbiB0ZXN0cyApXHJcblx0cGYuZ2V0RHByID0gZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gKCB3LmRldmljZVBpeGVsUmF0aW8gfHwgMSApO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldCB3aWR0aCBpbiBjc3MgcGl4ZWwgdmFsdWUgZnJvbSBhIFwibGVuZ3RoXCIgdmFsdWVcclxuXHQgKiBodHRwOi8vZGV2LnczLm9yZy9jc3N3Zy9jc3MtdmFsdWVzLTMvI2xlbmd0aC12YWx1ZVxyXG5cdCAqL1xyXG5cdHBmLmdldFdpZHRoRnJvbUxlbmd0aCA9IGZ1bmN0aW9uKCBsZW5ndGggKSB7XHJcblx0XHR2YXIgY3NzVmFsdWU7XHJcblx0XHQvLyBJZiBhIGxlbmd0aCBpcyBzcGVjaWZpZWQgYW5kIGRvZXNu4oCZdCBjb250YWluIGEgcGVyY2VudGFnZSwgYW5kIGl0IGlzIGdyZWF0ZXIgdGhhbiAwIG9yIHVzaW5nIGBjYWxjYCwgdXNlIGl0LiBFbHNlLCBhYm9ydC5cclxuICAgICAgICBpZiAoICEobGVuZ3RoICYmIGxlbmd0aC5pbmRleE9mKCBcIiVcIiApID4gLTEgPT09IGZhbHNlICYmICggcGFyc2VGbG9hdCggbGVuZ3RoICkgPiAwIHx8IGxlbmd0aC5pbmRleE9mKCBcImNhbGMoXCIgKSA+IC0xICkpICkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogSWYgbGVuZ3RoIGlzIHNwZWNpZmllZCBpbiAgYHZ3YCB1bml0cywgdXNlIGAlYCBpbnN0ZWFkIHNpbmNlIHRoZSBkaXYgd2XigJlyZSBtZWFzdXJpbmdcclxuXHRcdCAqIGlzIGluamVjdGVkIGF0IHRoZSB0b3Agb2YgdGhlIGRvY3VtZW50LlxyXG5cdFx0ICpcclxuXHRcdCAqIFRPRE86IG1heWJlIHdlIHNob3VsZCBwdXQgdGhpcyBiZWhpbmQgYSBmZWF0dXJlIHRlc3QgZm9yIGB2d2A/IFRoZSByaXNrIG9mIGRvaW5nIHRoaXMgaXMgcG9zc2libGUgYnJvd3NlciBpbmNvbnNpc3RhbmNpZXMgd2l0aCB2dyB2cyAlXHJcblx0XHQgKi9cclxuXHRcdGxlbmd0aCA9IGxlbmd0aC5yZXBsYWNlKCBcInZ3XCIsIFwiJVwiICk7XHJcblxyXG5cdFx0Ly8gQ3JlYXRlIGEgY2FjaGVkIGVsZW1lbnQgZm9yIGdldHRpbmcgbGVuZ3RoIHZhbHVlIHdpZHRoc1xyXG5cdFx0aWYgKCAhcGYubGVuZ3RoRWwgKSB7XHJcblx0XHRcdHBmLmxlbmd0aEVsID0gZG9jLmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKTtcclxuXHJcblx0XHRcdC8vIFBvc2l0aW9uaW5nIHN0eWxlcyBoZWxwIHByZXZlbnQgcGFkZGluZy9tYXJnaW4vd2lkdGggb24gYGh0bWxgIG9yIGBib2R5YCBmcm9tIHRocm93aW5nIGNhbGN1bGF0aW9ucyBvZmYuXHJcblx0XHRcdHBmLmxlbmd0aEVsLnN0eWxlLmNzc1RleHQgPSBcImJvcmRlcjowO2Rpc3BsYXk6YmxvY2s7Zm9udC1zaXplOjFlbTtsZWZ0OjA7bWFyZ2luOjA7cGFkZGluZzowO3Bvc2l0aW9uOmFic29sdXRlO3Zpc2liaWxpdHk6aGlkZGVuXCI7XHJcblxyXG5cdFx0XHQvLyBBZGQgYSBjbGFzcywgc28gdGhhdCBldmVyeW9uZSBrbm93cyB3aGVyZSB0aGlzIGVsZW1lbnQgY29tZXMgZnJvbVxyXG5cdFx0XHRwZi5sZW5ndGhFbC5jbGFzc05hbWUgPSBcImhlbHBlci1mcm9tLXBpY3R1cmVmaWxsLWpzXCI7XHJcblx0XHR9XHJcblxyXG5cdFx0cGYubGVuZ3RoRWwuc3R5bGUud2lkdGggPSBcIjBweFwiO1xyXG5cclxuICAgICAgICB0cnkge1xyXG5cdFx0ICAgIHBmLmxlbmd0aEVsLnN0eWxlLndpZHRoID0gbGVuZ3RoO1xyXG4gICAgICAgIH0gY2F0Y2ggKCBlICkge31cclxuXHJcblx0XHRkb2MuYm9keS5hcHBlbmRDaGlsZChwZi5sZW5ndGhFbCk7XHJcblxyXG5cdFx0Y3NzVmFsdWUgPSBwZi5sZW5ndGhFbC5vZmZzZXRXaWR0aDtcclxuXHJcblx0XHRpZiAoIGNzc1ZhbHVlIDw9IDAgKSB7XHJcblx0XHRcdGNzc1ZhbHVlID0gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0ZG9jLmJvZHkucmVtb3ZlQ2hpbGQoIHBmLmxlbmd0aEVsICk7XHJcblxyXG5cdFx0cmV0dXJuIGNzc1ZhbHVlO1xyXG5cdH07XHJcblxyXG4gICAgcGYuZGV0ZWN0VHlwZVN1cHBvcnQgPSBmdW5jdGlvbiggdHlwZSwgdHlwZVVyaSApIHtcclxuICAgICAgICAvLyBiYXNlZCBvbiBNb2Rlcm5penIncyBsb3NzbGVzcyBpbWctd2VicCB0ZXN0XHJcbiAgICAgICAgLy8gbm90ZTogYXN5bmNocm9ub3VzXHJcbiAgICAgICAgdmFyIGltYWdlID0gbmV3IHcuSW1hZ2UoKTtcclxuICAgICAgICBpbWFnZS5vbmVycm9yID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHBmLnR5cGVzWyB0eXBlIF0gPSBmYWxzZTtcclxuICAgICAgICAgICAgcGljdHVyZWZpbGwoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBwZi50eXBlc1sgdHlwZSBdID0gaW1hZ2Uud2lkdGggPT09IDE7XHJcbiAgICAgICAgICAgIHBpY3R1cmVmaWxsKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBpbWFnZS5zcmMgPSB0eXBlVXJpO1xyXG5cclxuICAgICAgICByZXR1cm4gXCJwZW5kaW5nXCI7XHJcbiAgICB9O1xyXG5cdC8vIGNvbnRhaW5lciBvZiBzdXBwb3J0ZWQgbWltZSB0eXBlcyB0aGF0IG9uZSBtaWdodCBuZWVkIHRvIHF1YWxpZnkgYmVmb3JlIHVzaW5nXHJcblx0cGYudHlwZXMgPSBwZi50eXBlcyB8fCB7fTtcclxuXHJcblx0cGYuaW5pdFR5cGVEZXRlY3RzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8gQWRkIHN1cHBvcnQgZm9yIHN0YW5kYXJkIG1pbWUgdHlwZXNcclxuICAgICAgICBwZi50eXBlc1sgXCJpbWFnZS9qcGVnXCIgXSA9IHRydWU7XHJcbiAgICAgICAgcGYudHlwZXNbIFwiaW1hZ2UvZ2lmXCIgXSA9IHRydWU7XHJcbiAgICAgICAgcGYudHlwZXNbIFwiaW1hZ2UvcG5nXCIgXSA9IHRydWU7XHJcbiAgICAgICAgcGYudHlwZXNbIFwiaW1hZ2Uvc3ZnK3htbFwiIF0gPSBkb2MuaW1wbGVtZW50YXRpb24uaGFzRmVhdHVyZShcImh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjSW1hZ2VcIiwgXCIxLjFcIik7XHJcbiAgICAgICAgcGYudHlwZXNbIFwiaW1hZ2Uvd2VicFwiIF0gPSBwZi5kZXRlY3RUeXBlU3VwcG9ydChcImltYWdlL3dlYnBcIiwgXCJkYXRhOmltYWdlL3dlYnA7YmFzZTY0LFVrbEdSaDRBQUFCWFJVSlFWbEE0VEJFQUFBQXZBQUFBQUFmUS8vNzN2LytCaU9oL0FBQT1cIik7XHJcbiAgICB9O1xyXG5cclxuXHRwZi52ZXJpZnlUeXBlU3VwcG9ydCA9IGZ1bmN0aW9uKCBzb3VyY2UgKSB7XHJcblx0XHR2YXIgdHlwZSA9IHNvdXJjZS5nZXRBdHRyaWJ1dGUoIFwidHlwZVwiICk7XHJcblx0XHQvLyBpZiB0eXBlIGF0dHJpYnV0ZSBleGlzdHMsIHJldHVybiB0ZXN0IHJlc3VsdCwgb3RoZXJ3aXNlIHJldHVybiB0cnVlXHJcblx0XHRpZiAoIHR5cGUgPT09IG51bGwgfHwgdHlwZSA9PT0gXCJcIiApIHtcclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHZhciBwZlR5cGUgPSBwZi50eXBlc1sgdHlwZSBdO1xyXG5cdFx0XHQvLyBpZiB0aGUgdHlwZSB0ZXN0IGlzIGEgZnVuY3Rpb24sIHJ1biBpdCBhbmQgcmV0dXJuIFwicGVuZGluZ1wiIHN0YXR1cy4gVGhlIGZ1bmN0aW9uIHdpbGwgcmVydW4gcGljdHVyZWZpbGwgb24gcGVuZGluZyBlbGVtZW50cyBvbmNlIGZpbmlzaGVkLlxyXG5cdFx0XHRpZiAoIHR5cGVvZiBwZlR5cGUgPT09IFwic3RyaW5nXCIgJiYgcGZUeXBlICE9PSBcInBlbmRpbmdcIikge1xyXG5cdFx0XHRcdHBmLnR5cGVzWyB0eXBlIF0gPSBwZi5kZXRlY3RUeXBlU3VwcG9ydCggdHlwZSwgcGZUeXBlICk7XHJcblx0XHRcdFx0cmV0dXJuIFwicGVuZGluZ1wiO1xyXG5cdFx0XHR9IGVsc2UgaWYgKCB0eXBlb2YgcGZUeXBlID09PSBcImZ1bmN0aW9uXCIgKSB7XHJcblx0XHRcdFx0cGZUeXBlKCk7XHJcblx0XHRcdFx0cmV0dXJuIFwicGVuZGluZ1wiO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHJldHVybiBwZlR5cGU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQvLyBQYXJzZXMgYW4gaW5kaXZpZHVhbCBgc2l6ZWAgYW5kIHJldHVybnMgdGhlIGxlbmd0aCwgYW5kIG9wdGlvbmFsIG1lZGlhIHF1ZXJ5XHJcblx0cGYucGFyc2VTaXplID0gZnVuY3Rpb24oIHNvdXJjZVNpemVTdHIgKSB7XHJcblx0XHR2YXIgbWF0Y2ggPSAvKFxcKFteKV0rXFwpKT9cXHMqKC4rKS9nLmV4ZWMoIHNvdXJjZVNpemVTdHIgKTtcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdG1lZGlhOiBtYXRjaCAmJiBtYXRjaFsxXSxcclxuXHRcdFx0bGVuZ3RoOiBtYXRjaCAmJiBtYXRjaFsyXVxyXG5cdFx0fTtcclxuXHR9O1xyXG5cclxuXHQvLyBUYWtlcyBhIHN0cmluZyBvZiBzaXplcyBhbmQgcmV0dXJucyB0aGUgd2lkdGggaW4gcGl4ZWxzIGFzIGEgbnVtYmVyXHJcblx0cGYuZmluZFdpZHRoRnJvbVNvdXJjZVNpemUgPSBmdW5jdGlvbiggc291cmNlU2l6ZUxpc3RTdHIgKSB7XHJcblx0XHQvLyBTcGxpdCB1cCBzb3VyY2Ugc2l6ZSBsaXN0LCBpZSAoIG1heC13aWR0aDogMzBlbSApIDEwMCUsICggbWF4LXdpZHRoOiA1MGVtICkgNTAlLCAzMyVcclxuXHRcdC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yIChtaW4td2lkdGg6MzBlbSkgY2FsYygzMCUgLSAxNXB4KVxyXG5cdFx0dmFyIHNvdXJjZVNpemVMaXN0ID0gcGYudHJpbSggc291cmNlU2l6ZUxpc3RTdHIgKS5zcGxpdCggL1xccyosXFxzKi8gKSxcclxuXHRcdFx0d2lubmluZ0xlbmd0aDtcclxuXHJcblx0XHRmb3IgKCB2YXIgaSA9IDAsIGxlbiA9IHNvdXJjZVNpemVMaXN0Lmxlbmd0aDsgaSA8IGxlbjsgaSsrICkge1xyXG5cdFx0XHQvLyBNYXRjaCA8bWVkaWEtY29uZGl0aW9uPj8gbGVuZ3RoLCBpZSAoIG1pbi13aWR0aDogNTBlbSApIDEwMCVcclxuXHRcdFx0dmFyIHNvdXJjZVNpemUgPSBzb3VyY2VTaXplTGlzdFsgaSBdLFxyXG5cdFx0XHRcdC8vIFNwbGl0IFwiKCBtaW4td2lkdGg6IDUwZW0gKSAxMDAlXCIgaW50byBzZXBhcmF0ZSBzdHJpbmdzXHJcblx0XHRcdFx0cGFyc2VkU2l6ZSA9IHBmLnBhcnNlU2l6ZSggc291cmNlU2l6ZSApLFxyXG5cdFx0XHRcdGxlbmd0aCA9IHBhcnNlZFNpemUubGVuZ3RoLFxyXG5cdFx0XHRcdG1lZGlhID0gcGFyc2VkU2l6ZS5tZWRpYTtcclxuXHJcblx0XHRcdGlmICggIWxlbmd0aCApIHtcclxuXHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0fVxyXG5cdFx0XHQvLyBpZiB0aGVyZSBpcyBubyBtZWRpYSBxdWVyeSBvciBpdCBtYXRjaGVzLCBjaG9vc2UgdGhpcyBhcyBvdXIgd2lubmluZyBsZW5ndGhcclxuXHRcdFx0aWYgKCAoIW1lZGlhIHx8IHBmLm1hdGNoZXNNZWRpYSggbWVkaWEgKSkgJiZcclxuXHRcdFx0XHQvLyBwYXNzIHRoZSBsZW5ndGggdG8gYSBtZXRob2QgdGhhdCBjYW4gcHJvcGVybHkgZGV0ZXJtaW5lIGxlbmd0aFxyXG5cdFx0XHRcdC8vIGluIHBpeGVscyBiYXNlZCBvbiB0aGVzZSBmb3JtYXRzOiBodHRwOi8vZGV2LnczLm9yZy9jc3N3Zy9jc3MtdmFsdWVzLTMvI2xlbmd0aC12YWx1ZVxyXG5cdFx0XHRcdCh3aW5uaW5nTGVuZ3RoID0gcGYuZ2V0V2lkdGhGcm9tTGVuZ3RoKCBsZW5ndGggKSkgKSB7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvL2lmIHdlIGhhdmUgbm8gd2lubmluZ0xlbmd0aCBmYWxsYmFjayB0byAxMDB2d1xyXG5cdFx0cmV0dXJuIHdpbm5pbmdMZW5ndGggfHwgTWF0aC5tYXgody5pbm5lcldpZHRoIHx8IDAsIGRvYy5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgpO1xyXG5cdH07XHJcblxyXG5cdHBmLnBhcnNlU3Jjc2V0ID0gZnVuY3Rpb24oIHNyY3NldCApIHtcclxuXHRcdC8qKlxyXG5cdFx0ICogQSBsb3Qgb2YgdGhpcyB3YXMgcHVsbGVkIGZyb20gQm9yaXMgU211c+KAmSBwYXJzZXIgZm9yIHRoZSBub3ctZGVmdW5jdCBXSEFUV0cgYHNyY3NldGBcclxuXHRcdCAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ib3Jpc211cy9zcmNzZXQtcG9seWZpbGwvYmxvYi9tYXN0ZXIvanMvc3Jjc2V0LWluZm8uanNcclxuXHRcdCAqXHJcblx0XHQgKiAxLiBMZXQgaW5wdXQgKGBzcmNzZXRgKSBiZSB0aGUgdmFsdWUgcGFzc2VkIHRvIHRoaXMgYWxnb3JpdGhtLlxyXG5cdFx0ICogMi4gTGV0IHBvc2l0aW9uIGJlIGEgcG9pbnRlciBpbnRvIGlucHV0LCBpbml0aWFsbHkgcG9pbnRpbmcgYXQgdGhlIHN0YXJ0IG9mIHRoZSBzdHJpbmcuXHJcblx0XHQgKiAzLiBMZXQgcmF3IGNhbmRpZGF0ZXMgYmUgYW4gaW5pdGlhbGx5IGVtcHR5IG9yZGVyZWQgbGlzdCBvZiBVUkxzIHdpdGggYXNzb2NpYXRlZFxyXG5cdFx0ICogICAgdW5wYXJzZWQgZGVzY3JpcHRvcnMuIFRoZSBvcmRlciBvZiBlbnRyaWVzIGluIHRoZSBsaXN0IGlzIHRoZSBvcmRlciBpbiB3aGljaCBlbnRyaWVzXHJcblx0XHQgKiAgICBhcmUgYWRkZWQgdG8gdGhlIGxpc3QuXHJcblx0XHQgKi9cclxuXHRcdHZhciBjYW5kaWRhdGVzID0gW107XHJcblxyXG5cdFx0d2hpbGUgKCBzcmNzZXQgIT09IFwiXCIgKSB7XHJcblx0XHRcdHNyY3NldCA9IHNyY3NldC5yZXBsYWNlKCAvXlxccysvZywgXCJcIiApO1xyXG5cclxuXHRcdFx0Ly8gNS4gQ29sbGVjdCBhIHNlcXVlbmNlIG9mIGNoYXJhY3RlcnMgdGhhdCBhcmUgbm90IHNwYWNlIGNoYXJhY3RlcnMsIGFuZCBsZXQgdGhhdCBiZSB1cmwuXHJcblx0XHRcdHZhciBwb3MgPSBzcmNzZXQuc2VhcmNoKC9cXHMvZyksXHJcblx0XHRcdFx0dXJsLCBkZXNjcmlwdG9yID0gbnVsbDtcclxuXHJcblx0XHRcdGlmICggcG9zICE9PSAtMSApIHtcclxuXHRcdFx0XHR1cmwgPSBzcmNzZXQuc2xpY2UoIDAsIHBvcyApO1xyXG5cclxuXHRcdFx0XHR2YXIgbGFzdCA9IHVybC5zbGljZSgtMSk7XHJcblxyXG5cdFx0XHRcdC8vIDYuIElmIHVybCBlbmRzIHdpdGggYSBVKzAwMkMgQ09NTUEgY2hhcmFjdGVyICgsKSwgcmVtb3ZlIHRoYXQgY2hhcmFjdGVyIGZyb20gdXJsXHJcblx0XHRcdFx0Ly8gYW5kIGxldCBkZXNjcmlwdG9ycyBiZSB0aGUgZW1wdHkgc3RyaW5nLiBPdGhlcndpc2UsIGZvbGxvdyB0aGVzZSBzdWJzdGVwc1xyXG5cdFx0XHRcdC8vIDYuMS4gSWYgdXJsIGlzIGVtcHR5LCB0aGVuIGp1bXAgdG8gdGhlIHN0ZXAgbGFiZWxlZCBkZXNjcmlwdG9yIHBhcnNlci5cclxuXHJcblx0XHRcdFx0aWYgKCBsYXN0ID09PSBcIixcIiB8fCB1cmwgPT09IFwiXCIgKSB7XHJcblx0XHRcdFx0XHR1cmwgPSB1cmwucmVwbGFjZSggLywrJC8sIFwiXCIgKTtcclxuXHRcdFx0XHRcdGRlc2NyaXB0b3IgPSBcIlwiO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRzcmNzZXQgPSBzcmNzZXQuc2xpY2UoIHBvcyArIDEgKTtcclxuXHJcblx0XHRcdFx0Ly8gNi4yLiBDb2xsZWN0IGEgc2VxdWVuY2Ugb2YgY2hhcmFjdGVycyB0aGF0IGFyZSBub3QgVSswMDJDIENPTU1BIGNoYXJhY3RlcnMgKCwpLCBhbmRcclxuXHRcdFx0XHQvLyBsZXQgdGhhdCBiZSBkZXNjcmlwdG9ycy5cclxuXHRcdFx0XHRpZiAoIGRlc2NyaXB0b3IgPT09IG51bGwgKSB7XHJcblx0XHRcdFx0XHR2YXIgZGVzY3BvcyA9IHNyY3NldC5pbmRleE9mKCBcIixcIiApO1xyXG5cdFx0XHRcdFx0aWYgKCBkZXNjcG9zICE9PSAtMSApIHtcclxuXHRcdFx0XHRcdFx0ZGVzY3JpcHRvciA9IHNyY3NldC5zbGljZSggMCwgZGVzY3BvcyApO1xyXG5cdFx0XHRcdFx0XHRzcmNzZXQgPSBzcmNzZXQuc2xpY2UoIGRlc2Nwb3MgKyAxICk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRkZXNjcmlwdG9yID0gc3Jjc2V0O1xyXG5cdFx0XHRcdFx0XHRzcmNzZXQgPSBcIlwiO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR1cmwgPSBzcmNzZXQ7XHJcblx0XHRcdFx0c3Jjc2V0ID0gXCJcIjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gNy4gQWRkIHVybCB0byByYXcgY2FuZGlkYXRlcywgYXNzb2NpYXRlZCB3aXRoIGRlc2NyaXB0b3JzLlxyXG5cdFx0XHRpZiAoIHVybCB8fCBkZXNjcmlwdG9yICkge1xyXG5cdFx0XHRcdGNhbmRpZGF0ZXMucHVzaCh7XHJcblx0XHRcdFx0XHR1cmw6IHVybCxcclxuXHRcdFx0XHRcdGRlc2NyaXB0b3I6IGRlc2NyaXB0b3JcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGNhbmRpZGF0ZXM7XHJcblx0fTtcclxuXHJcblx0cGYucGFyc2VEZXNjcmlwdG9yID0gZnVuY3Rpb24oIGRlc2NyaXB0b3IsIHNpemVzYXR0ciApIHtcclxuXHRcdC8vIDExLiBEZXNjcmlwdG9yIHBhcnNlcjogTGV0IGNhbmRpZGF0ZXMgYmUgYW4gaW5pdGlhbGx5IGVtcHR5IHNvdXJjZSBzZXQuIFRoZSBvcmRlciBvZiBlbnRyaWVzIGluIHRoZSBsaXN0XHJcblx0XHQvLyBpcyB0aGUgb3JkZXIgaW4gd2hpY2ggZW50cmllcyBhcmUgYWRkZWQgdG8gdGhlIGxpc3QuXHJcblx0XHR2YXIgc2l6ZXMgPSBzaXplc2F0dHIgfHwgXCIxMDB2d1wiLFxyXG5cdFx0XHRzaXplRGVzY3JpcHRvciA9IGRlc2NyaXB0b3IgJiYgZGVzY3JpcHRvci5yZXBsYWNlKCAvKF5cXHMrfFxccyskKS9nLCBcIlwiICksXHJcblx0XHRcdHdpZHRoSW5Dc3NQaXhlbHMgPSBwZi5maW5kV2lkdGhGcm9tU291cmNlU2l6ZSggc2l6ZXMgKSxcclxuXHRcdFx0cmVzQ2FuZGlkYXRlO1xyXG5cclxuXHRcdFx0aWYgKCBzaXplRGVzY3JpcHRvciApIHtcclxuXHRcdFx0XHR2YXIgc3BsaXREZXNjcmlwdG9yID0gc2l6ZURlc2NyaXB0b3Iuc3BsaXQoXCIgXCIpO1xyXG5cclxuXHRcdFx0XHRmb3IgKHZhciBpID0gc3BsaXREZXNjcmlwdG9yLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcblx0XHRcdFx0XHR2YXIgY3VyciA9IHNwbGl0RGVzY3JpcHRvclsgaSBdLFxyXG5cdFx0XHRcdFx0XHRsYXN0Y2hhciA9IGN1cnIgJiYgY3Vyci5zbGljZSggY3Vyci5sZW5ndGggLSAxICk7XHJcblxyXG5cdFx0XHRcdFx0aWYgKCAoIGxhc3RjaGFyID09PSBcImhcIiB8fCBsYXN0Y2hhciA9PT0gXCJ3XCIgKSAmJiAhcGYuc2l6ZXNTdXBwb3J0ZWQgKSB7XHJcblx0XHRcdFx0XHRcdHJlc0NhbmRpZGF0ZSA9IHBhcnNlRmxvYXQoICggcGFyc2VJbnQoIGN1cnIsIDEwICkgLyB3aWR0aEluQ3NzUGl4ZWxzICkgKTtcclxuXHRcdFx0XHRcdH0gZWxzZSBpZiAoIGxhc3RjaGFyID09PSBcInhcIiApIHtcclxuXHRcdFx0XHRcdFx0dmFyIHJlcyA9IGN1cnIgJiYgcGFyc2VGbG9hdCggY3VyciwgMTAgKTtcclxuXHRcdFx0XHRcdFx0cmVzQ2FuZGlkYXRlID0gcmVzICYmICFpc05hTiggcmVzICkgPyByZXMgOiAxO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0cmV0dXJuIHJlc0NhbmRpZGF0ZSB8fCAxO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIFRha2VzIGEgc3Jjc2V0IGluIHRoZSBmb3JtIG9mIHVybC9cclxuXHQgKiBleC4gXCJpbWFnZXMvcGljLW1lZGl1bS5wbmcgMXgsIGltYWdlcy9waWMtbWVkaXVtLTJ4LnBuZyAyeFwiIG9yXHJcblx0ICogICAgIFwiaW1hZ2VzL3BpYy1tZWRpdW0ucG5nIDQwMHcsIGltYWdlcy9waWMtbWVkaXVtLTJ4LnBuZyA4MDB3XCIgb3JcclxuXHQgKiAgICAgXCJpbWFnZXMvcGljLXNtYWxsLnBuZ1wiXHJcblx0ICogR2V0IGFuIGFycmF5IG9mIGltYWdlIGNhbmRpZGF0ZXMgaW4gdGhlIGZvcm0gb2ZcclxuXHQgKiAgICAgIHt1cmw6IFwiL2Zvby9iYXIucG5nXCIsIHJlc29sdXRpb246IDF9XHJcblx0ICogd2hlcmUgcmVzb2x1dGlvbiBpcyBodHRwOi8vZGV2LnczLm9yZy9jc3N3Zy9jc3MtdmFsdWVzLTMvI3Jlc29sdXRpb24tdmFsdWVcclxuXHQgKiBJZiBzaXplcyBpcyBzcGVjaWZpZWQsIHJlc29sdXRpb24gaXMgY2FsY3VsYXRlZFxyXG5cdCAqL1xyXG5cdHBmLmdldENhbmRpZGF0ZXNGcm9tU291cmNlU2V0ID0gZnVuY3Rpb24oIHNyY3NldCwgc2l6ZXMgKSB7XHJcblx0XHR2YXIgY2FuZGlkYXRlcyA9IHBmLnBhcnNlU3Jjc2V0KCBzcmNzZXQgKSxcclxuXHRcdFx0Zm9ybWF0dGVkQ2FuZGlkYXRlcyA9IFtdO1xyXG5cclxuXHRcdGZvciAoIHZhciBpID0gMCwgbGVuID0gY2FuZGlkYXRlcy5sZW5ndGg7IGkgPCBsZW47IGkrKyApIHtcclxuXHRcdFx0dmFyIGNhbmRpZGF0ZSA9IGNhbmRpZGF0ZXNbIGkgXTtcclxuXHJcblx0XHRcdGZvcm1hdHRlZENhbmRpZGF0ZXMucHVzaCh7XHJcblx0XHRcdFx0dXJsOiBjYW5kaWRhdGUudXJsLFxyXG5cdFx0XHRcdHJlc29sdXRpb246IHBmLnBhcnNlRGVzY3JpcHRvciggY2FuZGlkYXRlLmRlc2NyaXB0b3IsIHNpemVzIClcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gZm9ybWF0dGVkQ2FuZGlkYXRlcztcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBpZiBpdCdzIGFuIGltZyBlbGVtZW50IGFuZCBpdCBoYXMgYSBzcmNzZXQgcHJvcGVydHksXHJcblx0ICogd2UgbmVlZCB0byByZW1vdmUgdGhlIGF0dHJpYnV0ZSBzbyB3ZSBjYW4gbWFuaXB1bGF0ZSBzcmNcclxuXHQgKiAodGhlIHByb3BlcnR5J3MgZXhpc3RlbmNlIGluZmVycyBuYXRpdmUgc3Jjc2V0IHN1cHBvcnQsIGFuZCBhIHNyY3NldC1zdXBwb3J0aW5nIGJyb3dzZXIgd2lsbCBwcmlvcml0aXplIHNyY3NldCdzIHZhbHVlIG92ZXIgb3VyIHdpbm5pbmcgcGljdHVyZSBjYW5kaWRhdGUpXHJcblx0ICogdGhpcyBtb3ZlcyBzcmNzZXQncyB2YWx1ZSB0byBtZW1vcnkgZm9yIGxhdGVyIHVzZSBhbmQgcmVtb3ZlcyB0aGUgYXR0clxyXG5cdCAqL1xyXG5cdHBmLmRvZGdlU3Jjc2V0ID0gZnVuY3Rpb24oIGltZyApIHtcclxuXHRcdGlmICggaW1nLnNyY3NldCApIHtcclxuXHRcdFx0aW1nWyBwZi5ucyBdLnNyY3NldCA9IGltZy5zcmNzZXQ7XHJcblx0XHRcdGltZy5zcmNzZXQgPSBcIlwiO1xyXG5cdFx0XHRpbWcuc2V0QXR0cmlidXRlKCBcImRhdGEtcGZzcmNzZXRcIiwgaW1nWyBwZi5ucyBdLnNyY3NldCApO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdC8vIEFjY2VwdCBhIHNvdXJjZSBvciBpbWcgZWxlbWVudCBhbmQgcHJvY2VzcyBpdHMgc3Jjc2V0IGFuZCBzaXplcyBhdHRyc1xyXG5cdHBmLnByb2Nlc3NTb3VyY2VTZXQgPSBmdW5jdGlvbiggZWwgKSB7XHJcblx0XHR2YXIgc3Jjc2V0ID0gZWwuZ2V0QXR0cmlidXRlKCBcInNyY3NldFwiICksXHJcblx0XHRcdHNpemVzID0gZWwuZ2V0QXR0cmlidXRlKCBcInNpemVzXCIgKSxcclxuXHRcdFx0Y2FuZGlkYXRlcyA9IFtdO1xyXG5cclxuXHRcdC8vIGlmIGl0J3MgYW4gaW1nIGVsZW1lbnQsIHVzZSB0aGUgY2FjaGVkIHNyY3NldCBwcm9wZXJ0eSAoZGVmaW5lZCBvciBub3QpXHJcblx0XHRpZiAoIGVsLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkgPT09IFwiSU1HXCIgJiYgZWxbIHBmLm5zIF0gJiYgZWxbIHBmLm5zIF0uc3Jjc2V0ICkge1xyXG5cdFx0XHRzcmNzZXQgPSBlbFsgcGYubnMgXS5zcmNzZXQ7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBzcmNzZXQgKSB7XHJcblx0XHRcdGNhbmRpZGF0ZXMgPSBwZi5nZXRDYW5kaWRhdGVzRnJvbVNvdXJjZVNldCggc3Jjc2V0LCBzaXplcyApO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGNhbmRpZGF0ZXM7XHJcblx0fTtcclxuXHJcblx0cGYuYmFja2ZhY2VWaXNpYmlsaXR5Rml4ID0gZnVuY3Rpb24oIHBpY0ltZyApIHtcclxuXHRcdC8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL3Njb3R0amVobC9waWN0dXJlZmlsbC9pc3N1ZXMvMzMyXHJcblx0XHR2YXIgc3R5bGUgPSBwaWNJbWcuc3R5bGUgfHwge30sXHJcblx0XHRcdFdlYmtpdEJhY2tmYWNlVmlzaWJpbGl0eSA9IFwid2Via2l0QmFja2ZhY2VWaXNpYmlsaXR5XCIgaW4gc3R5bGUsXHJcblx0XHRcdGN1cnJlbnRab29tID0gc3R5bGUuem9vbTtcclxuXHJcblx0XHRpZiAoV2Via2l0QmFja2ZhY2VWaXNpYmlsaXR5KSB7XHJcblx0XHRcdHN0eWxlLnpvb20gPSBcIi45OTlcIjtcclxuXHJcblx0XHRcdFdlYmtpdEJhY2tmYWNlVmlzaWJpbGl0eSA9IHBpY0ltZy5vZmZzZXRXaWR0aDtcclxuXHJcblx0XHRcdHN0eWxlLnpvb20gPSBjdXJyZW50Wm9vbTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHRwZi5zZXRJbnRyaW5zaWNTaXplID0gKGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHVybENhY2hlID0ge307XHJcblx0XHR2YXIgc2V0U2l6ZSA9IGZ1bmN0aW9uKCBwaWNJbWcsIHdpZHRoLCByZXMgKSB7XHJcbiAgICAgICAgICAgIGlmICggd2lkdGggKSB7XHJcblx0XHRcdCAgICBwaWNJbWcuc2V0QXR0cmlidXRlKCBcIndpZHRoXCIsIHBhcnNlSW50KHdpZHRoIC8gcmVzLCAxMCkgKTtcclxuICAgICAgICAgICAgfVxyXG5cdFx0fTtcclxuXHRcdHJldHVybiBmdW5jdGlvbiggcGljSW1nLCBiZXN0Q2FuZGlkYXRlICkge1xyXG5cdFx0XHR2YXIgaW1nO1xyXG5cdFx0XHRpZiAoICFwaWNJbWdbIHBmLm5zIF0gfHwgdy5wZlN0b3BJbnRyaW5zaWNTaXplICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIHBpY0ltZ1sgcGYubnMgXS5kaW1zID09PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0cGljSW1nWyBwZi5uc10uZGltcyA9IHBpY0ltZy5nZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiKSB8fCBwaWNJbWcuZ2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggcGljSW1nWyBwZi5uc10uZGltcyApIHsgcmV0dXJuOyB9XHJcblxyXG5cdFx0XHRpZiAoIGJlc3RDYW5kaWRhdGUudXJsIGluIHVybENhY2hlICkge1xyXG5cdFx0XHRcdHNldFNpemUoIHBpY0ltZywgdXJsQ2FjaGVbYmVzdENhbmRpZGF0ZS51cmxdLCBiZXN0Q2FuZGlkYXRlLnJlc29sdXRpb24gKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRpbWcgPSBkb2MuY3JlYXRlRWxlbWVudCggXCJpbWdcIiApO1xyXG5cdFx0XHRcdGltZy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdHVybENhY2hlW2Jlc3RDYW5kaWRhdGUudXJsXSA9IGltZy53aWR0aDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy9JRSAxMC8xMSBkb24ndCBjYWxjdWxhdGUgd2lkdGggZm9yIHN2ZyBvdXRzaWRlIGRvY3VtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAhdXJsQ2FjaGVbYmVzdENhbmRpZGF0ZS51cmxdICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmJvZHkuYXBwZW5kQ2hpbGQoIGltZyApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsQ2FjaGVbYmVzdENhbmRpZGF0ZS51cmxdID0gaW1nLndpZHRoIHx8IGltZy5vZmZzZXRXaWR0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5ib2R5LnJlbW92ZUNoaWxkKCBpbWcgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaChlKXt9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuXHRcdFx0XHRcdGlmICggcGljSW1nLnNyYyA9PT0gYmVzdENhbmRpZGF0ZS51cmwgKSB7XHJcblx0XHRcdFx0XHRcdHNldFNpemUoIHBpY0ltZywgdXJsQ2FjaGVbYmVzdENhbmRpZGF0ZS51cmxdLCBiZXN0Q2FuZGlkYXRlLnJlc29sdXRpb24gKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHBpY0ltZyA9IG51bGw7XHJcblx0XHRcdFx0XHRpbWcub25sb2FkID0gbnVsbDtcclxuXHRcdFx0XHRcdGltZyA9IG51bGw7XHJcblx0XHRcdFx0fTtcclxuXHRcdFx0XHRpbWcuc3JjID0gYmVzdENhbmRpZGF0ZS51cmw7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0fSkoKTtcclxuXHJcblx0cGYuYXBwbHlCZXN0Q2FuZGlkYXRlID0gZnVuY3Rpb24oIGNhbmRpZGF0ZXMsIHBpY0ltZyApIHtcclxuXHRcdHZhciBjYW5kaWRhdGUsXHJcblx0XHRcdGxlbmd0aCxcclxuXHRcdFx0YmVzdENhbmRpZGF0ZTtcclxuXHJcblx0XHRjYW5kaWRhdGVzLnNvcnQoIHBmLmFzY2VuZGluZ1NvcnQgKTtcclxuXHJcblx0XHRsZW5ndGggPSBjYW5kaWRhdGVzLmxlbmd0aDtcclxuXHRcdGJlc3RDYW5kaWRhdGUgPSBjYW5kaWRhdGVzWyBsZW5ndGggLSAxIF07XHJcblxyXG5cdFx0Zm9yICggdmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKysgKSB7XHJcblx0XHRcdGNhbmRpZGF0ZSA9IGNhbmRpZGF0ZXNbIGkgXTtcclxuXHRcdFx0aWYgKCBjYW5kaWRhdGUucmVzb2x1dGlvbiA+PSBwZi5nZXREcHIoKSApIHtcclxuXHRcdFx0XHRiZXN0Q2FuZGlkYXRlID0gY2FuZGlkYXRlO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBiZXN0Q2FuZGlkYXRlICkge1xyXG5cclxuXHRcdFx0YmVzdENhbmRpZGF0ZS51cmwgPSBwZi5tYWtlVXJsKCBiZXN0Q2FuZGlkYXRlLnVybCApO1xyXG5cclxuXHRcdFx0aWYgKCBwaWNJbWcuc3JjICE9PSBiZXN0Q2FuZGlkYXRlLnVybCApIHtcclxuXHRcdFx0XHRpZiAoIHBmLnJlc3RyaWN0c01peGVkQ29udGVudCgpICYmIGJlc3RDYW5kaWRhdGUudXJsLnN1YnN0cigwLCBcImh0dHA6XCIubGVuZ3RoKS50b0xvd2VyQ2FzZSgpID09PSBcImh0dHA6XCIgKSB7XHJcblx0XHRcdFx0XHRpZiAoIHdpbmRvdy5jb25zb2xlICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0XHRcdGNvbnNvbGUud2FybiggXCJCbG9ja2VkIG1peGVkIGNvbnRlbnQgaW1hZ2UgXCIgKyBiZXN0Q2FuZGlkYXRlLnVybCApO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRwaWNJbWcuc3JjID0gYmVzdENhbmRpZGF0ZS51cmw7XHJcblx0XHRcdFx0XHQvLyBjdXJyZW50U3JjIGF0dHJpYnV0ZSBhbmQgcHJvcGVydHkgdG8gbWF0Y2hcclxuXHRcdFx0XHRcdC8vIGh0dHA6Ly9waWN0dXJlLnJlc3BvbnNpdmVpbWFnZXMub3JnLyN0aGUtaW1nLWVsZW1lbnRcclxuXHRcdFx0XHRcdGlmICggIXBmLmN1clNyY1N1cHBvcnRlZCApIHtcclxuXHRcdFx0XHRcdFx0cGljSW1nLmN1cnJlbnRTcmMgPSBwaWNJbWcuc3JjO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdHBmLmJhY2tmYWNlVmlzaWJpbGl0eUZpeCggcGljSW1nICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRwZi5zZXRJbnRyaW5zaWNTaXplKHBpY0ltZywgYmVzdENhbmRpZGF0ZSk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0cGYuYXNjZW5kaW5nU29ydCA9IGZ1bmN0aW9uKCBhLCBiICkge1xyXG5cdFx0cmV0dXJuIGEucmVzb2x1dGlvbiAtIGIucmVzb2x1dGlvbjtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBJbiBJRTksIDxzb3VyY2U+IGVsZW1lbnRzIGdldCByZW1vdmVkIGlmIHRoZXkgYXJlbid0IGNoaWxkcmVuIG9mXHJcblx0ICogdmlkZW8gZWxlbWVudHMuIFRodXMsIHdlIGNvbmRpdGlvbmFsbHkgd3JhcCBzb3VyY2UgZWxlbWVudHNcclxuXHQgKiB1c2luZyA8IS0tW2lmIElFIDldPjx2aWRlbyBzdHlsZT1cImRpc3BsYXk6IG5vbmU7XCI+PCFbZW5kaWZdLS0+XHJcblx0ICogYW5kIG11c3QgYWNjb3VudCBmb3IgdGhhdCBoZXJlIGJ5IG1vdmluZyB0aG9zZSBzb3VyY2UgZWxlbWVudHNcclxuXHQgKiBiYWNrIGludG8gdGhlIHBpY3R1cmUgZWxlbWVudC5cclxuXHQgKi9cclxuXHRwZi5yZW1vdmVWaWRlb1NoaW0gPSBmdW5jdGlvbiggcGljdHVyZSApIHtcclxuXHRcdHZhciB2aWRlb3MgPSBwaWN0dXJlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCBcInZpZGVvXCIgKTtcclxuXHRcdGlmICggdmlkZW9zLmxlbmd0aCApIHtcclxuXHRcdFx0dmFyIHZpZGVvID0gdmlkZW9zWyAwIF0sXHJcblx0XHRcdFx0dnNvdXJjZXMgPSB2aWRlby5nZXRFbGVtZW50c0J5VGFnTmFtZSggXCJzb3VyY2VcIiApO1xyXG5cdFx0XHR3aGlsZSAoIHZzb3VyY2VzLmxlbmd0aCApIHtcclxuXHRcdFx0XHRwaWN0dXJlLmluc2VydEJlZm9yZSggdnNvdXJjZXNbIDAgXSwgdmlkZW8gKTtcclxuXHRcdFx0fVxyXG5cdFx0XHQvLyBSZW1vdmUgdGhlIHZpZGVvIGVsZW1lbnQgb25jZSB3ZSdyZSBmaW5pc2hlZCByZW1vdmluZyBpdHMgY2hpbGRyZW5cclxuXHRcdFx0dmlkZW8ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCggdmlkZW8gKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBGaW5kIGFsbCBgaW1nYCBlbGVtZW50cywgYW5kIGFkZCB0aGVtIHRvIHRoZSBjYW5kaWRhdGUgbGlzdCBpZiB0aGV5IGhhdmVcclxuXHQgKiBhIGBwaWN0dXJlYCBwYXJlbnQsIGEgYHNpemVzYCBhdHRyaWJ1dGUgaW4gYmFzaWMgYHNyY3NldGAgc3VwcG9ydGluZyBicm93c2VycyxcclxuXHQgKiBhIGBzcmNzZXRgIGF0dHJpYnV0ZSBhdCBhbGwsIGFuZCB0aGV5IGhhdmVu4oCZdCBiZWVuIGV2YWx1YXRlZCBhbHJlYWR5LlxyXG5cdCAqL1xyXG5cdHBmLmdldEFsbEVsZW1lbnRzID0gZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgZWxlbXMgPSBbXSxcclxuXHRcdFx0aW1ncyA9IGRvYy5nZXRFbGVtZW50c0J5VGFnTmFtZSggXCJpbWdcIiApO1xyXG5cclxuXHRcdGZvciAoIHZhciBoID0gMCwgbGVuID0gaW1ncy5sZW5ndGg7IGggPCBsZW47IGgrKyApIHtcclxuXHRcdFx0dmFyIGN1cnJJbWcgPSBpbWdzWyBoIF07XHJcblxyXG5cdFx0XHRpZiAoIGN1cnJJbWcucGFyZW50Tm9kZS5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpID09PSBcIlBJQ1RVUkVcIiB8fFxyXG5cdFx0XHQoIGN1cnJJbWcuZ2V0QXR0cmlidXRlKCBcInNyY3NldFwiICkgIT09IG51bGwgKSB8fCBjdXJySW1nWyBwZi5ucyBdICYmIGN1cnJJbWdbIHBmLm5zIF0uc3Jjc2V0ICE9PSBudWxsICkge1xyXG5cdFx0XHRcdGVsZW1zLnB1c2goIGN1cnJJbWcgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGVsZW1zO1xyXG5cdH07XHJcblxyXG5cdHBmLmdldE1hdGNoID0gZnVuY3Rpb24oIGltZywgcGljdHVyZSApIHtcclxuXHRcdHZhciBzb3VyY2VzID0gcGljdHVyZS5jaGlsZE5vZGVzLFxyXG5cdFx0XHRtYXRjaDtcclxuXHJcblx0XHQvLyBHbyB0aHJvdWdoIGVhY2ggY2hpbGQsIGFuZCBpZiB0aGV5IGhhdmUgbWVkaWEgcXVlcmllcywgZXZhbHVhdGUgdGhlbVxyXG5cdFx0Zm9yICggdmFyIGogPSAwLCBzbGVuID0gc291cmNlcy5sZW5ndGg7IGogPCBzbGVuOyBqKysgKSB7XHJcblx0XHRcdHZhciBzb3VyY2UgPSBzb3VyY2VzWyBqIF07XHJcblxyXG5cdFx0XHQvLyBpZ25vcmUgbm9uLWVsZW1lbnQgbm9kZXNcclxuXHRcdFx0aWYgKCBzb3VyY2Uubm9kZVR5cGUgIT09IDEgKSB7XHJcblx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIEhpdHRpbmcgdGhlIGBpbWdgIGVsZW1lbnQgdGhhdCBzdGFydGVkIGV2ZXJ5dGhpbmcgc3RvcHMgdGhlIHNlYXJjaCBmb3IgYHNvdXJjZXNgLlxyXG5cdFx0XHQvLyBJZiBubyBwcmV2aW91cyBgc291cmNlYCBtYXRjaGVzLCB0aGUgYGltZ2AgaXRzZWxmIGlzIGV2YWx1YXRlZCBsYXRlci5cclxuXHRcdFx0aWYgKCBzb3VyY2UgPT09IGltZyApIHtcclxuXHRcdFx0XHRyZXR1cm4gbWF0Y2g7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIGlnbm9yZSBub24tYHNvdXJjZWAgbm9kZXNcclxuXHRcdFx0aWYgKCBzb3VyY2Uubm9kZU5hbWUudG9VcHBlckNhc2UoKSAhPT0gXCJTT1VSQ0VcIiApIHtcclxuXHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0fVxyXG5cdFx0XHQvLyBpZiBpdCdzIGEgc291cmNlIGVsZW1lbnQgdGhhdCBoYXMgdGhlIGBzcmNgIHByb3BlcnR5IHNldCwgdGhyb3cgYSB3YXJuaW5nIGluIHRoZSBjb25zb2xlXHJcblx0XHRcdGlmICggc291cmNlLmdldEF0dHJpYnV0ZSggXCJzcmNcIiApICE9PSBudWxsICYmIHR5cGVvZiBjb25zb2xlICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0Y29uc29sZS53YXJuKFwiVGhlIGBzcmNgIGF0dHJpYnV0ZSBpcyBpbnZhbGlkIG9uIGBwaWN0dXJlYCBgc291cmNlYCBlbGVtZW50OyBpbnN0ZWFkLCB1c2UgYHNyY3NldGAuXCIpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR2YXIgbWVkaWEgPSBzb3VyY2UuZ2V0QXR0cmlidXRlKCBcIm1lZGlhXCIgKTtcclxuXHJcblx0XHRcdC8vIGlmIHNvdXJjZSBkb2VzIG5vdCBoYXZlIGEgc3Jjc2V0IGF0dHJpYnV0ZSwgc2tpcFxyXG5cdFx0XHRpZiAoICFzb3VyY2UuZ2V0QXR0cmlidXRlKCBcInNyY3NldFwiICkgKSB7XHJcblx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIGlmIHRoZXJlJ3Mgbm8gbWVkaWEgc3BlY2lmaWVkLCBPUiB3Lm1hdGNoTWVkaWEgaXMgc3VwcG9ydGVkXHJcblx0XHRcdGlmICggKCAhbWVkaWEgfHwgcGYubWF0Y2hlc01lZGlhKCBtZWRpYSApICkgKSB7XHJcblx0XHRcdFx0dmFyIHR5cGVTdXBwb3J0ZWQgPSBwZi52ZXJpZnlUeXBlU3VwcG9ydCggc291cmNlICk7XHJcblxyXG5cdFx0XHRcdGlmICggdHlwZVN1cHBvcnRlZCA9PT0gdHJ1ZSApIHtcclxuXHRcdFx0XHRcdG1hdGNoID0gc291cmNlO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0fSBlbHNlIGlmICggdHlwZVN1cHBvcnRlZCA9PT0gXCJwZW5kaW5nXCIgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIG1hdGNoO1xyXG5cdH07XHJcblxyXG5cdGZ1bmN0aW9uIHBpY3R1cmVmaWxsKCBvcHQgKSB7XHJcblx0XHR2YXIgZWxlbWVudHMsXHJcblx0XHRcdGVsZW1lbnQsXHJcblx0XHRcdHBhcmVudCxcclxuXHRcdFx0Zmlyc3RNYXRjaCxcclxuXHRcdFx0Y2FuZGlkYXRlcyxcclxuXHRcdFx0b3B0aW9ucyA9IG9wdCB8fCB7fTtcclxuXHJcblx0XHRlbGVtZW50cyA9IG9wdGlvbnMuZWxlbWVudHMgfHwgcGYuZ2V0QWxsRWxlbWVudHMoKTtcclxuXHJcblx0XHQvLyBMb29wIHRocm91Z2ggYWxsIGVsZW1lbnRzXHJcblx0XHRmb3IgKCB2YXIgaSA9IDAsIHBsZW4gPSBlbGVtZW50cy5sZW5ndGg7IGkgPCBwbGVuOyBpKysgKSB7XHJcblx0XHRcdGVsZW1lbnQgPSBlbGVtZW50c1sgaSBdO1xyXG5cdFx0XHRwYXJlbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XHJcblx0XHRcdGZpcnN0TWF0Y2ggPSB1bmRlZmluZWQ7XHJcblx0XHRcdGNhbmRpZGF0ZXMgPSB1bmRlZmluZWQ7XHJcblxyXG5cdFx0XHQvLyBpbW1lZGlhdGVseSBza2lwIG5vbi1gaW1nYCBub2Rlc1xyXG5cdFx0XHRpZiAoIGVsZW1lbnQubm9kZU5hbWUudG9VcHBlckNhc2UoKSAhPT0gXCJJTUdcIiApIHtcclxuXHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gZXhwYW5kbyBmb3IgY2FjaGluZyBkYXRhIG9uIHRoZSBpbWdcclxuXHRcdFx0aWYgKCAhZWxlbWVudFsgcGYubnMgXSApIHtcclxuXHRcdFx0XHRlbGVtZW50WyBwZi5ucyBdID0ge307XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIGlmIHRoZSBlbGVtZW50IGhhcyBhbHJlYWR5IGJlZW4gZXZhbHVhdGVkLCBza2lwIGl0IHVubGVzc1xyXG5cdFx0XHQvLyBgb3B0aW9ucy5yZWV2YWx1YXRlYCBpcyBzZXQgdG8gdHJ1ZSAoIHRoaXMsIGZvciBleGFtcGxlLFxyXG5cdFx0XHQvLyBpcyBzZXQgdG8gdHJ1ZSB3aGVuIHJ1bm5pbmcgYHBpY3R1cmVmaWxsYCBvbiBgcmVzaXplYCApLlxyXG5cdFx0XHRpZiAoICFvcHRpb25zLnJlZXZhbHVhdGUgJiYgZWxlbWVudFsgcGYubnMgXS5ldmFsdWF0ZWQgKSB7XHJcblx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIGlmIGBpbWdgIGlzIGluIGEgYHBpY3R1cmVgIGVsZW1lbnRcclxuXHRcdFx0aWYgKCBwYXJlbnQgJiYgcGFyZW50Lm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkgPT09IFwiUElDVFVSRVwiICkge1xyXG5cclxuXHRcdFx0XHQvLyBJRTkgdmlkZW8gd29ya2Fyb3VuZFxyXG5cdFx0XHRcdHBmLnJlbW92ZVZpZGVvU2hpbSggcGFyZW50ICk7XHJcblxyXG5cdFx0XHRcdC8vIHJldHVybiB0aGUgZmlyc3QgbWF0Y2ggd2hpY2ggbWlnaHQgdW5kZWZpbmVkXHJcblx0XHRcdFx0Ly8gcmV0dXJucyBmYWxzZSBpZiB0aGVyZSBpcyBhIHBlbmRpbmcgc291cmNlXHJcblx0XHRcdFx0Ly8gVE9ETyB0aGUgcmV0dXJuIHR5cGUgaGVyZSBpcyBicnV0YWwsIGNsZWFudXBcclxuXHRcdFx0XHRmaXJzdE1hdGNoID0gcGYuZ2V0TWF0Y2goIGVsZW1lbnQsIHBhcmVudCApO1xyXG5cclxuXHRcdFx0XHQvLyBpZiBhbnkgc291cmNlcyBhcmUgcGVuZGluZyBpbiB0aGlzIHBpY3R1cmUgZHVlIHRvIGFzeW5jIHR5cGUgdGVzdChzKVxyXG5cdFx0XHRcdC8vIHJlbW92ZSB0aGUgZXZhbHVhdGVkIGF0dHIgYW5kIHNraXAgZm9yIG5vdyAoIHRoZSBwZW5kaW5nIHRlc3Qgd2lsbFxyXG5cdFx0XHRcdC8vIHJlcnVuIHBpY3R1cmVmaWxsIG9uIHRoaXMgZWxlbWVudCB3aGVuIGNvbXBsZXRlKVxyXG5cdFx0XHRcdGlmICggZmlyc3RNYXRjaCA9PT0gZmFsc2UgKSB7XHJcblx0XHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Zmlyc3RNYXRjaCA9IHVuZGVmaW5lZDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gQ2FjaGUgYW5kIHJlbW92ZSBgc3Jjc2V0YCBpZiBwcmVzZW50IGFuZCB3ZeKAmXJlIGdvaW5nIHRvIGJlIGRvaW5nIGBwaWN0dXJlYC9gc3Jjc2V0YC9gc2l6ZXNgIHBvbHlmaWxsaW5nIHRvIGl0LlxyXG5cdFx0XHRpZiAoICggcGFyZW50ICYmIHBhcmVudC5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpID09PSBcIlBJQ1RVUkVcIiApIHx8XHJcblx0XHRcdCggIXBmLnNpemVzU3VwcG9ydGVkICYmICggZWxlbWVudC5zcmNzZXQgJiYgcmVnV0Rlc2MudGVzdCggZWxlbWVudC5zcmNzZXQgKSApICkgKSB7XHJcblx0XHRcdFx0cGYuZG9kZ2VTcmNzZXQoIGVsZW1lbnQgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCBmaXJzdE1hdGNoICkge1xyXG5cdFx0XHRcdGNhbmRpZGF0ZXMgPSBwZi5wcm9jZXNzU291cmNlU2V0KCBmaXJzdE1hdGNoICk7XHJcblx0XHRcdFx0cGYuYXBwbHlCZXN0Q2FuZGlkYXRlKCBjYW5kaWRhdGVzLCBlbGVtZW50ICk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gTm8gc291cmNlcyBtYXRjaGVkLCBzbyB3ZeKAmXJlIGRvd24gdG8gcHJvY2Vzc2luZyB0aGUgaW5uZXIgYGltZ2AgYXMgYSBzb3VyY2UuXHJcblx0XHRcdFx0Y2FuZGlkYXRlcyA9IHBmLnByb2Nlc3NTb3VyY2VTZXQoIGVsZW1lbnQgKTtcclxuXHJcblx0XHRcdFx0aWYgKCBlbGVtZW50LnNyY3NldCA9PT0gdW5kZWZpbmVkIHx8IGVsZW1lbnRbIHBmLm5zIF0uc3Jjc2V0ICkge1xyXG5cdFx0XHRcdFx0Ly8gRWl0aGVyIGBzcmNzZXRgIGlzIGNvbXBsZXRlbHkgdW5zdXBwb3J0ZWQsIG9yIHdlIG5lZWQgdG8gcG9seWZpbGwgYHNpemVzYCBmdW5jdGlvbmFsaXR5LlxyXG5cdFx0XHRcdFx0cGYuYXBwbHlCZXN0Q2FuZGlkYXRlKCBjYW5kaWRhdGVzLCBlbGVtZW50ICk7XHJcblx0XHRcdFx0fSAvLyBFbHNlLCByZXNvbHV0aW9uLW9ubHkgYHNyY3NldGAgaXMgc3VwcG9ydGVkIG5hdGl2ZWx5LlxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBzZXQgZXZhbHVhdGVkIHRvIHRydWUgdG8gYXZvaWQgdW5uZWNlc3NhcnkgcmVwYXJzaW5nXHJcblx0XHRcdGVsZW1lbnRbIHBmLm5zIF0uZXZhbHVhdGVkID0gdHJ1ZTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNldHMgdXAgcGljdHVyZSBwb2x5ZmlsbCBieSBwb2xsaW5nIHRoZSBkb2N1bWVudCBhbmQgcnVubmluZ1xyXG5cdCAqIHRoZSBwb2x5ZmlsbCBldmVyeSAyNTBtcyB1bnRpbCB0aGUgZG9jdW1lbnQgaXMgcmVhZHkuXHJcblx0ICogQWxzbyBhdHRhY2hlcyBwaWN0dXJlZmlsbCBvbiByZXNpemVcclxuXHQgKi9cclxuXHRmdW5jdGlvbiBydW5QaWN0dXJlZmlsbCgpIHtcclxuXHRcdHBmLmluaXRUeXBlRGV0ZWN0cygpO1xyXG5cdFx0cGljdHVyZWZpbGwoKTtcclxuXHRcdHZhciBpbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQvLyBXaGVuIHRoZSBkb2N1bWVudCBoYXMgZmluaXNoZWQgbG9hZGluZywgc3RvcCBjaGVja2luZyBmb3IgbmV3IGltYWdlc1xyXG5cdFx0XHQvLyBodHRwczovL2dpdGh1Yi5jb20vZGVkL2RvbXJlYWR5L2Jsb2IvbWFzdGVyL3JlYWR5LmpzI0wxNVxyXG5cdFx0XHRwaWN0dXJlZmlsbCgpO1xyXG5cclxuXHRcdFx0aWYgKCAvXmxvYWRlZHxeaXxeYy8udGVzdCggZG9jLnJlYWR5U3RhdGUgKSApIHtcclxuXHRcdFx0XHRjbGVhckludGVydmFsKCBpbnRlcnZhbElkICk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHR9LCAyNTAgKTtcclxuXHJcblx0XHR2YXIgcmVzaXplVGltZXI7XHJcblx0XHR2YXIgaGFuZGxlUmVzaXplID0gZnVuY3Rpb24oKSB7XHJcblx0ICAgICAgICBwaWN0dXJlZmlsbCh7IHJlZXZhbHVhdGU6IHRydWUgfSk7XHJcblx0ICAgIH07XHJcblx0XHRmdW5jdGlvbiBjaGVja1Jlc2l6ZSgpIHtcclxuXHRcdCAgICBjbGVhclRpbWVvdXQocmVzaXplVGltZXIpO1xyXG5cdFx0ICAgIHJlc2l6ZVRpbWVyID0gc2V0VGltZW91dCggaGFuZGxlUmVzaXplLCA2MCApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggdy5hZGRFdmVudExpc3RlbmVyICkge1xyXG5cdFx0XHR3LmFkZEV2ZW50TGlzdGVuZXIoIFwicmVzaXplXCIsIGNoZWNrUmVzaXplLCBmYWxzZSApO1xyXG5cdFx0fSBlbHNlIGlmICggdy5hdHRhY2hFdmVudCApIHtcclxuXHRcdFx0dy5hdHRhY2hFdmVudCggXCJvbnJlc2l6ZVwiLCBjaGVja1Jlc2l6ZSApO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cnVuUGljdHVyZWZpbGwoKTtcclxuXHJcblx0LyogZXhwb3NlIG1ldGhvZHMgZm9yIHRlc3RpbmcgKi9cclxuXHRwaWN0dXJlZmlsbC5fID0gcGY7XHJcblxyXG5cdGV4cG9zZSggcGljdHVyZWZpbGwgKTtcclxuXHJcbn0gKSggd2luZG93LCB3aW5kb3cuZG9jdW1lbnQsIG5ldyB3aW5kb3cuSW1hZ2UoKSApO1xyXG5cclxuXHJcbi8qXHJcbiAqINCd0LDQstC40LPQsNGG0LjRjyDQsiDRiNCw0L/QutC1XHJcbiAqL1xyXG5jb25zdCBtYWluTmF2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLS1tYWluLW5hdicpO1xyXG5jb25zdCBtYWluTmF2QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLS1oZWFkZXJfX25hdi1idG4nKTtcclxuXHJcbmlmIChtYXRjaE1lZGlhKSB7XHJcbiAgbGV0IG1xTmF2ID0gd2luZG93Lm1hdGNoTWVkaWEoICcobWluLXdpZHRoOiA3NjhweCknICk7XHJcbiAgbXFOYXYuYWRkTGlzdGVuZXIoV2lkdGhDaGFuZ2VOYXYpO1xyXG4gIFdpZHRoQ2hhbmdlTmF2KG1xTmF2KTtcclxufVxyXG5cclxubWFpbk5hdkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2dCkge1xyXG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGlmIChtYWluTmF2LmNsYXNzTGlzdC5jb250YWlucygnZGlzcGxheS1ub25lJykpIHtcclxuICAgIG1haW5OYXYuY2xhc3NMaXN0LnJlbW92ZSgnZGlzcGxheS1ub25lJyk7XHJcbiAgICBtYWluTmF2QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2hlYWRlcl9fbmF2LWJ0bi0tY2xvc2UnKVxyXG4gIH0gZWxzZSB7XHJcbiAgICBtYWluTmF2LmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXktbm9uZScpO1xyXG4gICAgbWFpbk5hdkJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdoZWFkZXJfX25hdi1idG4tLWNsb3NlJylcclxuICB9XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gV2lkdGhDaGFuZ2VOYXYobXEpIHtcclxuICBpZiAoIW1xLm1hdGNoZXMpIHtcclxuICAgIG1haW5OYXYuY2xhc3NMaXN0LmFkZCgnZGlzcGxheS1ub25lJyk7XHJcbiAgICBtYWluTmF2QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc3BsYXktbm9uZScpO1xyXG4gICAgbWFpbk5hdkJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdoZWFkZXJfX25hdi1idG4tLWNsb3NlJyk7XHJcbiAgfSBlbHNlIHtcclxuICAgIG1haW5OYXYuY2xhc3NMaXN0LnJlbW92ZSgnZGlzcGxheS1ub25lJyk7XHJcbiAgICBtYWluTmF2QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXktbm9uZScpO1xyXG4gIH1cclxufVxyXG5cclxuXHJcbi8qXHJcbiAqINCf0LXRgNC10LrQu9GO0YfQsNGC0LXQu9GMINC60LDRgNGC0LjQvdC60LggXCLQtNC+IC0g0L/QvtGB0LvQtVwiXHJcbiAqL1xyXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWV4YW1wbGVfX3N3aXRjaCcpKSB7XHJcbiAgY29uc3QgZXhhbXBsZUFmdGVyQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWV4YW1wbGVfX3N3aXRjaC1idG4tLWFmdGVyJyk7XHJcbiAgY29uc3QgZXhhbXBsZUJlZm9yZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1leGFtcGxlX19zd2l0Y2gtYnRuLS1iZWZvcmUnKTtcclxuICBjb25zdCBleGFtcGxlVG9nZ2xlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWV4YW1wbGVfX3N3aXRjaCcpO1xyXG4gIGNvbnN0IGltZ0FmdGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWV4YW1wbGVfX3BpY3R1cmUtLWFmdGVyJyk7XHJcbiAgY29uc3QgaW1nQmVmb3JlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWV4YW1wbGVfX3BpY3R1cmUtLWJlZm9yZScpO1xyXG4gIGNvbnN0IGltZ0hpZGUgPSAnZXhhbXBsZV9fcGljdHVyZS0taGlkZSc7XHJcblxyXG4gIGlmIChtYXRjaE1lZGlhKSB7XHJcbiAgICBsZXQgbXFFeGFtcGxlID0gd2luZG93Lm1hdGNoTWVkaWEoICcobWF4LXdpZHRoOiA3NjhweCknICk7XHJcbiAgICBtcUV4YW1wbGUuYWRkTGlzdGVuZXIoV2lkdGhDaGFuZ2VFeGFtcGxlKTtcclxuICAgIFdpZHRoQ2hhbmdlRXhhbXBsZShtcUV4YW1wbGUpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gV2lkdGhDaGFuZ2VFeGFtcGxlKG1xKSB7XHJcbiAgICBpZiAobXEubWF0Y2hlcykge1xyXG4gICAgICBleGFtcGxlQWZ0ZXJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzaG93SW1nQWZ0ZXIpO1xyXG4gICAgICBleGFtcGxlQmVmb3JlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2hvd0ltZ0JlZm9yZSk7XHJcbiAgICAgIGV4YW1wbGVUb2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVJbWcpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZXhhbXBsZUFmdGVyQnRuLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2hvd0ltZ0FmdGVyKTtcclxuICAgICAgZXhhbXBsZUJlZm9yZUJ0bi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHNob3dJbWdCZWZvcmUpO1xyXG4gICAgICBleGFtcGxlVG9nZ2xlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlSW1nKTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgZnVuY3Rpb24gc2hvd0ltZ0FmdGVyKGV2dCkge1xyXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBpbWdBZnRlci5jbGFzc0xpc3QucmVtb3ZlKGltZ0hpZGUpO1xyXG4gICAgaW1nQmVmb3JlLmNsYXNzTGlzdC5hZGQoaW1nSGlkZSk7XHJcbiAgICBleGFtcGxlVG9nZ2xlLmNsYXNzTGlzdC5hZGQoJ2V4YW1wbGVfX3N3aXRjaC0tYWZ0ZXInKTtcclxuICB9XHJcbiAgXHJcbiAgZnVuY3Rpb24gc2hvd0ltZ0JlZm9yZShldnQpIHtcclxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgaW1nQmVmb3JlLmNsYXNzTGlzdC5yZW1vdmUoaW1nSGlkZSk7XHJcbiAgICBpbWdBZnRlci5jbGFzc0xpc3QuYWRkKGltZ0hpZGUpO1xyXG4gICAgZXhhbXBsZVRvZ2dsZS5jbGFzc0xpc3QucmVtb3ZlKCdleGFtcGxlX19zd2l0Y2gtLWFmdGVyJyk7XHJcbiAgfVxyXG4gIFxyXG4gIGZ1bmN0aW9uIHRvZ2dsZUltZyhldnQpIHtcclxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgaW1nQmVmb3JlLmNsYXNzTGlzdC50b2dnbGUoaW1nSGlkZSk7XHJcbiAgICBpbWdBZnRlci5jbGFzc0xpc3QudG9nZ2xlKGltZ0hpZGUpO1xyXG4gICAgZXhhbXBsZVRvZ2dsZS5jbGFzc0xpc3QudG9nZ2xlKCdleGFtcGxlX19zd2l0Y2gtLWFmdGVyJyk7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuLypcclxuICog0J/QvtC00LXQu9GO0YfQtdC90LjQtSDRj9C90LTQtdC60YEg0LrQsNGA0YJcclxuICovXHJcbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjeW1hcCcpKSB7XHJcbiAgeW1hcHMucmVhZHkoZnVuY3Rpb24gKCkge1xyXG4gICAgbGV0IG15TWFwID0gbmV3IHltYXBzLk1hcChcInltYXBcIiwge1xyXG4gICAgICBjZW50ZXI6IFs1OS45Mzg2MzEsIDMwLjMyMzA1NTRdLFxyXG4gICAgICB6b29tOiAxN1xyXG4gICAgfSk7XHJcblxyXG4gICAgbGV0IHBsYWNlbWFyayA9IG5ldyB5bWFwcy5QbGFjZW1hcmsoWzU5LjkzODYzMSwgMzAuMzIzMDU1NF0sIHtcclxuICAgICAgYmFsbG9vbkNvbnRlbnRIZWFkZXI6IFwiQ2F0IEVuZXJneVwiLFxyXG4gICAgICBiYWxsb29uQ29udGVudEJvZHk6IFwi0YPQuy4g0JHQvtC70YzRiNCw0Y8gPGJyPtCa0L7QvdGO0YjQtdC90L3QsNGPLCDQtC4gMTkvOCA8YnI+0KHQsNC90LrRgi3Qn9C10YLQtdGA0LHRg9GA0LNcIixcclxuICAgICAgaGludENvbnRlbnQ6IFwi0JzRiyDQvdCw0YXQvtC00LjQvNGB0Y8g0LfQtNC10YHRjFwiXHJcbiAgICB9LCB7XHJcbiAgICAgIGljb25MYXlvdXQ6ICdkZWZhdWx0I2ltYWdlJyxcclxuICAgICAgaWNvbkltYWdlSHJlZjogJ2ltZy9waWN0dXJlL21hcC1waW4ucG5nJyxcclxuICAgICAgaWNvbkltYWdlU2l6ZTogWzYwLCA1MV0sXHJcbiAgICAgIGljb25JbWFnZU9mZnNldDogWy0zMCwgLTUxXVxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIG15TWFwLmdlb09iamVjdHMuYWRkKHBsYWNlbWFyayk7XHJcbiAgICBteU1hcC5iZWhhdmlvcnMuZGlzYWJsZShbJ3Njcm9sbFpvb20nXSk7XHJcblxyXG4gICAgaWYgKG1hdGNoTWVkaWEpIHtcclxuICAgICAgbGV0IGRldmljZVdpZHRoID0gd2luZG93Lm1hdGNoTWVkaWEoICcobWluLXdpZHRoOiAxMzAwcHgpJyApO1xyXG4gICAgICBkZXZpY2VXaWR0aC5hZGRMaXN0ZW5lcihzZXRNYXBDZW50ZXIpO1xyXG4gICAgICBzZXRNYXBDZW50ZXIoZGV2aWNlV2lkdGgpO1xyXG5cclxuICAgICAgZnVuY3Rpb24gc2V0TWFwQ2VudGVyKG1xKSB7XHJcbiAgICAgICAgaWYgKG1xLm1hdGNoZXMpIHtcclxuICAgICAgICAgIG15TWFwLnNldENlbnRlcihbNTkuOTM4NzI1LDMwLjMxOTQ0N10pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBteU1hcC5zZXRDZW50ZXIoWzU5LjkzODYzMSwgMzAuMzIzMDU1NF0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0pO1xyXG59Il19
